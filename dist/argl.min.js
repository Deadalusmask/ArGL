!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("gl-matrix")):"function"==typeof define&&define.amd?define(["gl-matrix"],t):"object"==typeof exports?exports.ArGL=t(require("gl-matrix")):e.ArGL=t(e.window)}(window,function(e){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,t,r){"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=t.Layout=function e(){i(this,e);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.attributes=r;var s=0,o=0,l=!0,u=!1,c=void 0;try{for(var h,d=r[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;if(this[p.key])throw new a(p);s%p.sizeOfType!=0&&(s+=p.sizeOfType-s%p.sizeOfType),this[p.key]={attribute:p,size:p.size,type:p.type,normalized:p.normalized,offset:s},s+=p.sizeInBytes,o=Math.max(o,p.sizeOfType)}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}s%o!=0&&(s+=o-s%o),this.stride=s;var f=!0,m=!1,v=void 0;try{for(var g,y=r[Symbol.iterator]();!(f=(g=y.next()).done);f=!0)this[g.value.key].stride=this.stride}catch(e){m=!0,v=e}finally{try{!f&&y.return&&y.return()}finally{if(m)throw v}}},a=function e(t){i(this,e),this.message="found duplicate attribute: "+t.key},s=function e(t,r,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3],i(this,e),this.key=t,this.size=r,this.type=n,this.normalized=!1,this.sizeOfType=function(e){switch(n){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}(),this.sizeInBytes=this.sizeOfType*r};n.POSITION=new s("position",3,"FLOAT"),n.NORMAL=new s("normal",3,"FLOAT"),n.TANGENT=new s("tangent",3,"FLOAT"),n.BITANGENT=new s("bitangent",3,"FLOAT"),n.UV=new s("uv",2,"FLOAT"),n.MATERIAL_INDEX=new s("materialIndex",1,"SHORT"),n.MATERIAL_ENABLED=new s("materialEnabled",1,"UNSIGNED_SHORT"),n.AMBIENT=new s("ambient",3,"FLOAT"),n.DIFFUSE=new s("diffuse",3,"FLOAT"),n.SPECULAR=new s("specular",3,"FLOAT"),n.SPECULAR_EXPONENT=new s("specularExponent",3,"FLOAT"),n.EMISSIVE=new s("emissive",3,"FLOAT"),n.TRANSMISSION_FILTER=new s("transmissionFilter",3,"FLOAT"),n.DISSOLVE=new s("dissolve",1,"FLOAT"),n.ILLUMINATION=new s("illumination",1,"UNSIGNED_SHORT"),n.REFRACTION_INDEX=new s("refractionIndex",1,"FLOAT"),n.SHARPNESS=new s("sharpness",1,"FLOAT"),n.MAP_DIFFUSE=new s("mapDiffuse",1,"SHORT"),n.MAP_AMBIENT=new s("mapAmbient",1,"SHORT"),n.MAP_SPECULAR=new s("mapSpecular",1,"SHORT"),n.MAP_SPECULAR_EXPONENT=new s("mapSpecularExponent",1,"SHORT"),n.MAP_DISSOLVE=new s("mapDissolve",1,"SHORT"),n.ANTI_ALIASING=new s("antiAliasing",1,"UNSIGNED_SHORT"),n.MAP_BUMP=new s("mapBump",1,"SHORT"),n.MAP_DISPLACEMENT=new s("mapDisplacement",1,"SHORT"),n.MAP_DECAL=new s("mapDecal",1,"SHORT"),n.MAP_EMISSIVE=new s("mapEmissive",1,"SHORT")},function(e,t,r){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=r(0),s=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),(r=r||{}).materials=r.materials||{},r.enableWTextureCoord=!!r.enableWTextureCoord,r.indicesPerMaterial=!!r.indicesPerMaterial;var n=this;n.vertices=[],n.vertexNormals=[],n.textures=[],n.indices=[],n.textureStride=r.enableWTextureCoord?3:2,this.name="";var a=[],s=[],o=[],l={},u=[],c={},h=-1,d=0;l.verts=[],l.norms=[],l.textures=[],l.hashindices={},l.indices=[[]],l.materialIndices=[],l.index=0;for(var p=/^v\s/,f=/^vn\s/,m=/^vt\s/,v=/^f\s/,g=/\s+/,y=/^usemtl/,b=t.split("\n"),x=0;x<b.length;x++){var M=b[x].trim();if(M&&!M.startsWith("#")){var A=M.split(g);if(A.shift(),p.test(M))a.push.apply(a,i(A));else if(f.test(M))s.push.apply(s,i(A));else if(m.test(M)){var w=A;A.length>2&&!r.enableWTextureCoord?w=A.slice(0,2):2===A.length&&r.enableWTextureCoord&&w.push(0),o.push.apply(o,i(w))}else if(y.test(M)){var T=A[0];T in c||(u.push(T),c[T]=u.length-1,r.indicesPerMaterial&&c[T]>0&&l.indices.push([])),h=c[T],r.indicesPerMaterial&&(d=h)}else if(v.test(M))for(var E=!1,I=0,k=A.length;I<k;I++){3!==I||E||(I=2,E=!0);var _=A[0]+","+h,L=A[I]+","+h;if(L in l.hashindices)l.indices[d].push(l.hashindices[L]);else{var R=A[I].split("/"),S=R.length-1;if(l.verts.push(+a[3*(R[0]-1)+0]),l.verts.push(+a[3*(R[0]-1)+1]),l.verts.push(+a[3*(R[0]-1)+2]),o.length){var F=r.enableWTextureCoord?3:2;l.textures.push(+o[(R[1]-1)*F+0]),l.textures.push(+o[(R[1]-1)*F+1]),r.enableWTextureCoord&&l.textures.push(+o[(R[1]-1)*F+2])}l.norms.push(+s[3*(R[S]-1)+0]),l.norms.push(+s[3*(R[S]-1)+1]),l.norms.push(+s[3*(R[S]-1)+2]),l.materialIndices.push(h),l.hashindices[L]=l.index,l.indices[d].push(l.hashindices[L]),l.index+=1}3===I&&E&&l.indices[d].push(l.hashindices[_])}}}n.vertices=l.verts,n.vertexNormals=l.norms,n.textures=l.textures,n.vertexMaterialIndices=l.materialIndices,n.indices=r.indicesPerMaterial?l.indices:l.indices[d],n.materialNames=u,n.materialIndices=c,n.materialsByIndex={},r.calcTangentsAndBitangents&&this.calculateTangentsAndBitangents()}return n(e,[{key:"calculateTangentsAndBitangents",value:function(){var e={};e.tangents=[].concat(i(new Array(this.vertices.length))).map(function(e){return 0}),e.bitangents=[].concat(i(new Array(this.vertices.length))).map(function(e){return 0});var t;t=Array.isArray(this.indices[0])?[].concat.apply([],this.indices):this.indices;for(var r=this.vertices,n=this.vertexNormals,a=this.textures,s=0;s<t.length;s+=3){var o=t[s+0],l=t[s+1],u=t[s+2],c=r[3*o+0],h=r[3*o+1],d=r[3*o+2],p=a[2*o+0],f=a[2*o+1],m=r[3*l+0],v=r[3*l+1],g=r[3*l+2],y=a[2*l+0],b=a[2*l+1],x=m-c,M=v-h,A=g-d,w=r[3*u+0]-c,T=r[3*u+1]-h,E=r[3*u+2]-d,I=y-p,k=b-f,_=a[2*u+0]-p,L=a[2*u+1]-f,R=I*L-k*_,S=1/(Math.abs(R<1e-4)?1:R),F=(x*L-w*k)*S,P=(M*L-T*k)*S,B=(A*L-E*k)*S,O=(w*I-x*_)*S,N=(T*I-M*_)*S,D=(E*I-A*_)*S,U=n[3*o+0],C=n[3*o+1],z=n[3*o+2],Y=n[3*l+0],X=n[3*l+1],j=n[3*l+2],V=n[3*u+0],q=n[3*u+1],W=n[3*u+2],G=F*U+P*C+B*z,H=F*Y+P*X+B*j,K=F*V+P*q+B*W,Q=F-U*G,Z=P-C*G,$=B-z*G,J=F-Y*H,ee=P-X*H,te=B-j*H,re=F-V*K,ie=P-q*K,ne=B-W*K,ae=Math.sqrt(Q*Q+Z*Z+$*$),se=Math.sqrt(J*J+ee*ee+te*te),oe=Math.sqrt(re*re+ie*ie+ne*ne),le=O*U+N*C+D*z,ue=O*Y+N*X+D*j,ce=O*V+N*q+D*W,he=O-U*le,de=N-C*le,pe=D-z*le,fe=O-Y*ue,me=N-X*ue,ve=D-j*ue,ge=O-V*ce,ye=N-q*ce,be=D-W*ce,xe=Math.sqrt(he*he+de*de+pe*pe),Me=Math.sqrt(fe*fe+me*me+ve*ve),Ae=Math.sqrt(ge*ge+ye*ye+be*be);e.tangents[3*o+0]+=Q/ae,e.tangents[3*o+1]+=Z/ae,e.tangents[3*o+2]+=$/ae,e.tangents[3*l+0]+=J/se,e.tangents[3*l+1]+=ee/se,e.tangents[3*l+2]+=te/se,e.tangents[3*u+0]+=re/oe,e.tangents[3*u+1]+=ie/oe,e.tangents[3*u+2]+=ne/oe,e.bitangents[3*o+0]+=he/xe,e.bitangents[3*o+1]+=de/xe,e.bitangents[3*o+2]+=pe/xe,e.bitangents[3*l+0]+=fe/Me,e.bitangents[3*l+1]+=me/Me,e.bitangents[3*l+2]+=ve/Me,e.bitangents[3*u+0]+=ge/Ae,e.bitangents[3*u+1]+=ye/Ae,e.bitangents[3*u+2]+=be/Ae}this.tangents=e.tangents,this.bitangents=e.bitangents}},{key:"makeBufferData",value:function(e){var t=this.vertices.length/3,r=new ArrayBuffer(e.stride*t);r.numItems=t;for(var i=new DataView(r),n=0,s=0;n<t;n++){s=n*e.stride;var o=!0,l=!1,u=void 0;try{for(var c,h=e.attributes[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value,p=s+e[d.key].offset;switch(d.key){case a.Layout.POSITION.key:i.setFloat32(p,this.vertices[3*n],!0),i.setFloat32(p+4,this.vertices[3*n+1],!0),i.setFloat32(p+8,this.vertices[3*n+2],!0);break;case a.Layout.UV.key:i.setFloat32(p,this.textures[2*n],!0),i.setFloat32(p+4,this.vertices[2*n+1],!0);break;case a.Layout.NORMAL.key:i.setFloat32(p,this.vertexNormals[3*n],!0),i.setFloat32(p+4,this.vertexNormals[3*n+1],!0),i.setFloat32(p+8,this.vertexNormals[3*n+2],!0);break;case a.Layout.MATERIAL_INDEX.key:i.setInt16(p,this.vertexMaterialIndices[n],!0);break;case a.Layout.AMBIENT.key:var f=this.vertexMaterialIndices[n],m=this.materialsByIndex[f];if(!m)break;i.setFloat32(p,m.ambient[0],!0),i.setFloat32(p+4,m.ambient[1],!0),i.setFloat32(p+8,m.ambient[2],!0);break;case a.Layout.DIFFUSE.key:var v=this.vertexMaterialIndices[n],g=this.materialsByIndex[v];if(!g)break;i.setFloat32(p,g.diffuse[0],!0),i.setFloat32(p+4,g.diffuse[1],!0),i.setFloat32(p+8,g.diffuse[2],!0);break;case a.Layout.SPECULAR.key:var y=this.vertexMaterialIndices[n],b=this.materialsByIndex[y];if(!b)break;i.setFloat32(p,b.specular[0],!0),i.setFloat32(p+4,b.specular[1],!0),i.setFloat32(p+8,b.specular[2],!0);break;case a.Layout.SPECULAR_EXPONENT.key:var x=this.vertexMaterialIndices[n],M=this.materialsByIndex[x];if(!M)break;i.setFloat32(p,M.specularExponent,!0);break;case a.Layout.EMISSIVE.key:var A=this.vertexMaterialIndices[n],w=this.materialsByIndex[A];if(!w)break;i.setFloat32(p,w.emissive[0],!0),i.setFloat32(p+4,w.emissive[1],!0),i.setFloat32(p+8,w.emissive[2],!0);break;case a.Layout.TRANSMISSION_FILTER.key:var T=this.vertexMaterialIndices[n],E=this.materialsByIndex[T];if(!E)break;i.setFloat32(p,E.transmissionFilter[0],!0),i.setFloat32(p+4,E.transmissionFilter[1],!0),i.setFloat32(p+8,E.transmissionFilter[2],!0);break;case a.Layout.DISSOLVE.key:var I=this.vertexMaterialIndices[n],k=this.materialsByIndex[I];if(!k)break;i.setFloat32(p,k.dissolve,!0);break;case a.Layout.ILLUMINATION.key:var _=this.vertexMaterialIndices[n],L=this.materialsByIndex[_];if(!L)break;i.setInt16(p,L.illumination,!0);break;case a.Layout.REFRACTION_INDEX.key:var R=this.vertexMaterialIndices[n],S=this.materialsByIndex[R];if(!S)break;i.setFloat32(p,S.refractionIndex,!0);break;case a.Layout.SHARPNESS.key:var F=this.vertexMaterialIndices[n],P=this.materialsByIndex[F];if(!P)break;i.setFloat32(p,P.sharpness,!0);break;case a.Layout.ANTI_ALIASING.key:var B=this.vertexMaterialIndices[n],O=this.materialsByIndex[B];if(!O)break;i.setInt16(p,O.antiAliasing,!0)}}}catch(e){l=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(l)throw u}}}return r}},{key:"makeIndexBufferData",value:function(){var e=new Uint16Array(this.indices);return e.numItems=this.indices.length,e}},{key:"addMaterialLibrary",value:function(e){for(var t in e.materials)if(t in this.materialIndices){var r=e.materials[t],i=this.materialIndices[r.name];this.materialsByIndex[i]=r}}}]),e}();t.default=s},function(e,t,r){"use strict";function i(e){return Array.isArray(e)?e:Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=t.Material=function e(t){n(this,e),this.name=t,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};t.MaterialLibrary=function(){function e(t){n(this,e),this.data=t,this.currentMaterial=null,this.materials={},this.parse()}return a(e,[{key:"parse_newmtl",value:function(e){var t=e[0];this.currentMaterial=new s(t),this.materials[t]=this.currentMaterial}},{key:"parseColor",value:function(e){if("spectral"!=e[0]&&"xyz"!=e[0]){if(3==e.length)return e.map(parseFloat);var t=parseFloat(e[0]);return[t,t,t]}}},{key:"parse_Ka",value:function(e){this.currentMaterial.ambient=this.parseColor(e)}},{key:"parse_Kd",value:function(e){this.currentMaterial.diffuse=this.parseColor(e)}},{key:"parse_Ks",value:function(e){this.currentMaterial.specular=this.parseColor(e)}},{key:"parse_Ke",value:function(e){this.currentMaterial.emissive=this.parseColor(e)}},{key:"parse_Tf",value:function(e){this.currentMaterial.transmissionFilter=this.parseColor(e)}},{key:"parse_d",value:function(e){this.currentMaterial.dissolve=parseFloat(e.pop())}},{key:"parse_illum",value:function(e){this.currentMaterial.illumination=parseInt(e[0])}},{key:"parse_Ni",value:function(e){this.currentMaterial.refractionIndex=parseFloat(e[0])}},{key:"parse_Ns",value:function(e){this.currentMaterial.specularExponent=parseInt(e[0])}},{key:"parse_sharpness",value:function(e){this.currentMaterial.sharpness=parseInt(e[0])}},{key:"parse_cc",value:function(e,t){t.colorCorrection="on"==e[0]}},{key:"parse_blendu",value:function(e,t){t.horizontalBlending="on"==e[0]}},{key:"parse_blendv",value:function(e,t){t.verticalBlending="on"==e[0]}},{key:"parse_boost",value:function(e,t){t.boostMipMapSharpness=parseFloat(e[0])}},{key:"parse_mm",value:function(e,t){t.modifyTextureMap.brightness=parseFloat(e[0]),t.modifyTextureMap.contrast=parseFloat(e[1])}},{key:"parse_ost",value:function(e,t,r){for(;e.length<3;)e.push(r);t.u=parseFloat(e[0]),t.v=parseFloat(e[1]),t.w=parseFloat(e[2])}},{key:"parse_o",value:function(e,t){this.parse_ost(e,t.offset,0)}},{key:"parse_s",value:function(e,t){this.parse_ost(e,t.scale,1)}},{key:"parse_t",value:function(e,t){this.parse_ost(e,t.turbulence,0)}},{key:"parse_texres",value:function(e,t){t.textureResolution=parseFloat(e[0])}},{key:"parse_clamp",value:function(e,t){t.clamp="on"==e[0]}},{key:"parse_bm",value:function(e,t){t.bumpMultiplier=parseFloat(e[0])}},{key:"parse_imfchan",value:function(e,t){t.imfChan=e[0]}},{key:"parse_type",value:function(e,t){t.reflectionType=e[0]}},{key:"parseOptions",value:function(e){var t={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},r=void 0,i=void 0,n={};for(e.reverse();e.length;){var a=e.pop();a.startsWith("-")?n[r=a.substr(1)]=[]:n[r].push(a)}for(r in n)if(n.hasOwnProperty(r)){i=n[r];var s=this["parse_"+r];s&&s.bind(this)(i,t)}return t}},{key:"parseMap",value:function(e){var t=void 0,r=void 0;if(e[0].startsWith("-"))t=e.pop(),r=e;else{var n=i(e);t=n[0],r=n.slice(1)}return(r=this.parseOptions(r)).filename=t,r}},{key:"parse_map_Ka",value:function(e){this.currentMaterial.mapAmbient=this.parseMap(e)}},{key:"parse_map_Kd",value:function(e){this.currentMaterial.mapDiffuse=this.parseMap(e)}},{key:"parse_map_Ks",value:function(e){this.currentMaterial.mapSpecular=this.parseMap(e)}},{key:"parse_map_Ke",value:function(e){this.currentMaterial.mapEmissive=this.parseMap(e)}},{key:"parse_map_Ns",value:function(e){this.currentMaterial.mapSpecularExponent=this.parseMap(e)}},{key:"parse_map_d",value:function(e){this.currentMaterial.mapDissolve=this.parseMap(e)}},{key:"parse_map_aat",value:function(e){this.currentMaterial.antiAliasing="on"==e[0]}},{key:"parse_map_bump",value:function(e){this.currentMaterial.mapBump=this.parseMap(e)}},{key:"parse_bump",value:function(e){this.parse_map_bump(e)}},{key:"parse_disp",value:function(e){this.currentMaterial.mapDisplacement=this.parseMap(e)}},{key:"parse_decal",value:function(e){this.currentMaterial.mapDecal=this.parseMap(e)}},{key:"parse_refl",value:function(e){this.currentMaterial.mapReflections.push(this.parseMap(e))}},{key:"parse",value:function(){var e=this.data.split(/\r?\n/),t=!0,r=!1,n=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;if((o=o.trim())&&!o.startsWith("#")){var l,u=o.split(/\s/),c=i(u);l=c[0],u=c.slice(1);var h=this["parse_"+l];h&&h.bind(this)(u)}}}catch(e){r=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw n}}delete this.data,this.currentMaterial=null}}]),e}()},function(e,t,r){e.exports=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.deleteMeshBuffers=t.initMeshBuffers=t.downloadMeshes=t.downloadModels=t.Layout=t.MaterialLibrary=t.Material=t.Mesh=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),n=r(2),a=r(0),s=r(5);t.Mesh=i.default,t.Material=n.Material,t.MaterialLibrary=n.MaterialLibrary,t.Layout=a.Layout,t.downloadModels=s.downloadModels,t.downloadMeshes=s.downloadMeshes,t.initMeshBuffers=s.initMeshBuffers,t.deleteMeshBuffers=s.deleteMeshBuffers,t.version="1.1.3"},function(e,t,r){"use strict";function i(e,t){var r=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];t.endsWith("/")||(t+="/");var i=[];for(var n in e.materials)if(e.materials.hasOwnProperty(n)){n=e.materials[n];var a=!0,s=!1,o=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;!function(e){var r=n[c];if(!r)return"continue";var a=t+r.filename;i.push(fetch(a).then(function(e){if(!e.ok)throw new Error;return e.blob()}).then(function(e){var t=new Image;return t.src=URL.createObjectURL(e),r.texture=t,new Promise(function(e){return t.onload=e})}).catch(function(){}))}()}}catch(e){s=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw o}}}return Promise.all(i)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.downloadModels=function(e){var t=[],r=!0,o=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){!function(e){var r=[];if(!e.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var n={};n.indicesPerMaterial=!!e.indicesPerMaterial,n.calcTangentsAndBitangents=!!e.calcTangentsAndBitangents;var o=e.name;if(!o){var l=e.obj.split("/");o=l[l.length-1].replace(".obj","")}if(r.push(Promise.resolve(o)),r.push(fetch(e.obj).then(function(e){return e.text()}).then(function(e){return new a.default(e,n)})),e.mtl){var u=e.mtl;"boolean"==typeof u&&(u=e.obj.replace(/\.obj$/,".mtl")),r.push(fetch(u).then(function(e){return e.text()}).then(function(t){var r=new s.MaterialLibrary(t);if(!1!==e.downloadMtlTextures){var n=e.mtlTextureRoot;return n||(n=u.substr(0,u.lastIndexOf("/"))),Promise.all([Promise.resolve(r),i(r,n)])}return Promise.all(Promise.resolve(r))}).then(function(e){return e[0]}))}t.push(Promise.all(r))}(u.value)}}catch(e){o=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw l}}return Promise.all(t).then(function(e){var t={},r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value,u=n(l,3),c=u[0],h=u[1],d=u[2];h.name=c,d&&h.addMaterialLibrary(d),t[c]=h}}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return t})},t.downloadMeshes=function(e,t,r){void 0===r&&(r={});var i=[];for(var s in e)!function(t){if(!e.hasOwnProperty(t))return"continue";var r=e[t];i.push(fetch(r).then(function(e){return e.text()}).then(function(e){return[t,new a.default(e)]}))}(s);Promise.all(i).then(function(e){var i=!0,a=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value,c=n(u,2),h=c[0],d=c[1];r[h]=d}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return t(r)})},t.initMeshBuffers=function(e,t){t.normalBuffer=o(e,e.ARRAY_BUFFER,t.vertexNormals,3),t.textureBuffer=o(e,e.ARRAY_BUFFER,t.textures,t.textureStride),t.vertexBuffer=o(e,e.ARRAY_BUFFER,t.vertices,3),t.indexBuffer=o(e,e.ELEMENT_ARRAY_BUFFER,t.indices,1)},t.deleteMeshBuffers=function(e,t){e.deleteBuffer(t.normalBuffer),e.deleteBuffer(t.textureBuffer),e.deleteBuffer(t.vertexBuffer),e.deleteBuffer(t.indexBuffer)};var a=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),s=r(2),o=(r(0),function(e,t,r,i){var n=e.createBuffer(),a=t===e.ARRAY_BUFFER?Float32Array:Uint16Array;return e.bindBuffer(t,n),e.bufferData(t,new a(r),e.STATIC_DRAW),n.itemSize=i,n.numItems=r.length/i,n})}])},function(e,t,r){"use strict";r.r(t);var i={};r.r(i),r.d(i,"mobilecheck",function(){return s}),r.d(i,"loadImage",function(){return o}),r.d(i,"loadBinary",function(){return l});var n,a=r(1);function s(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}function o(e,t){return new Promise((r,i)=>{let n=new XMLHttpRequest,a=!1;n.open("GET",e,!0),n.responseType="arraybuffer",n.onprogress=function(e){e.lengthComputable?t(Math.round(e.loaded/e.total*100)):a||(a=!0,t(-1))},n.onloadend=function(){if(n.status.toString().match(/^2/)){a||t(100);let e={},i=n.getAllResponseHeaders().match(/^Content-Type\:\s*(.*?)$/im);i&&i[1]&&(e.type=i[1]);let s=new Blob([this.response],e),o=window.URL.createObjectURL(s),l=new Image;l.src=o,l.onload=(()=>r(l))}else i(n)},n.send()})}function l(e,t){return new Promise((r,i)=>{let n=new XMLHttpRequest,a=!1;n.open("GET",e,!0),n.responseType="arraybuffer",n.onprogress=function(e){e.lengthComputable?t(Math.round(e.loaded/e.total*100)):a||(a=!0,t(-1))},n.onloadend=function(){n.status.toString().match(/^2/)?(a||t(100),r(this.response)):i(n)},n.send()})}class u{constructor(e,t,r){let i=c(e,e.VERTEX_SHADER,t),n=c(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,n),e.linkProgram(a),e.deleteShader(i),e.deleteShader(n),!e.getProgramParameter(a,e.LINK_STATUS))return console.error("Unable to initialize the shader program: "+e.getProgramInfoLog(a)),null;this.gl=e,this.program=a}use(){this.gl.useProgram(this.program)}setBool(e,t){this.gl.uniform1i(this.gl.getUniformLocation(this.program,e),Number(t))}setInt(e,t){this.gl.uniform1i(this.gl.getUniformLocation(this.program,e),Math.round(Number(t)))}setFloat(e,t){this.gl.uniform1f(this.gl.getUniformLocation(this.program,e),Number(t))}setVec2(e,t){this.gl.uniform2fv(this.gl.getUniformLocation(this.program,e),t)}setVec3(e,t){this.gl.uniform3fv(this.gl.getUniformLocation(this.program,e),t)}setVec4(e,t){this.gl.uniform4fv(this.gl.getUniformLocation(this.program,e),t)}setMat2(e,t){this.gl.uniformMatrix2fv(this.gl.getUniformLocation(this.program,e),!1,t)}setMat3(e,t){this.gl.uniformMatrix3fv(this.gl.getUniformLocation(this.program,e),!1,t)}setMat4(e,t){this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,e),!1,t)}}function c(e,t,r){const i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.error("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)}class h{constructor({width:e=300,height:t=150,desktopInput:r=!0,touchInput:i=!0}){this.options={width:e,height:t,desktopInput:r,touchInput:i},this.el=document.createElement("div"),this.canvas=document.createElement("canvas"),this.el.style.width=e.toString()+"px",this.el.style.height=t.toString()+"px",this.canvas.style.width=e.toString()+"px",this.canvas.style.height=t.toString()+"px",this.loadingBar=document.createElement("progress"),this.loadingBar.value=0,this.loadingBar.max=100,this.loadingBar.style.width=e+"px",this.el.appendChild(this.loadingBar),this.resource={images:[]},this.resourceCount=0,this.loadProgress=[];let n=this;if(this.loadProgressProxy=new Proxy(this.loadProgress,{set:function(e,t,r,i){let a=n.loadProgress.reduce((e,t)=>e+Number(t),0);return 0!==n.resourceCount&&(n.loadingBar.value=a/n.resourceCount),Reflect.set(e,t,r,i)}}),this.gl=this.canvas.getContext("webgl2"),!this.gl)return console.error("Unable to initialize WebGL2. Your browser or machine may not support it."),null;if(this.deltaTime=0,this.lastFrame=0,s()?this.mobile=!0:this.mobile=!1,this.options.desktopInput){let e={lockPointer:!0};"boolean"!=typeof this.options.desktopInput&&(e=this.options.desktopInput);let[t,r]=h.desktopInput(this.canvas,e);this.currentlyPressedKeys=t,this.mouseInput=r}if(i){let e=h.touchInput(this.canvas);this.ongoingTouches=e}}resize(){let e=this.canvas.clientWidth,t=this.canvas.clientHeight;this.canvas.width==e&&this.canvas.height==t||(this.canvas.width=e,this.canvas.height=t),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}draw(e){}started(){}render(e){if(this.deltaTime=e-this.lastFrame,this.lastFrame=e,this.resize(),this.draw(e),this.options.touchInput)for(let e in this.ongoingTouches)this.ongoingTouches[e].deltaX=0,this.ongoingTouches[e].deltaY=0;this.options.desktopInput&&(this.mouseInput.deltaX=0,this.mouseInput.deltaY=0,this.mouseInput.drag&&(this.mouseInput.dragX=0,this.mouseInput.dragY=0),this.mouseInput.wheelDeltaY=0),requestAnimationFrame(this.render.bind(this))}loadMesh(e){let t=new a.Mesh(e);return Object(a.initMeshBuffers)(this.gl,t),t}setMeshVAO(e,t){let r=this.gl.getAttribLocation(t.program,"a_position"),i=this.gl.getAttribLocation(t.program,"a_texCoord"),n=this.gl.getAttribLocation(t.program,"a_normal"),a=this.gl.createVertexArray();return this.gl.bindVertexArray(a),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.vertexBuffer),this.gl.vertexAttribPointer(r,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(r),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.textureBuffer),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(i),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.normalBuffer),this.gl.vertexAttribPointer(n,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(n),this.gl.bindVertexArray(null),a}drawMesh(e,t){this.gl.bindVertexArray(t),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e.indexBuffer),this.gl.drawElements(this.gl.TRIANGLES,e.indexBuffer.numItems,this.gl.UNSIGNED_SHORT,0),this.gl.bindVertexArray(null)}async start(){let e=await this.loadTexture();this.loadingBar.remove(),this.el.appendChild(this.canvas),this.render(this.lastFrame),this.textures=e,this.started()}setImageResource(e){this.resource.images=e}async loadTexture(){let e=[];this.resourceCount+=this.resource.images.length;let t=this.resource.images.map((e,t)=>h.loadImage(e,e=>{this.loadProgressProxy[t]=e})),r=await Promise.all(t);return this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),r.forEach((t,r)=>{e[r]=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0+r),this.gl.bindTexture(this.gl.TEXTURE_2D,e[r]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)}),e}}h.loadImage=o,(n=h).desktopInput=function(e,t){let r=new Map,i={deltaX:0,deltaY:0,wheelDeltaY:0};function n(e){r.set(e.key,!0)}function a(e){r.set(e.key,!1)}function s(e){i.deltaX=e.movementX||0,i.deltaY=e.movementY||0,i.drag&&(i.dragX=e.movementX||0,i.dragY=e.movementY||0)}function o(e){i.wheelDeltaY=e.wheelDeltaY}function l(e){i.drag=!0,i.dragX=0,i.dragY=0}function u(e){i.drag=!1}function c(){document.addEventListener("keydown",n),document.addEventListener("keyup",a),document.addEventListener("mousemove",s),document.addEventListener("mousedown",l),document.addEventListener("mouseup",u),document.addEventListener("wheel",o)}function h(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",a),document.removeEventListener("mousemove",s),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",u),document.removeEventListener("wheel",o)}if(t.lockPointer){function d(){document.pointerLockElement===e||document.mozPointerLockElement===e?c():h()}e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.exitPointerLock=e.exitPointerLock||e.mozExitPointerLock,e.onclick=function(){e.requestPointerLock()},document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1)}else e.contentEditable="true",e.style.cursor="default",e.addEventListener("focus",c),e.addEventListener("blur",h);return[r,i]},n.touchInput=function(e){const t=[];function r(e){for(let r=0;r<t.length;r++)if(t[r].identifier===e)return r;return-1}return e.addEventListener("touchstart",function(e){e.preventDefault();let r=e.changedTouches;for(let e=0;e<r.length;e++){let i={pageX:r[e].pageX,pageY:r[e].pageY,startX:r[e].pageX,startY:r[e].pageY,deltaX:0,deltaY:0,identifier:r[e].identifier};t.push(i)}},!1),e.addEventListener("touchend",function(e){e.preventDefault();let i=e.changedTouches;for(let e=0;e<i.length;e++){let n=r(i[e].identifier);t.splice(n,1)}},!1),e.addEventListener("touchmove",function(e){e.preventDefault();let i=e.changedTouches;for(let e=0;e<i.length;e++){let n=r(i[e].identifier),a={pageX:i[e].pageX,pageY:i[e].pageY,startX:t[n].startX,startY:t[n].startY,deltaX:i[e].pageX-t[n].pageX,deltaY:i[e].pageY-t[n].pageY,identifier:i[e].identifier};t.splice(n,1,a)}},!1),t},function(e){const t=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0],r="#version 300 es\n\n  layout (location = 0) in vec3 a_position;\n  layout (location = 1) in vec2 a_texCoord;\n\n  out vec2 TexCoord;\n\n  void main()\n  {\n      TexCoord = a_texCoord;\n      gl_Position = vec4(a_position, 1.0);\n  }\n  ";e.prototype.drawQuad=function(e){if(void 0===this.quadVAO){this.quadVAO=this.gl.createVertexArray();let e=this.gl.createBuffer();this.gl.bindVertexArray(this.quadVAO),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.const_DRAW),this.gl.enableVertexAttribArray(0),this.gl.vertexAttribPointer(0,3,this.gl.FLOAT,!0,20,0),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(1,2,this.gl.FLOAT,!0,20,12),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null)}if(this.gl.bindVertexArray(this.quadVAO),1===e.length)this.gl.bindTexture(this.gl.TEXTURE_2D,e[0]);else for(let t in e)this.gl.activeTexture(this.gl.TEXTURE0+Number(t)),this.gl.bindTexture(this.gl.TEXTURE_2D,e[t]);this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(null)},e.prototype.drawFB=function(e){void 0===this.fbShader&&(this.fbShader=new u(this.gl,r,"#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D scene;\n\n  void main()\n  {\n    FragColor = texture(scene, TexCoord);\n  }\n  ")),this.fbShader.use(),this.fbShader.setInt("scene",0),this.drawQuad([e])},e.prototype.drawDepth=function(e){void 0===this.fbShader&&(this.fbShader=new u(this.gl,r,"#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D depthMap;\n\n  void main()\n  {\n    float depthValue = texture(depthMap, TexCoord).r;\n    FragColor = vec4(vec3(depthValue), 1.0);\n  }\n  ")),this.fbShader.use(),this.fbShader.setInt("depthMap",0),this.drawQuad([e])}}(h);var d=h,p=r(0),f=class{constructor(e=[0,0,0],t=[0,0,0,1],r=45){this.position=e,this.orientation=t,this.zoom=r,this.update()}getViewMatrix(){this.update();let e=p.mat4.create(),t=[0,0,0];return p.vec3.add(t,this.position,this.front),p.mat4.lookAt(e,this.position,t,this.up),e}translate(e){p.vec3.add(this.position,this.position,e)}rotate(e,t){let r=p.quat.create();p.quat.setAxisAngle(r,t,e),p.quat.mul(this.orientation,this.orientation,r),this.update()}yaw(e){this.rotate(e,this.up)}pitch(e){this.rotate(e,this.right)}roll(e){this.rotate(e,this.front)}update(){let e=p.mat4.create();p.mat4.fromQuat(e,this.orientation),this.right=[-e[0],-e[4],-e[8]],this.up=[e[1],e[5],e[9]],this.front=[e[2],e[6],e[10]]}processZoom(e){this.zoom>=1&&this.zoom<=45&&(this.zoom-=e/200),this.zoom<=1&&(this.zoom=1),this.zoom>=45&&(this.zoom=45)}};function m(e,t,r){let i=p.vec3.create(),n=p.vec3.create(),a=p.vec3.create();return p.vec3.normalize(t,t),p.vec3.scale(n,e,Math.cos(r)),p.vec3.cross(a,t,e),p.vec3.scale(a,a,Math.sin(r)),p.vec3.add(i,n,a),p.vec3.normalize(i,i),i}class v extends f{processMove(e,t){let r=p.vec3.create();e==v.Movement.FORWARD&&(p.vec3.scale(r,this.front,t),this.translate(r)),e==v.Movement.BACKWARD&&(p.vec3.scale(r,this.front,-t),this.translate(r)),e==v.Movement.LEFT&&(p.vec3.scale(r,this.right,-t),this.translate(r)),e==v.Movement.RIGHT&&(p.vec3.scale(r,this.right,t),this.translate(r)),e==v.Movement.UP&&(p.vec3.scale(r,this.up,t),this.translate(r)),e==v.Movement.DOWN&&(p.vec3.scale(r,this.up,-t),this.translate(r))}desktopFreeMoveControl(e,t,r,i,n=["w","s","a","d"," ","Shift","q","e"]){e.get(n[0])&&this.processMove(v.Movement.FORWARD,t),e.get(n[1])&&this.processMove(v.Movement.BACKWARD,t),e.get(n[2])&&this.processMove(v.Movement.LEFT,t),e.get(n[3])&&this.processMove(v.Movement.RIGHT,t),e.get(n[4])&&this.processMove(v.Movement.UP,t),e.get(n[5])&&this.processMove(v.Movement.DOWN,t);let a=e=>e/180*Math.PI;e.get(n[6])&&this.roll(a(5*-t)),e.get(n[7])&&this.roll(a(5*t));let s=a(r.deltaX*i),o=a(r.deltaY*i);this.pitch(o),this.rotate(s,[0,1,0]),this.processZoom(r.wheelDeltaY)}}v.Movement={FORWARD:0,BACKWARD:1,LEFT:2,RIGHT:3,UP:4,DOWN:5};var g=v;r.d(t,"ArGL",function(){return d}),r.d(t,"Camera",function(){return f}),r.d(t,"Shader",function(){return u}),r.d(t,"OrbitCamera",function(){return class extends f{constructor(e=[0,0,5],t=[0,0,0],r=45){let i=p.vec3.create();p.vec3.sub(i,t,e),p.vec3.normalize(i,i);let n=[i[0],0,i[2]],a=[0,i[1],Math.sqrt(1-i[1]**2)],s=0===p.vec3.length(n)?0:p.vec3.angle([0,0,1],n);s=i[0]>0?-s:s;let o=0===p.vec3.length(a)?0:p.vec3.angle([0,0,1],a);o=i[1]>0?-o:o,console.log(i,s,o),console.log(n,a),super(e,p.quat.create(),r),this.yaw(s),this.pitch(o),this.center=t,this.distance=p.vec3.distance(t,e)}processRotate(e,t){let r=p.vec3.create();p.vec3.scale(r,this.front,-1),r=m(r,[0,1,0],-e);let i=p.vec3.create();p.vec3.cross(i,this.up,r),r=m(r,i,-t),p.vec3.scale(r,r,this.distance),this.position=r,this.rotate(e,[0,1,0]),this.pitch(t)}orbitControl(e){if(e.mouseInput.drag){let t=e.mouseInput.dragX/e.canvas.clientWidth*Math.PI*2,r=e.mouseInput.dragY/e.canvas.clientHeight*Math.PI*2;this.processRotate(t,r)}this.processZoom(e.mouseInput.wheelDeltaY)}}}),r.d(t,"FreeMoveCamera",function(){return g}),r.d(t,"util",function(){return i}),t.default=d}])});