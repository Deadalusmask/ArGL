!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("gl-matrix"),require("hammerjs")):"function"==typeof define&&define.amd?define(["gl-matrix","hammerjs"],t):"object"==typeof exports?exports.ArGL=t(require("gl-matrix"),require("hammerjs")):e.ArGL=t(e.window,e.Hammer)}(window,function(e,t){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"undefined"!=typeof self&&self,e.exports=function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=t.Layout=function e(){i(this,e);for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];this.attributes=r;var s=0,o=0,l=!0,u=!1,c=void 0;try{for(var h,d=r[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;if(this[p.key])throw new n(p);s%p.sizeOfType!=0&&(s+=p.sizeOfType-s%p.sizeOfType),this[p.key]={attribute:p,size:p.size,type:p.type,normalized:p.normalized,offset:s},s+=p.sizeInBytes,o=Math.max(o,p.sizeOfType)}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}s%o!=0&&(s+=o-s%o),this.stride=s;var f=!0,m=!1,v=void 0;try{for(var g,y=r[Symbol.iterator]();!(f=(g=y.next()).done);f=!0)this[g.value.key].stride=this.stride}catch(e){m=!0,v=e}finally{try{!f&&y.return&&y.return()}finally{if(m)throw v}}},n=function e(t){i(this,e),this.message="found duplicate attribute: "+t.key},s=function e(t,r,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3],i(this,e),this.key=t,this.size=r,this.type=a,this.normalized=!1,this.sizeOfType=function(e){switch(a){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}(),this.sizeInBytes=this.sizeOfType*r};a.POSITION=new s("position",3,"FLOAT"),a.NORMAL=new s("normal",3,"FLOAT"),a.TANGENT=new s("tangent",3,"FLOAT"),a.BITANGENT=new s("bitangent",3,"FLOAT"),a.UV=new s("uv",2,"FLOAT"),a.MATERIAL_INDEX=new s("materialIndex",1,"SHORT"),a.MATERIAL_ENABLED=new s("materialEnabled",1,"UNSIGNED_SHORT"),a.AMBIENT=new s("ambient",3,"FLOAT"),a.DIFFUSE=new s("diffuse",3,"FLOAT"),a.SPECULAR=new s("specular",3,"FLOAT"),a.SPECULAR_EXPONENT=new s("specularExponent",3,"FLOAT"),a.EMISSIVE=new s("emissive",3,"FLOAT"),a.TRANSMISSION_FILTER=new s("transmissionFilter",3,"FLOAT"),a.DISSOLVE=new s("dissolve",1,"FLOAT"),a.ILLUMINATION=new s("illumination",1,"UNSIGNED_SHORT"),a.REFRACTION_INDEX=new s("refractionIndex",1,"FLOAT"),a.SHARPNESS=new s("sharpness",1,"FLOAT"),a.MAP_DIFFUSE=new s("mapDiffuse",1,"SHORT"),a.MAP_AMBIENT=new s("mapAmbient",1,"SHORT"),a.MAP_SPECULAR=new s("mapSpecular",1,"SHORT"),a.MAP_SPECULAR_EXPONENT=new s("mapSpecularExponent",1,"SHORT"),a.MAP_DISSOLVE=new s("mapDissolve",1,"SHORT"),a.ANTI_ALIASING=new s("antiAliasing",1,"UNSIGNED_SHORT"),a.MAP_BUMP=new s("mapBump",1,"SHORT"),a.MAP_DISPLACEMENT=new s("mapDisplacement",1,"SHORT"),a.MAP_DECAL=new s("mapDecal",1,"SHORT"),a.MAP_EMISSIVE=new s("mapEmissive",1,"SHORT")},function(e,t,r){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),s=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),(r=r||{}).materials=r.materials||{},r.enableWTextureCoord=!!r.enableWTextureCoord,r.indicesPerMaterial=!!r.indicesPerMaterial;var a=this;a.vertices=[],a.vertexNormals=[],a.textures=[],a.indices=[],a.textureStride=r.enableWTextureCoord?3:2,this.name="";var n=[],s=[],o=[],l={},u=[],c={},h=-1,d=0;l.verts=[],l.norms=[],l.textures=[],l.hashindices={},l.indices=[[]],l.materialIndices=[],l.index=0;for(var p=/^v\s/,f=/^vn\s/,m=/^vt\s/,v=/^f\s/,g=/\s+/,y=/^usemtl/,b=t.split("\n"),M=0;M<b.length;M++){var x=b[M].trim();if(x&&!x.startsWith("#")){var A=x.split(g);if(A.shift(),p.test(x))n.push.apply(n,i(A));else if(f.test(x))s.push.apply(s,i(A));else if(m.test(x)){var w=A;A.length>2&&!r.enableWTextureCoord?w=A.slice(0,2):2===A.length&&r.enableWTextureCoord&&w.push(0),o.push.apply(o,i(w))}else if(y.test(x)){var I=A[0];I in c||(u.push(I),c[I]=u.length-1,r.indicesPerMaterial&&c[I]>0&&l.indices.push([])),h=c[I],r.indicesPerMaterial&&(d=h)}else if(v.test(x))for(var T=!1,E=0,_=A.length;E<_;E++){3!==E||T||(E=2,T=!0);var k=A[0]+","+h,L=A[E]+","+h;if(L in l.hashindices)l.indices[d].push(l.hashindices[L]);else{var R=A[E].split("/"),S=R.length-1;if(l.verts.push(+n[3*(R[0]-1)+0]),l.verts.push(+n[3*(R[0]-1)+1]),l.verts.push(+n[3*(R[0]-1)+2]),o.length){var F=r.enableWTextureCoord?3:2;l.textures.push(+o[(R[1]-1)*F+0]),l.textures.push(+o[(R[1]-1)*F+1]),r.enableWTextureCoord&&l.textures.push(+o[(R[1]-1)*F+2])}l.norms.push(+s[3*(R[S]-1)+0]),l.norms.push(+s[3*(R[S]-1)+1]),l.norms.push(+s[3*(R[S]-1)+2]),l.materialIndices.push(h),l.hashindices[L]=l.index,l.indices[d].push(l.hashindices[L]),l.index+=1}3===E&&T&&l.indices[d].push(l.hashindices[k])}}}a.vertices=l.verts,a.vertexNormals=l.norms,a.textures=l.textures,a.vertexMaterialIndices=l.materialIndices,a.indices=r.indicesPerMaterial?l.indices:l.indices[d],a.materialNames=u,a.materialIndices=c,a.materialsByIndex={},r.calcTangentsAndBitangents&&this.calculateTangentsAndBitangents()}return a(e,[{key:"calculateTangentsAndBitangents",value:function(){var e={};e.tangents=[].concat(i(new Array(this.vertices.length))).map(function(e){return 0}),e.bitangents=[].concat(i(new Array(this.vertices.length))).map(function(e){return 0});var t;t=Array.isArray(this.indices[0])?[].concat.apply([],this.indices):this.indices;for(var r=this.vertices,a=this.vertexNormals,n=this.textures,s=0;s<t.length;s+=3){var o=t[s+0],l=t[s+1],u=t[s+2],c=r[3*o+0],h=r[3*o+1],d=r[3*o+2],p=n[2*o+0],f=n[2*o+1],m=r[3*l+0],v=r[3*l+1],g=r[3*l+2],y=n[2*l+0],b=n[2*l+1],M=m-c,x=v-h,A=g-d,w=r[3*u+0]-c,I=r[3*u+1]-h,T=r[3*u+2]-d,E=y-p,_=b-f,k=n[2*u+0]-p,L=n[2*u+1]-f,R=E*L-_*k,S=1/(Math.abs(R<1e-4)?1:R),F=(M*L-w*_)*S,P=(x*L-I*_)*S,O=(A*L-T*_)*S,B=(w*E-M*k)*S,N=(I*E-x*k)*S,D=(T*E-A*k)*S,C=a[3*o+0],U=a[3*o+1],z=a[3*o+2],Y=a[3*l+0],X=a[3*l+1],j=a[3*l+2],V=a[3*u+0],q=a[3*u+1],H=a[3*u+2],W=F*C+P*U+O*z,G=F*Y+P*X+O*j,K=F*V+P*q+O*H,Q=F-C*W,Z=P-U*W,$=O-z*W,J=F-Y*G,ee=P-X*G,te=O-j*G,re=F-V*K,ie=P-q*K,ae=O-H*K,ne=Math.sqrt(Q*Q+Z*Z+$*$),se=Math.sqrt(J*J+ee*ee+te*te),oe=Math.sqrt(re*re+ie*ie+ae*ae),le=B*C+N*U+D*z,ue=B*Y+N*X+D*j,ce=B*V+N*q+D*H,he=B-C*le,de=N-U*le,pe=D-z*le,fe=B-Y*ue,me=N-X*ue,ve=D-j*ue,ge=B-V*ce,ye=N-q*ce,be=D-H*ce,Me=Math.sqrt(he*he+de*de+pe*pe),xe=Math.sqrt(fe*fe+me*me+ve*ve),Ae=Math.sqrt(ge*ge+ye*ye+be*be);e.tangents[3*o+0]+=Q/ne,e.tangents[3*o+1]+=Z/ne,e.tangents[3*o+2]+=$/ne,e.tangents[3*l+0]+=J/se,e.tangents[3*l+1]+=ee/se,e.tangents[3*l+2]+=te/se,e.tangents[3*u+0]+=re/oe,e.tangents[3*u+1]+=ie/oe,e.tangents[3*u+2]+=ae/oe,e.bitangents[3*o+0]+=he/Me,e.bitangents[3*o+1]+=de/Me,e.bitangents[3*o+2]+=pe/Me,e.bitangents[3*l+0]+=fe/xe,e.bitangents[3*l+1]+=me/xe,e.bitangents[3*l+2]+=ve/xe,e.bitangents[3*u+0]+=ge/Ae,e.bitangents[3*u+1]+=ye/Ae,e.bitangents[3*u+2]+=be/Ae}this.tangents=e.tangents,this.bitangents=e.bitangents}},{key:"makeBufferData",value:function(e){var t=this.vertices.length/3,r=new ArrayBuffer(e.stride*t);r.numItems=t;for(var i=new DataView(r),a=0,s=0;a<t;a++){s=a*e.stride;var o=!0,l=!1,u=void 0;try{for(var c,h=e.attributes[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value,p=s+e[d.key].offset;switch(d.key){case n.Layout.POSITION.key:i.setFloat32(p,this.vertices[3*a],!0),i.setFloat32(p+4,this.vertices[3*a+1],!0),i.setFloat32(p+8,this.vertices[3*a+2],!0);break;case n.Layout.UV.key:i.setFloat32(p,this.textures[2*a],!0),i.setFloat32(p+4,this.vertices[2*a+1],!0);break;case n.Layout.NORMAL.key:i.setFloat32(p,this.vertexNormals[3*a],!0),i.setFloat32(p+4,this.vertexNormals[3*a+1],!0),i.setFloat32(p+8,this.vertexNormals[3*a+2],!0);break;case n.Layout.MATERIAL_INDEX.key:i.setInt16(p,this.vertexMaterialIndices[a],!0);break;case n.Layout.AMBIENT.key:var f=this.vertexMaterialIndices[a],m=this.materialsByIndex[f];if(!m)break;i.setFloat32(p,m.ambient[0],!0),i.setFloat32(p+4,m.ambient[1],!0),i.setFloat32(p+8,m.ambient[2],!0);break;case n.Layout.DIFFUSE.key:var v=this.vertexMaterialIndices[a],g=this.materialsByIndex[v];if(!g)break;i.setFloat32(p,g.diffuse[0],!0),i.setFloat32(p+4,g.diffuse[1],!0),i.setFloat32(p+8,g.diffuse[2],!0);break;case n.Layout.SPECULAR.key:var y=this.vertexMaterialIndices[a],b=this.materialsByIndex[y];if(!b)break;i.setFloat32(p,b.specular[0],!0),i.setFloat32(p+4,b.specular[1],!0),i.setFloat32(p+8,b.specular[2],!0);break;case n.Layout.SPECULAR_EXPONENT.key:var M=this.vertexMaterialIndices[a],x=this.materialsByIndex[M];if(!x)break;i.setFloat32(p,x.specularExponent,!0);break;case n.Layout.EMISSIVE.key:var A=this.vertexMaterialIndices[a],w=this.materialsByIndex[A];if(!w)break;i.setFloat32(p,w.emissive[0],!0),i.setFloat32(p+4,w.emissive[1],!0),i.setFloat32(p+8,w.emissive[2],!0);break;case n.Layout.TRANSMISSION_FILTER.key:var I=this.vertexMaterialIndices[a],T=this.materialsByIndex[I];if(!T)break;i.setFloat32(p,T.transmissionFilter[0],!0),i.setFloat32(p+4,T.transmissionFilter[1],!0),i.setFloat32(p+8,T.transmissionFilter[2],!0);break;case n.Layout.DISSOLVE.key:var E=this.vertexMaterialIndices[a],_=this.materialsByIndex[E];if(!_)break;i.setFloat32(p,_.dissolve,!0);break;case n.Layout.ILLUMINATION.key:var k=this.vertexMaterialIndices[a],L=this.materialsByIndex[k];if(!L)break;i.setInt16(p,L.illumination,!0);break;case n.Layout.REFRACTION_INDEX.key:var R=this.vertexMaterialIndices[a],S=this.materialsByIndex[R];if(!S)break;i.setFloat32(p,S.refractionIndex,!0);break;case n.Layout.SHARPNESS.key:var F=this.vertexMaterialIndices[a],P=this.materialsByIndex[F];if(!P)break;i.setFloat32(p,P.sharpness,!0);break;case n.Layout.ANTI_ALIASING.key:var O=this.vertexMaterialIndices[a],B=this.materialsByIndex[O];if(!B)break;i.setInt16(p,B.antiAliasing,!0)}}}catch(e){l=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(l)throw u}}}return r}},{key:"makeIndexBufferData",value:function(){var e=new Uint16Array(this.indices);return e.numItems=this.indices.length,e}},{key:"addMaterialLibrary",value:function(e){for(var t in e.materials)if(t in this.materialIndices){var r=e.materials[t],i=this.materialIndices[r.name];this.materialsByIndex[i]=r}}}]),e}();t.default=s},function(e,t,r){"use strict";function i(e){return Array.isArray(e)?e:Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=t.Material=function e(t){a(this,e),this.name=t,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};t.MaterialLibrary=function(){function e(t){a(this,e),this.data=t,this.currentMaterial=null,this.materials={},this.parse()}return n(e,[{key:"parse_newmtl",value:function(e){var t=e[0];this.currentMaterial=new s(t),this.materials[t]=this.currentMaterial}},{key:"parseColor",value:function(e){if("spectral"!=e[0]&&"xyz"!=e[0]){if(3==e.length)return e.map(parseFloat);var t=parseFloat(e[0]);return[t,t,t]}}},{key:"parse_Ka",value:function(e){this.currentMaterial.ambient=this.parseColor(e)}},{key:"parse_Kd",value:function(e){this.currentMaterial.diffuse=this.parseColor(e)}},{key:"parse_Ks",value:function(e){this.currentMaterial.specular=this.parseColor(e)}},{key:"parse_Ke",value:function(e){this.currentMaterial.emissive=this.parseColor(e)}},{key:"parse_Tf",value:function(e){this.currentMaterial.transmissionFilter=this.parseColor(e)}},{key:"parse_d",value:function(e){this.currentMaterial.dissolve=parseFloat(e.pop())}},{key:"parse_illum",value:function(e){this.currentMaterial.illumination=parseInt(e[0])}},{key:"parse_Ni",value:function(e){this.currentMaterial.refractionIndex=parseFloat(e[0])}},{key:"parse_Ns",value:function(e){this.currentMaterial.specularExponent=parseInt(e[0])}},{key:"parse_sharpness",value:function(e){this.currentMaterial.sharpness=parseInt(e[0])}},{key:"parse_cc",value:function(e,t){t.colorCorrection="on"==e[0]}},{key:"parse_blendu",value:function(e,t){t.horizontalBlending="on"==e[0]}},{key:"parse_blendv",value:function(e,t){t.verticalBlending="on"==e[0]}},{key:"parse_boost",value:function(e,t){t.boostMipMapSharpness=parseFloat(e[0])}},{key:"parse_mm",value:function(e,t){t.modifyTextureMap.brightness=parseFloat(e[0]),t.modifyTextureMap.contrast=parseFloat(e[1])}},{key:"parse_ost",value:function(e,t,r){for(;e.length<3;)e.push(r);t.u=parseFloat(e[0]),t.v=parseFloat(e[1]),t.w=parseFloat(e[2])}},{key:"parse_o",value:function(e,t){this.parse_ost(e,t.offset,0)}},{key:"parse_s",value:function(e,t){this.parse_ost(e,t.scale,1)}},{key:"parse_t",value:function(e,t){this.parse_ost(e,t.turbulence,0)}},{key:"parse_texres",value:function(e,t){t.textureResolution=parseFloat(e[0])}},{key:"parse_clamp",value:function(e,t){t.clamp="on"==e[0]}},{key:"parse_bm",value:function(e,t){t.bumpMultiplier=parseFloat(e[0])}},{key:"parse_imfchan",value:function(e,t){t.imfChan=e[0]}},{key:"parse_type",value:function(e,t){t.reflectionType=e[0]}},{key:"parseOptions",value:function(e){var t={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},r=void 0,i=void 0,a={};for(e.reverse();e.length;){var n=e.pop();n.startsWith("-")?a[r=n.substr(1)]=[]:a[r].push(n)}for(r in a)if(a.hasOwnProperty(r)){i=a[r];var s=this["parse_"+r];s&&s.bind(this)(i,t)}return t}},{key:"parseMap",value:function(e){var t=void 0,r=void 0;if(e[0].startsWith("-"))t=e.pop(),r=e;else{var a=i(e);t=a[0],r=a.slice(1)}return(r=this.parseOptions(r)).filename=t,r}},{key:"parse_map_Ka",value:function(e){this.currentMaterial.mapAmbient=this.parseMap(e)}},{key:"parse_map_Kd",value:function(e){this.currentMaterial.mapDiffuse=this.parseMap(e)}},{key:"parse_map_Ks",value:function(e){this.currentMaterial.mapSpecular=this.parseMap(e)}},{key:"parse_map_Ke",value:function(e){this.currentMaterial.mapEmissive=this.parseMap(e)}},{key:"parse_map_Ns",value:function(e){this.currentMaterial.mapSpecularExponent=this.parseMap(e)}},{key:"parse_map_d",value:function(e){this.currentMaterial.mapDissolve=this.parseMap(e)}},{key:"parse_map_aat",value:function(e){this.currentMaterial.antiAliasing="on"==e[0]}},{key:"parse_map_bump",value:function(e){this.currentMaterial.mapBump=this.parseMap(e)}},{key:"parse_bump",value:function(e){this.parse_map_bump(e)}},{key:"parse_disp",value:function(e){this.currentMaterial.mapDisplacement=this.parseMap(e)}},{key:"parse_decal",value:function(e){this.currentMaterial.mapDecal=this.parseMap(e)}},{key:"parse_refl",value:function(e){this.currentMaterial.mapReflections.push(this.parseMap(e))}},{key:"parse",value:function(){var e=this.data.split(/\r?\n/),t=!0,r=!1,a=void 0;try{for(var n,s=e[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var o=n.value;if((o=o.trim())&&!o.startsWith("#")){var l,u=o.split(/\s/),c=i(u);l=c[0],u=c.slice(1);var h=this["parse_"+l];h&&h.bind(this)(u)}}}catch(e){r=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw a}}delete this.data,this.currentMaterial=null}}]),e}()},function(e,t,r){e.exports=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.deleteMeshBuffers=t.initMeshBuffers=t.downloadMeshes=t.downloadModels=t.Layout=t.MaterialLibrary=t.Material=t.Mesh=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),a=r(2),n=r(0),s=r(5);t.Mesh=i.default,t.Material=a.Material,t.MaterialLibrary=a.MaterialLibrary,t.Layout=n.Layout,t.downloadModels=s.downloadModels,t.downloadMeshes=s.downloadMeshes,t.initMeshBuffers=s.initMeshBuffers,t.deleteMeshBuffers=s.deleteMeshBuffers,t.version="1.1.3"},function(e,t,r){"use strict";function i(e,t){var r=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];t.endsWith("/")||(t+="/");var i=[];for(var a in e.materials)if(e.materials.hasOwnProperty(a)){a=e.materials[a];var n=!0,s=!1,o=void 0;try{for(var l,u=r[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;!function(e){var r=a[c];if(!r)return"continue";var n=t+r.filename;i.push(fetch(n).then(function(e){if(!e.ok)throw new Error;return e.blob()}).then(function(e){var t=new Image;return t.src=URL.createObjectURL(e),r.texture=t,new Promise(function(e){return t.onload=e})}).catch(function(){}))}()}}catch(e){s=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(s)throw o}}}return Promise.all(i)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.downloadModels=function(e){var t=[],r=!0,o=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){!function(e){var r=[];if(!e.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var a={};a.indicesPerMaterial=!!e.indicesPerMaterial,a.calcTangentsAndBitangents=!!e.calcTangentsAndBitangents;var o=e.name;if(!o){var l=e.obj.split("/");o=l[l.length-1].replace(".obj","")}if(r.push(Promise.resolve(o)),r.push(fetch(e.obj).then(function(e){return e.text()}).then(function(e){return new n.default(e,a)})),e.mtl){var u=e.mtl;"boolean"==typeof u&&(u=e.obj.replace(/\.obj$/,".mtl")),r.push(fetch(u).then(function(e){return e.text()}).then(function(t){var r=new s.MaterialLibrary(t);if(!1!==e.downloadMtlTextures){var a=e.mtlTextureRoot;return a||(a=u.substr(0,u.lastIndexOf("/"))),Promise.all([Promise.resolve(r),i(r,a)])}return Promise.all(Promise.resolve(r))}).then(function(e){return e[0]}))}t.push(Promise.all(r))}(u.value)}}catch(e){o=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw l}}return Promise.all(t).then(function(e){var t={},r=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value,u=a(l,3),c=u[0],h=u[1],d=u[2];h.name=c,d&&h.addMaterialLibrary(d),t[c]=h}}catch(e){i=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw n}}return t})},t.downloadMeshes=function(e,t,r){void 0===r&&(r={});var i=[];for(var s in e)!function(t){if(!e.hasOwnProperty(t))return"continue";var r=e[t];i.push(fetch(r).then(function(e){return e.text()}).then(function(e){return[t,new n.default(e)]}))}(s);Promise.all(i).then(function(e){var i=!0,n=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value,c=a(u,2),h=c[0],d=c[1];r[h]=d}}catch(e){n=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw s}}return t(r)})},t.initMeshBuffers=function(e,t){t.normalBuffer=o(e,e.ARRAY_BUFFER,t.vertexNormals,3),t.textureBuffer=o(e,e.ARRAY_BUFFER,t.textures,t.textureStride),t.vertexBuffer=o(e,e.ARRAY_BUFFER,t.vertices,3),t.indexBuffer=o(e,e.ELEMENT_ARRAY_BUFFER,t.indices,1)},t.deleteMeshBuffers=function(e,t){e.deleteBuffer(t.normalBuffer),e.deleteBuffer(t.textureBuffer),e.deleteBuffer(t.vertexBuffer),e.deleteBuffer(t.indexBuffer)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),s=r(2),o=(r(0),function(e,t,r,i){var a=e.createBuffer(),n=t===e.ARRAY_BUFFER?Float32Array:Uint16Array;return e.bindBuffer(t,a),e.bufferData(t,new n(r),e.STATIC_DRAW),a.itemSize=i,a.numItems=r.length/i,a})}])},function(e,t,r){"use strict";r.r(t);var i={};r.r(i),r.d(i,"mobilecheck",function(){return n}),r.d(i,"loadImage",function(){return s}),r.d(i,"loadBinary",function(){return o});var a=r(2);function n(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}function s(e,t){return new Promise((r,i)=>{let a=new XMLHttpRequest,n=!1;a.open("GET",e,!0),a.responseType="arraybuffer",a.onprogress=function(e){e.lengthComputable?t(Math.round(e.loaded/e.total*100)):n||(n=!0,t(-1))},a.onloadend=function(){if(a.status.toString().match(/^2/)){n||t(100);let e={},i=a.getAllResponseHeaders().match(/^Content-Type\:\s*(.*?)$/im);i&&i[1]&&(e.type=i[1]);let s=new Blob([this.response],e),o=window.URL.createObjectURL(s),l=new Image;l.src=o,l.onload=(()=>r(l))}else i(a)},a.send()})}function o(e,t){return new Promise((r,i)=>{let a=new XMLHttpRequest,n=!1;a.open("GET",e,!0),a.responseType="arraybuffer",a.onprogress=function(e){e.lengthComputable?t(Math.round(e.loaded/e.total*100)):n||(n=!0,t(-1))},a.onloadend=function(){a.status.toString().match(/^2/)?(n||t(100),r(this.response)):i(a)},a.send()})}var l=r(1);class u{constructor(e,t,r){let i=c(e,e.VERTEX_SHADER,t),a=c(e,e.FRAGMENT_SHADER,r),n=e.createProgram();if(e.attachShader(n,i),e.attachShader(n,a),e.linkProgram(n),e.deleteShader(i),e.deleteShader(a),!e.getProgramParameter(n,e.LINK_STATUS))return console.error("Unable to initialize the shader program: "+e.getProgramInfoLog(n)),null;this.gl=e,this.program=n}use(){this.gl.useProgram(this.program)}setBool(e,t){this.gl.uniform1i(this.gl.getUniformLocation(this.program,e),Number(t))}setInt(e,t){this.gl.uniform1i(this.gl.getUniformLocation(this.program,e),Math.round(Number(t)))}setFloat(e,t){this.gl.uniform1f(this.gl.getUniformLocation(this.program,e),Number(t))}setVec2(e,t){this.gl.uniform2fv(this.gl.getUniformLocation(this.program,e),t)}setVec3(e,t){this.gl.uniform3fv(this.gl.getUniformLocation(this.program,e),t)}setVec4(e,t){this.gl.uniform4fv(this.gl.getUniformLocation(this.program,e),t)}setMat2(e,t){this.gl.uniformMatrix2fv(this.gl.getUniformLocation(this.program,e),!1,t)}setMat3(e,t){this.gl.uniformMatrix3fv(this.gl.getUniformLocation(this.program,e),!1,t)}setMat4(e,t){this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,e),!1,t)}}function c(e,t,r){const i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.error("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)}const h={desktopInput:!0,touchInput:!0};class d{constructor(e,t){this.options=t?Object.assign(h,t):h,this.canvas=e,this.loadProgress=0,this.resource={images:[]},this.resourceCount=0,this._loadProgresses=[];let r=this;if(this.loadProgresses=new Proxy(this._loadProgresses,{set:function(e,t,i,a){let n=r._loadProgresses.reduce((e,t)=>e+Number(t),0);if(0!==r.resourceCount&&r.loadProgress!==n/r.resourceCount){r.loadProgress=n/r.resourceCount;let e=new CustomEvent("progress",{detail:r.loadProgress});r.canvas.dispatchEvent(e)}return Reflect.set(e,t,i,a)}}),this.gl=this.canvas.getContext("webgl2"),!this.gl)return console.error("Unable to initialize WebGL2. Your browser or machine may not support it."),null;if(this.deltaTime=0,this.lastFrame=0,n()?this.mobile=!0:this.mobile=!1,this.options.desktopInput){let e={lockPointer:!0};"boolean"!=typeof this.options.desktopInput&&(e=this.options.desktopInput);let{currentlyPressedKeys:t,mouseInput:r}=d.desktopInput(this.canvas,e);this.currentlyPressedKeys=t,this.mouseInput=r}this.options.touchInput&&(this.touchInput=d.touchInput(this.canvas))}resize(){let e=this.canvas.clientWidth,t=this.canvas.clientHeight;this.canvas.width==e&&this.canvas.height==t||(this.canvas.width=e,this.canvas.height=t),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}draw(e){}started(){}render(e){this.deltaTime=e-this.lastFrame,this.lastFrame=e,this.resize(),this.draw(e),this.options.touchInput&&(this.touchInput.pan.deltaX=0,this.touchInput.pan.deltaY=0,this.touchInput.pitch.scale=0),this.options.desktopInput&&(this.mouseInput.deltaX=0,this.mouseInput.deltaY=0,this.mouseInput.drag&&(this.mouseInput.dragX=0,this.mouseInput.dragY=0),this.mouseInput.wheelDeltaY=0),requestAnimationFrame(this.render.bind(this))}loadMesh(e){let t=new a.Mesh(e);return Object(a.initMeshBuffers)(this.gl,t),t}setMeshVAO(e,t){let r=this.gl.getAttribLocation(t.program,"a_position"),i=this.gl.getAttribLocation(t.program,"a_texCoord"),a=this.gl.getAttribLocation(t.program,"a_normal"),n=this.gl.createVertexArray();return this.gl.bindVertexArray(n),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.vertexBuffer),this.gl.vertexAttribPointer(r,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(r),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.textureBuffer),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(i),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e.normalBuffer),this.gl.vertexAttribPointer(a,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a),this.gl.bindVertexArray(null),n}drawMesh(e,t){this.gl.bindVertexArray(t),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e.indexBuffer),this.gl.drawElements(this.gl.TRIANGLES,e.indexBuffer.numItems,this.gl.UNSIGNED_SHORT,0),this.gl.bindVertexArray(null)}async start(){let e=await this.loadTexture();this.render(this.lastFrame),this.textures=e,this.started()}setImageResource(e){this.resource.images=e}async loadTexture(){let e=[];this.resourceCount+=this.resource.images.length;let t=this.resource.images.map((e,t)=>d.loadImage(e,e=>{this.loadProgresses[t]=e})),r=await Promise.all(t);return this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),r.forEach((t,r)=>{e[r]=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0+r),this.gl.bindTexture(this.gl.TEXTURE_2D,e[r]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)}),e}}var p;d.loadImage=s,(p=d).desktopInput=function(e,t){let r=new Map,i={deltaX:0,deltaY:0,wheelDeltaY:0};function a(e){r.set(e.key,!0)}function n(e){r.set(e.key,!1)}function s(e){i.deltaX=e.movementX||0,i.deltaY=e.movementY||0,i.drag&&(i.dragX=e.movementX||0,i.dragY=e.movementY||0)}function o(e){i.wheelDeltaY=e.wheelDeltaY}function l(){i.drag=!0,i.dragX=0,i.dragY=0}function u(){i.drag=!1}function c(){document.addEventListener("keydown",a),document.addEventListener("keyup",n),document.addEventListener("mousemove",s),document.addEventListener("mousedown",l),document.addEventListener("mouseup",u),document.addEventListener("wheel",o)}function h(){document.removeEventListener("keydown",a),document.removeEventListener("keyup",n),document.removeEventListener("mousemove",s),document.removeEventListener("mousedown",l),document.removeEventListener("mouseup",u),document.removeEventListener("wheel",o)}if(t.lockPointer){function d(){document.pointerLockElement===e||document.mozPointerLockElement===e?c():h()}e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.exitPointerLock=e.exitPointerLock||e.mozExitPointerLock,e.onclick=function(){e.requestPointerLock()},document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1)}else e.contentEditable="true",e.style.cursor="default",e.addEventListener("focus",c),e.addEventListener("blur",h);return{currentlyPressedKeys:r,mouseInput:i}},p.touchInput=function(e){let t={lastX:0,lastY:0,deltaX:0,deltaY:0},r={scale:0,lastScale:1},i=new l.Manager(e);return i.add(new l.Pan({direction:l.DIRECTION_ALL,threshold:10})),i.add(new l.Pinch({threshold:0})),i.on("panstart",function(e){t.lastX=0,t.lastY=0,t.deltaX=e.deltaX,t.deltaY=e.deltaY}),i.on("panmove",function(e){t.deltaX=e.deltaX-t.lastX,t.deltaY=e.deltaY-t.lastY,t.lastX=e.deltaX,t.lastY=e.deltaY}),i.on("pinchstart",function(){r.scale=0,r.lastScale=1}),i.on("pinchmove",function(e){r.scale=e.scale/r.lastScale-1,r.lastScale=e.scale}),{pan:t,pitch:r}},function(e){const t=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0],r="#version 300 es\n\n  layout (location = 0) in vec3 a_position;\n  layout (location = 1) in vec2 a_texCoord;\n\n  out vec2 TexCoord;\n\n  void main()\n  {\n      TexCoord = a_texCoord;\n      gl_Position = vec4(a_position, 1.0);\n  }\n  ";e.prototype.drawQuad=function(e){if(void 0===this.quadVAO){this.quadVAO=this.gl.createVertexArray();let e=this.gl.createBuffer();this.gl.bindVertexArray(this.quadVAO),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.const_DRAW),this.gl.enableVertexAttribArray(0),this.gl.vertexAttribPointer(0,3,this.gl.FLOAT,!0,20,0),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(1,2,this.gl.FLOAT,!0,20,12),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null)}if(this.gl.bindVertexArray(this.quadVAO),1===e.length)this.gl.bindTexture(this.gl.TEXTURE_2D,e[0]);else for(let t in e)this.gl.activeTexture(this.gl.TEXTURE0+Number(t)),this.gl.bindTexture(this.gl.TEXTURE_2D,e[t]);this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(null)},e.prototype.drawFB=function(e){void 0===this.fbShader&&(this.fbShader=new u(this.gl,r,"#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D scene;\n\n  void main()\n  {\n    FragColor = texture(scene, TexCoord);\n  }\n  ")),this.fbShader.use(),this.fbShader.setInt("scene",0),this.drawQuad([e])},e.prototype.drawDepth=function(e){void 0===this.fbShader&&(this.fbShader=new u(this.gl,r,"#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D depthMap;\n\n  void main()\n  {\n    float depthValue = texture(depthMap, TexCoord).r;\n    FragColor = vec4(vec3(depthValue), 1.0);\n  }\n  ")),this.fbShader.use(),this.fbShader.setInt("depthMap",0),this.drawQuad([e])}}(d);var f=d,m=r(0),v=class{constructor(e=[0,0,0],t=[0,0,0,1],r=45){this.position=e,this.orientation=t,this.zoom=r,this.update()}getViewMatrix(){this.update();let e=m.mat4.create(),t=[0,0,0];return m.vec3.add(t,this.position,this.front),m.mat4.lookAt(e,this.position,t,this.up),e}translate(e){m.vec3.add(this.position,this.position,e)}rotate(e,t){let r=m.quat.create();m.quat.setAxisAngle(r,t,e),m.quat.mul(this.orientation,this.orientation,r),this.update()}yaw(e){this.rotate(e,this.up)}pitch(e){this.rotate(e,this.right)}roll(e){this.rotate(e,this.front)}update(){let e=m.mat4.create();m.mat4.fromQuat(e,this.orientation),this.right=[-e[0],-e[4],-e[8]],this.up=[e[1],e[5],e[9]],this.front=[e[2],e[6],e[10]]}processZoom(e){this.zoom>=1&&this.zoom<=45&&(this.zoom-=e/200),this.zoom<=1&&(this.zoom=1),this.zoom>=45&&(this.zoom=45)}};function g(e,t,r){let i=m.vec3.create(),a=m.vec3.create(),n=m.vec3.create();return m.vec3.normalize(t,t),m.vec3.scale(a,e,Math.cos(r)),m.vec3.cross(n,t,e),m.vec3.scale(n,n,Math.sin(r)),m.vec3.add(i,a,n),m.vec3.normalize(i,i),i}class y extends v{processMove(e,t){let r=m.vec3.create();e==y.Movement.FORWARD&&(m.vec3.scale(r,this.front,t),this.translate(r)),e==y.Movement.BACKWARD&&(m.vec3.scale(r,this.front,-t),this.translate(r)),e==y.Movement.LEFT&&(m.vec3.scale(r,this.right,-t),this.translate(r)),e==y.Movement.RIGHT&&(m.vec3.scale(r,this.right,t),this.translate(r)),e==y.Movement.UP&&(m.vec3.scale(r,this.up,t),this.translate(r)),e==y.Movement.DOWN&&(m.vec3.scale(r,this.up,-t),this.translate(r))}desktopFreeMoveControl(e,t,r,i,a=["w","s","a","d"," ","Shift","q","e"]){e.get(a[0])&&this.processMove(y.Movement.FORWARD,t),e.get(a[1])&&this.processMove(y.Movement.BACKWARD,t),e.get(a[2])&&this.processMove(y.Movement.LEFT,t),e.get(a[3])&&this.processMove(y.Movement.RIGHT,t),e.get(a[4])&&this.processMove(y.Movement.UP,t),e.get(a[5])&&this.processMove(y.Movement.DOWN,t);let n=e=>e/180*Math.PI;e.get(a[6])&&this.roll(n(5*-t)),e.get(a[7])&&this.roll(n(5*t));let s=n(r.deltaX*i),o=n(r.deltaY*i);this.pitch(o),this.rotate(s,[0,1,0]),this.processZoom(r.wheelDeltaY)}}y.Movement={FORWARD:0,BACKWARD:1,LEFT:2,RIGHT:3,UP:4,DOWN:5};var b=y;r.d(t,"ArGL",function(){return f}),r.d(t,"Camera",function(){return v}),r.d(t,"Shader",function(){return u}),r.d(t,"OrbitCamera",function(){return class extends v{constructor(e=[0,0,5],t=[0,0,0],r=45){let i=m.vec3.create();m.vec3.sub(i,t,e),m.vec3.normalize(i,i);let a=[i[0],0,i[2]],n=[0,i[1],Math.sqrt(1-i[1]**2)],s=0===m.vec3.length(a)?0:m.vec3.angle([0,0,1],a);s=i[0]>0?-s:s;let o=0===m.vec3.length(n)?0:m.vec3.angle([0,0,1],n);o=i[1]>0?-o:o,super(e,m.quat.create(),r),this.yaw(s),this.pitch(o),this.center=t,this.distance=m.vec3.distance(t,e)}processRotate(e,t){let r=m.vec3.create();m.vec3.scale(r,this.front,-1),r=g(r,[0,1,0],-e);let i=m.vec3.create();m.vec3.cross(i,this.up,r),r=g(r,i,-t),m.vec3.scale(r,r,this.distance),this.position=r,this.rotate(e,[0,1,0]),this.pitch(t)}desktopOrbitControl(e){if(e.mouseInput.drag){let t=e.mouseInput.dragX/e.canvas.clientWidth*Math.PI*2,r=e.mouseInput.dragY/e.canvas.clientHeight*Math.PI*2;this.processRotate(t,r)}this.processZoom(e.mouseInput.wheelDeltaY)}mobileOrbitControl(e){let t=e.touchInput.pan.deltaX/e.canvas.clientWidth*Math.PI*2,r=e.touchInput.pan.deltaY/e.canvas.clientHeight*Math.PI*2;this.processRotate(t,r),this.processZoom(1e4*e.touchInput.pitch.scale)}}}),r.d(t,"FreeMoveCamera",function(){return b}),r.d(t,"util",function(){return i}),t.default=f}])});