!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var r in e)("object"==typeof exports?exports:t)[r]=e[r]}}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n,e){"use strict";function r(t,n,e){const r=t.createShader(n);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=class{constructor(t,n,e){let i=r(t,t.VERTEX_SHADER,n),a=r(t,t.FRAGMENT_SHADER,e),u=t.createProgram();if(t.attachShader(u,i),t.attachShader(u,a),t.linkProgram(u),t.deleteShader(i),t.deleteShader(a),!t.getProgramParameter(u,t.LINK_STATUS))return console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(u)),null;this.gl=t,this.program=u}use(){this.gl.useProgram(this.program)}setBool(t,n){this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),Number(n))}setInt(t,n){this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),Math.round(Number(n)))}setFloat(t,n){this.gl.uniform1f(this.gl.getUniformLocation(this.program,t),Number(n))}setVec3(t,n){this.gl.uniform3fv(this.gl.getUniformLocation(this.program,t),n)}setVec4(t,n){this.gl.uniform4fv(this.gl.getUniformLocation(this.program,t),n)}setMat3(t,n){this.gl.uniformMatrix3fv(this.gl.getUniformLocation(this.program,t),!1,n)}setMat4(t,n){this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,t),!1,n)}}},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"EPSILON",function(){return d}),e.d(r,"ARRAY_TYPE",function(){return M}),e.d(r,"RANDOM",function(){return m}),e.d(r,"setMatrixArrayType",function(){return p}),e.d(r,"toRadian",function(){return b}),e.d(r,"equals",function(){return g});var i={};e.r(i),e.d(i,"create",function(){return y}),e.d(i,"clone",function(){return x}),e.d(i,"copy",function(){return w}),e.d(i,"identity",function(){return A}),e.d(i,"fromValues",function(){return T}),e.d(i,"set",function(){return E}),e.d(i,"transpose",function(){return I}),e.d(i,"invert",function(){return _}),e.d(i,"adjoint",function(){return k}),e.d(i,"determinant",function(){return R}),e.d(i,"multiply",function(){return S}),e.d(i,"rotate",function(){return L}),e.d(i,"scale",function(){return P}),e.d(i,"fromRotation",function(){return F}),e.d(i,"fromScaling",function(){return O}),e.d(i,"str",function(){return B}),e.d(i,"frob",function(){return q}),e.d(i,"LDU",function(){return D}),e.d(i,"add",function(){return N}),e.d(i,"subtract",function(){return U}),e.d(i,"exactEquals",function(){return C}),e.d(i,"equals",function(){return V}),e.d(i,"multiplyScalar",function(){return z}),e.d(i,"multiplyScalarAndAdd",function(){return j}),e.d(i,"mul",function(){return Y}),e.d(i,"sub",function(){return X});var a={};e.r(a),e.d(a,"create",function(){return W}),e.d(a,"clone",function(){return H}),e.d(a,"copy",function(){return G}),e.d(a,"identity",function(){return K}),e.d(a,"fromValues",function(){return Q}),e.d(a,"set",function(){return Z}),e.d(a,"invert",function(){return $}),e.d(a,"determinant",function(){return J}),e.d(a,"multiply",function(){return tt}),e.d(a,"rotate",function(){return nt}),e.d(a,"scale",function(){return et}),e.d(a,"translate",function(){return rt}),e.d(a,"fromRotation",function(){return it}),e.d(a,"fromScaling",function(){return at}),e.d(a,"fromTranslation",function(){return ut}),e.d(a,"str",function(){return ot}),e.d(a,"frob",function(){return st}),e.d(a,"add",function(){return ct}),e.d(a,"subtract",function(){return lt}),e.d(a,"multiplyScalar",function(){return ft}),e.d(a,"multiplyScalarAndAdd",function(){return ht}),e.d(a,"exactEquals",function(){return dt}),e.d(a,"equals",function(){return Mt}),e.d(a,"mul",function(){return mt}),e.d(a,"sub",function(){return pt});var u={};e.r(u),e.d(u,"create",function(){return vt}),e.d(u,"fromMat4",function(){return bt}),e.d(u,"clone",function(){return gt}),e.d(u,"copy",function(){return yt}),e.d(u,"fromValues",function(){return xt}),e.d(u,"set",function(){return wt}),e.d(u,"identity",function(){return At}),e.d(u,"transpose",function(){return Tt}),e.d(u,"invert",function(){return Et}),e.d(u,"adjoint",function(){return It}),e.d(u,"determinant",function(){return _t}),e.d(u,"multiply",function(){return kt}),e.d(u,"translate",function(){return Rt}),e.d(u,"rotate",function(){return St}),e.d(u,"scale",function(){return Lt}),e.d(u,"fromTranslation",function(){return Pt}),e.d(u,"fromRotation",function(){return Ft}),e.d(u,"fromScaling",function(){return Ot}),e.d(u,"fromMat2d",function(){return Bt}),e.d(u,"fromQuat",function(){return qt}),e.d(u,"normalFromMat4",function(){return Dt}),e.d(u,"projection",function(){return Nt}),e.d(u,"str",function(){return Ut}),e.d(u,"frob",function(){return Ct}),e.d(u,"add",function(){return Vt}),e.d(u,"subtract",function(){return zt}),e.d(u,"multiplyScalar",function(){return jt}),e.d(u,"multiplyScalarAndAdd",function(){return Yt}),e.d(u,"exactEquals",function(){return Xt}),e.d(u,"equals",function(){return Wt}),e.d(u,"mul",function(){return Ht}),e.d(u,"sub",function(){return Gt});var o={};e.r(o),e.d(o,"create",function(){return Kt}),e.d(o,"clone",function(){return Qt}),e.d(o,"copy",function(){return Zt}),e.d(o,"fromValues",function(){return $t}),e.d(o,"set",function(){return Jt}),e.d(o,"identity",function(){return tn}),e.d(o,"transpose",function(){return nn}),e.d(o,"invert",function(){return en}),e.d(o,"adjoint",function(){return rn}),e.d(o,"determinant",function(){return an}),e.d(o,"multiply",function(){return un}),e.d(o,"translate",function(){return on}),e.d(o,"scale",function(){return sn}),e.d(o,"rotate",function(){return cn}),e.d(o,"rotateX",function(){return ln}),e.d(o,"rotateY",function(){return fn}),e.d(o,"rotateZ",function(){return hn}),e.d(o,"fromTranslation",function(){return dn}),e.d(o,"fromScaling",function(){return Mn}),e.d(o,"fromRotation",function(){return mn}),e.d(o,"fromXRotation",function(){return pn}),e.d(o,"fromYRotation",function(){return vn}),e.d(o,"fromZRotation",function(){return bn}),e.d(o,"fromRotationTranslation",function(){return gn}),e.d(o,"fromQuat2",function(){return yn}),e.d(o,"getTranslation",function(){return xn}),e.d(o,"getScaling",function(){return wn}),e.d(o,"getRotation",function(){return An}),e.d(o,"fromRotationTranslationScale",function(){return Tn}),e.d(o,"fromRotationTranslationScaleOrigin",function(){return En}),e.d(o,"fromQuat",function(){return In}),e.d(o,"frustum",function(){return _n}),e.d(o,"perspective",function(){return kn}),e.d(o,"perspectiveFromFieldOfView",function(){return Rn}),e.d(o,"ortho",function(){return Sn}),e.d(o,"lookAt",function(){return Ln}),e.d(o,"targetTo",function(){return Pn}),e.d(o,"str",function(){return Fn}),e.d(o,"frob",function(){return On}),e.d(o,"add",function(){return Bn}),e.d(o,"subtract",function(){return qn}),e.d(o,"multiplyScalar",function(){return Dn}),e.d(o,"multiplyScalarAndAdd",function(){return Nn}),e.d(o,"exactEquals",function(){return Un}),e.d(o,"equals",function(){return Cn}),e.d(o,"mul",function(){return Vn}),e.d(o,"sub",function(){return zn});var s={};e.r(s),e.d(s,"create",function(){return jn}),e.d(s,"clone",function(){return Yn}),e.d(s,"length",function(){return Xn}),e.d(s,"fromValues",function(){return Wn}),e.d(s,"copy",function(){return Hn}),e.d(s,"set",function(){return Gn}),e.d(s,"add",function(){return Kn}),e.d(s,"subtract",function(){return Qn}),e.d(s,"multiply",function(){return Zn}),e.d(s,"divide",function(){return $n}),e.d(s,"ceil",function(){return Jn}),e.d(s,"floor",function(){return te}),e.d(s,"min",function(){return ne}),e.d(s,"max",function(){return ee}),e.d(s,"round",function(){return re}),e.d(s,"scale",function(){return ie}),e.d(s,"scaleAndAdd",function(){return ae}),e.d(s,"distance",function(){return ue}),e.d(s,"squaredDistance",function(){return oe}),e.d(s,"squaredLength",function(){return se}),e.d(s,"negate",function(){return ce}),e.d(s,"inverse",function(){return le}),e.d(s,"normalize",function(){return fe}),e.d(s,"dot",function(){return he}),e.d(s,"cross",function(){return de}),e.d(s,"lerp",function(){return Me}),e.d(s,"hermite",function(){return me}),e.d(s,"bezier",function(){return pe}),e.d(s,"random",function(){return ve}),e.d(s,"transformMat4",function(){return be}),e.d(s,"transformMat3",function(){return ge}),e.d(s,"transformQuat",function(){return ye}),e.d(s,"rotateX",function(){return xe}),e.d(s,"rotateY",function(){return we}),e.d(s,"rotateZ",function(){return Ae}),e.d(s,"angle",function(){return Te}),e.d(s,"str",function(){return Ee}),e.d(s,"exactEquals",function(){return Ie}),e.d(s,"equals",function(){return _e}),e.d(s,"sub",function(){return ke}),e.d(s,"mul",function(){return Re}),e.d(s,"div",function(){return Se}),e.d(s,"dist",function(){return Le}),e.d(s,"sqrDist",function(){return Pe}),e.d(s,"len",function(){return Fe}),e.d(s,"sqrLen",function(){return Oe}),e.d(s,"forEach",function(){return Be});var c={};e.r(c),e.d(c,"create",function(){return qe}),e.d(c,"clone",function(){return De}),e.d(c,"fromValues",function(){return Ne}),e.d(c,"copy",function(){return Ue}),e.d(c,"set",function(){return Ce}),e.d(c,"add",function(){return Ve}),e.d(c,"subtract",function(){return ze}),e.d(c,"multiply",function(){return je}),e.d(c,"divide",function(){return Ye}),e.d(c,"ceil",function(){return Xe}),e.d(c,"floor",function(){return We}),e.d(c,"min",function(){return He}),e.d(c,"max",function(){return Ge}),e.d(c,"round",function(){return Ke}),e.d(c,"scale",function(){return Qe}),e.d(c,"scaleAndAdd",function(){return Ze}),e.d(c,"distance",function(){return $e}),e.d(c,"squaredDistance",function(){return Je}),e.d(c,"length",function(){return tr}),e.d(c,"squaredLength",function(){return nr}),e.d(c,"negate",function(){return er}),e.d(c,"inverse",function(){return rr}),e.d(c,"normalize",function(){return ir}),e.d(c,"dot",function(){return ar}),e.d(c,"lerp",function(){return ur}),e.d(c,"random",function(){return or}),e.d(c,"transformMat4",function(){return sr}),e.d(c,"transformQuat",function(){return cr}),e.d(c,"str",function(){return lr}),e.d(c,"exactEquals",function(){return fr}),e.d(c,"equals",function(){return hr}),e.d(c,"sub",function(){return dr}),e.d(c,"mul",function(){return Mr}),e.d(c,"div",function(){return mr}),e.d(c,"dist",function(){return pr}),e.d(c,"sqrDist",function(){return vr}),e.d(c,"len",function(){return br}),e.d(c,"sqrLen",function(){return gr}),e.d(c,"forEach",function(){return yr});var l={};e.r(l),e.d(l,"create",function(){return xr}),e.d(l,"identity",function(){return wr}),e.d(l,"setAxisAngle",function(){return Ar}),e.d(l,"getAxisAngle",function(){return Tr}),e.d(l,"multiply",function(){return Er}),e.d(l,"rotateX",function(){return Ir}),e.d(l,"rotateY",function(){return _r}),e.d(l,"rotateZ",function(){return kr}),e.d(l,"calculateW",function(){return Rr}),e.d(l,"slerp",function(){return Sr}),e.d(l,"invert",function(){return Lr}),e.d(l,"conjugate",function(){return Pr}),e.d(l,"fromMat3",function(){return Fr}),e.d(l,"fromEuler",function(){return Or}),e.d(l,"str",function(){return Br}),e.d(l,"clone",function(){return qr}),e.d(l,"fromValues",function(){return Dr}),e.d(l,"copy",function(){return Nr}),e.d(l,"set",function(){return Ur}),e.d(l,"add",function(){return Cr}),e.d(l,"mul",function(){return Vr}),e.d(l,"scale",function(){return zr}),e.d(l,"dot",function(){return jr}),e.d(l,"lerp",function(){return Yr}),e.d(l,"length",function(){return Xr}),e.d(l,"len",function(){return Wr}),e.d(l,"squaredLength",function(){return Hr}),e.d(l,"sqrLen",function(){return Gr}),e.d(l,"normalize",function(){return Kr}),e.d(l,"exactEquals",function(){return Qr}),e.d(l,"equals",function(){return Zr}),e.d(l,"rotationTo",function(){return $r}),e.d(l,"sqlerp",function(){return Jr}),e.d(l,"setAxes",function(){return ti});var f={};e.r(f),e.d(f,"create",function(){return ni}),e.d(f,"clone",function(){return ei}),e.d(f,"fromValues",function(){return ri}),e.d(f,"fromRotationTranslationValues",function(){return ii}),e.d(f,"fromRotationTranslation",function(){return ai}),e.d(f,"fromTranslation",function(){return ui}),e.d(f,"fromRotation",function(){return oi}),e.d(f,"fromMat4",function(){return si}),e.d(f,"copy",function(){return ci}),e.d(f,"identity",function(){return li}),e.d(f,"set",function(){return fi}),e.d(f,"getReal",function(){return hi}),e.d(f,"getDual",function(){return di}),e.d(f,"setReal",function(){return Mi}),e.d(f,"setDual",function(){return mi}),e.d(f,"getTranslation",function(){return pi}),e.d(f,"translate",function(){return vi}),e.d(f,"rotateX",function(){return bi}),e.d(f,"rotateY",function(){return gi}),e.d(f,"rotateZ",function(){return yi}),e.d(f,"rotateByQuatAppend",function(){return xi}),e.d(f,"rotateByQuatPrepend",function(){return wi}),e.d(f,"rotateAroundAxis",function(){return Ai}),e.d(f,"add",function(){return Ti}),e.d(f,"multiply",function(){return Ei}),e.d(f,"mul",function(){return Ii}),e.d(f,"scale",function(){return _i}),e.d(f,"dot",function(){return ki}),e.d(f,"lerp",function(){return Ri}),e.d(f,"invert",function(){return Si}),e.d(f,"conjugate",function(){return Li}),e.d(f,"length",function(){return Pi}),e.d(f,"len",function(){return Fi}),e.d(f,"squaredLength",function(){return Oi}),e.d(f,"sqrLen",function(){return Bi}),e.d(f,"normalize",function(){return qi}),e.d(f,"str",function(){return Di}),e.d(f,"exactEquals",function(){return Ni}),e.d(f,"equals",function(){return Ui});var h={};e.r(h),e.d(h,"create",function(){return Ci}),e.d(h,"clone",function(){return Vi}),e.d(h,"fromValues",function(){return zi}),e.d(h,"copy",function(){return ji}),e.d(h,"set",function(){return Yi}),e.d(h,"add",function(){return Xi}),e.d(h,"subtract",function(){return Wi}),e.d(h,"multiply",function(){return Hi}),e.d(h,"divide",function(){return Gi}),e.d(h,"ceil",function(){return Ki}),e.d(h,"floor",function(){return Qi}),e.d(h,"min",function(){return Zi}),e.d(h,"max",function(){return $i}),e.d(h,"round",function(){return Ji}),e.d(h,"scale",function(){return ta}),e.d(h,"scaleAndAdd",function(){return na}),e.d(h,"distance",function(){return ea}),e.d(h,"squaredDistance",function(){return ra}),e.d(h,"length",function(){return ia}),e.d(h,"squaredLength",function(){return aa}),e.d(h,"negate",function(){return ua}),e.d(h,"inverse",function(){return oa}),e.d(h,"normalize",function(){return sa}),e.d(h,"dot",function(){return ca}),e.d(h,"cross",function(){return la}),e.d(h,"lerp",function(){return fa}),e.d(h,"random",function(){return ha}),e.d(h,"transformMat2",function(){return da}),e.d(h,"transformMat2d",function(){return Ma}),e.d(h,"transformMat3",function(){return ma}),e.d(h,"transformMat4",function(){return pa}),e.d(h,"rotate",function(){return va}),e.d(h,"angle",function(){return ba}),e.d(h,"str",function(){return ga}),e.d(h,"exactEquals",function(){return ya}),e.d(h,"equals",function(){return xa}),e.d(h,"len",function(){return wa}),e.d(h,"sub",function(){return Aa}),e.d(h,"mul",function(){return Ta}),e.d(h,"div",function(){return Ea}),e.d(h,"dist",function(){return Ia}),e.d(h,"sqrDist",function(){return _a}),e.d(h,"sqrLen",function(){return ka}),e.d(h,"forEach",function(){return Ra});const d=1e-6;let M="undefined"!=typeof Float32Array?Float32Array:Array;const m=Math.random;function p(t){M=t}const v=Math.PI/180;function b(t){return t*v}function g(t,n){return Math.abs(t-n)<=d*Math.max(1,Math.abs(t),Math.abs(n))}function y(){let t=new M(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function x(t){let n=new M(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function w(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function A(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function T(t,n,e,r){let i=new M(4);return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function E(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t}function I(t,n){if(t===n){let e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function _(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=e*a-i*r;return u?(u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-i*u,t[3]=e*u,t):null}function k(t,n){let e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t}function R(t){return t[0]*t[3]-t[2]*t[1]}function S(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=e[0],s=e[1],c=e[2],l=e[3];return t[0]=r*o+a*s,t[1]=i*o+u*s,t[2]=r*c+a*l,t[3]=i*c+u*l,t}function L(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(e),s=Math.cos(e);return t[0]=r*s+a*o,t[1]=i*s+u*o,t[2]=r*-o+a*s,t[3]=i*-o+u*s,t}function P(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=e[0],s=e[1];return t[0]=r*o,t[1]=i*o,t[2]=a*s,t[3]=u*s,t}function F(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t}function O(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function B(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function q(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function D(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]}function N(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function U(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function C(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function V(t,n){let e=t[0],r=t[1],i=t[2],a=t[3],u=n[0],o=n[1],s=n[2],c=n[3];return Math.abs(e-u)<=d*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}function z(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function j(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t}const Y=S,X=U;function W(){let t=new M(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function H(t){let n=new M(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function G(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,n,e,r,i,a){let u=new M(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=i,u[5]=a,u}function Z(t,n,e,r,i,a,u){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=a,t[5]=u,t}function $(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=e*a-r*i;return s?(s=1/s,t[0]=a*s,t[1]=-r*s,t[2]=-i*s,t[3]=e*s,t[4]=(i*o-a*u)*s,t[5]=(r*u-e*o)*s,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=e[0],l=e[1],f=e[2],h=e[3],d=e[4],M=e[5];return t[0]=r*c+a*l,t[1]=i*c+u*l,t[2]=r*f+a*h,t[3]=i*f+u*h,t[4]=r*d+a*M+o,t[5]=i*d+u*M+s,t}function nt(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=Math.sin(e),l=Math.cos(e);return t[0]=r*l+a*c,t[1]=i*l+u*c,t[2]=r*-c+a*l,t[3]=i*-c+u*l,t[4]=o,t[5]=s,t}function et(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=e[0],l=e[1];return t[0]=r*c,t[1]=i*c,t[2]=a*l,t[3]=u*l,t[4]=o,t[5]=s,t}function rt(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=e[0],l=e[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=u,t[4]=r*c+a*l+o,t[5]=i*c+u*l+s,t}function it(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t}function at(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t}function ut(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t}function ot(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t}function lt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}function ft(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t}function ht(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t}function dt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]}function Mt(t,n){let e=t[0],r=t[1],i=t[2],a=t[3],u=t[4],o=t[5],s=n[0],c=n[1],l=n[2],f=n[3],h=n[4],M=n[5];return Math.abs(e-s)<=d*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(u-h)<=d*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(o-M)<=d*Math.max(1,Math.abs(o),Math.abs(M))}const mt=tt,pt=lt;function vt(){let t=new M(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function gt(t){let n=new M(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function yt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function xt(t,n,e,r,i,a,u,o,s){let c=new M(9);return c[0]=t,c[1]=n,c[2]=e,c[3]=r,c[4]=i,c[5]=a,c[6]=u,c[7]=o,c[8]=s,c}function wt(t,n,e,r,i,a,u,o,s,c){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=a,t[5]=u,t[6]=o,t[7]=s,t[8]=c,t}function At(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Tt(t,n){if(t===n){let e=n[1],r=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function Et(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],l=n[8],f=l*u-o*c,h=-l*a+o*s,d=c*a-u*s,M=e*f+r*h+i*d;return M?(M=1/M,t[0]=f*M,t[1]=(-l*r+i*c)*M,t[2]=(o*r-i*u)*M,t[3]=h*M,t[4]=(l*e-i*s)*M,t[5]=(-o*e+i*a)*M,t[6]=d*M,t[7]=(-c*e+r*s)*M,t[8]=(u*e-r*a)*M,t):null}function It(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],l=n[8];return t[0]=u*l-o*c,t[1]=i*c-r*l,t[2]=r*o-i*u,t[3]=o*s-a*l,t[4]=e*l-i*s,t[5]=i*a-e*o,t[6]=a*c-u*s,t[7]=r*s-e*c,t[8]=e*u-r*a,t}function _t(t){let n=t[0],e=t[1],r=t[2],i=t[3],a=t[4],u=t[5],o=t[6],s=t[7],c=t[8];return n*(c*a-u*s)+e*(-c*i+u*o)+r*(s*i-a*o)}function kt(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=e[0],d=e[1],M=e[2],m=e[3],p=e[4],v=e[5],b=e[6],g=e[7],y=e[8];return t[0]=h*r+d*u+M*c,t[1]=h*i+d*o+M*l,t[2]=h*a+d*s+M*f,t[3]=m*r+p*u+v*c,t[4]=m*i+p*o+v*l,t[5]=m*a+p*s+v*f,t[6]=b*r+g*u+y*c,t[7]=b*i+g*o+y*l,t[8]=b*a+g*s+y*f,t}function Rt(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=e[0],d=e[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=u,t[4]=o,t[5]=s,t[6]=h*r+d*u+c,t[7]=h*i+d*o+l,t[8]=h*a+d*s+f,t}function St(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=Math.sin(e),d=Math.cos(e);return t[0]=d*r+h*u,t[1]=d*i+h*o,t[2]=d*a+h*s,t[3]=d*u-h*r,t[4]=d*o-h*i,t[5]=d*s-h*a,t[6]=c,t[7]=l,t[8]=f,t}function Lt(t,n,e){let r=e[0],i=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function Pt(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function Ft(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function qt(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=e+e,o=r+r,s=i+i,c=e*u,l=r*u,f=r*o,h=i*u,d=i*o,M=i*s,m=a*u,p=a*o,v=a*s;return t[0]=1-f-M,t[3]=l-v,t[6]=h+p,t[1]=l+v,t[4]=1-c-M,t[7]=d-m,t[2]=h-p,t[5]=d+m,t[8]=1-c-f,t}function Dt(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],l=n[8],f=n[9],h=n[10],d=n[11],M=n[12],m=n[13],p=n[14],v=n[15],b=e*o-r*u,g=e*s-i*u,y=e*c-a*u,x=r*s-i*o,w=r*c-a*o,A=i*c-a*s,T=l*m-f*M,E=l*p-h*M,I=l*v-d*M,_=f*p-h*m,k=f*v-d*m,R=h*v-d*p,S=b*R-g*k+y*_+x*I-w*E+A*T;return S?(S=1/S,t[0]=(o*R-s*k+c*_)*S,t[1]=(s*I-u*R-c*E)*S,t[2]=(u*k-o*I+c*T)*S,t[3]=(i*k-r*R-a*_)*S,t[4]=(e*R-i*I+a*E)*S,t[5]=(r*I-e*k-a*T)*S,t[6]=(m*A-p*w+v*x)*S,t[7]=(p*y-M*A-v*g)*S,t[8]=(M*w-m*y+v*b)*S,t):null}function Nt(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ut(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Ct(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Vt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t}function zt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}function jt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t}function Yt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t}function Xt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function Wt(t,n){let e=t[0],r=t[1],i=t[2],a=t[3],u=t[4],o=t[5],s=t[6],c=t[7],l=t[8],f=n[0],h=n[1],M=n[2],m=n[3],p=n[4],v=n[5],b=n[6],g=n[7],y=n[8];return Math.abs(e-f)<=d*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-M)<=d*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(u-p)<=d*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(o-v)<=d*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-b)<=d*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-y)<=d*Math.max(1,Math.abs(l),Math.abs(y))}const Ht=kt,Gt=zt;function Kt(){let t=new M(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qt(t){let n=new M(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Zt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function $t(t,n,e,r,i,a,u,o,s,c,l,f,h,d,m,p){let v=new M(16);return v[0]=t,v[1]=n,v[2]=e,v[3]=r,v[4]=i,v[5]=a,v[6]=u,v[7]=o,v[8]=s,v[9]=c,v[10]=l,v[11]=f,v[12]=h,v[13]=d,v[14]=m,v[15]=p,v}function Jt(t,n,e,r,i,a,u,o,s,c,l,f,h,d,M,m,p){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=a,t[5]=u,t[6]=o,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=M,t[14]=m,t[15]=p,t}function tn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nn(t,n){if(t===n){let e=n[1],r=n[2],i=n[3],a=n[6],u=n[7],o=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=a,t[11]=n[14],t[12]=i,t[13]=u,t[14]=o}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function en(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],l=n[8],f=n[9],h=n[10],d=n[11],M=n[12],m=n[13],p=n[14],v=n[15],b=e*o-r*u,g=e*s-i*u,y=e*c-a*u,x=r*s-i*o,w=r*c-a*o,A=i*c-a*s,T=l*m-f*M,E=l*p-h*M,I=l*v-d*M,_=f*p-h*m,k=f*v-d*m,R=h*v-d*p,S=b*R-g*k+y*_+x*I-w*E+A*T;return S?(S=1/S,t[0]=(o*R-s*k+c*_)*S,t[1]=(i*k-r*R-a*_)*S,t[2]=(m*A-p*w+v*x)*S,t[3]=(h*w-f*A-d*x)*S,t[4]=(s*I-u*R-c*E)*S,t[5]=(e*R-i*I+a*E)*S,t[6]=(p*y-M*A-v*g)*S,t[7]=(l*A-h*y+d*g)*S,t[8]=(u*k-o*I+c*T)*S,t[9]=(r*I-e*k-a*T)*S,t[10]=(M*w-m*y+v*b)*S,t[11]=(f*y-l*w-d*b)*S,t[12]=(o*E-u*_-s*T)*S,t[13]=(e*_-r*E+i*T)*S,t[14]=(m*g-M*x-p*b)*S,t[15]=(l*x-f*g+h*b)*S,t):null}function rn(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=n[4],o=n[5],s=n[6],c=n[7],l=n[8],f=n[9],h=n[10],d=n[11],M=n[12],m=n[13],p=n[14],v=n[15];return t[0]=o*(h*v-d*p)-f*(s*v-c*p)+m*(s*d-c*h),t[1]=-(r*(h*v-d*p)-f*(i*v-a*p)+m*(i*d-a*h)),t[2]=r*(s*v-c*p)-o*(i*v-a*p)+m*(i*c-a*s),t[3]=-(r*(s*d-c*h)-o*(i*d-a*h)+f*(i*c-a*s)),t[4]=-(u*(h*v-d*p)-l*(s*v-c*p)+M*(s*d-c*h)),t[5]=e*(h*v-d*p)-l*(i*v-a*p)+M*(i*d-a*h),t[6]=-(e*(s*v-c*p)-u*(i*v-a*p)+M*(i*c-a*s)),t[7]=e*(s*d-c*h)-u*(i*d-a*h)+l*(i*c-a*s),t[8]=u*(f*v-d*m)-l*(o*v-c*m)+M*(o*d-c*f),t[9]=-(e*(f*v-d*m)-l*(r*v-a*m)+M*(r*d-a*f)),t[10]=e*(o*v-c*m)-u*(r*v-a*m)+M*(r*c-a*o),t[11]=-(e*(o*d-c*f)-u*(r*d-a*f)+l*(r*c-a*o)),t[12]=-(u*(f*p-h*m)-l*(o*p-s*m)+M*(o*h-s*f)),t[13]=e*(f*p-h*m)-l*(r*p-i*m)+M*(r*h-i*f),t[14]=-(e*(o*p-s*m)-u*(r*p-i*m)+M*(r*s-i*o)),t[15]=e*(o*h-s*f)-u*(r*h-i*f)+l*(r*s-i*o),t}function an(t){let n=t[0],e=t[1],r=t[2],i=t[3],a=t[4],u=t[5],o=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],M=t[13],m=t[14],p=t[15];return(n*u-e*a)*(f*p-h*m)-(n*o-r*a)*(l*p-h*M)+(n*s-i*a)*(l*m-f*M)+(e*o-r*u)*(c*p-h*d)-(e*s-i*u)*(c*m-f*d)+(r*s-i*o)*(c*M-l*d)}function un(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=n[9],d=n[10],M=n[11],m=n[12],p=n[13],v=n[14],b=n[15],g=e[0],y=e[1],x=e[2],w=e[3];return t[0]=g*r+y*o+x*f+w*m,t[1]=g*i+y*s+x*h+w*p,t[2]=g*a+y*c+x*d+w*v,t[3]=g*u+y*l+x*M+w*b,g=e[4],y=e[5],x=e[6],w=e[7],t[4]=g*r+y*o+x*f+w*m,t[5]=g*i+y*s+x*h+w*p,t[6]=g*a+y*c+x*d+w*v,t[7]=g*u+y*l+x*M+w*b,g=e[8],y=e[9],x=e[10],w=e[11],t[8]=g*r+y*o+x*f+w*m,t[9]=g*i+y*s+x*h+w*p,t[10]=g*a+y*c+x*d+w*v,t[11]=g*u+y*l+x*M+w*b,g=e[12],y=e[13],x=e[14],w=e[15],t[12]=g*r+y*o+x*f+w*m,t[13]=g*i+y*s+x*h+w*p,t[14]=g*a+y*c+x*d+w*v,t[15]=g*u+y*l+x*M+w*b,t}function on(t,n,e){let r,i,a,u,o,s,c,l,f,h,d,M,m=e[0],p=e[1],v=e[2];return n===t?(t[12]=n[0]*m+n[4]*p+n[8]*v+n[12],t[13]=n[1]*m+n[5]*p+n[9]*v+n[13],t[14]=n[2]*m+n[6]*p+n[10]*v+n[14],t[15]=n[3]*m+n[7]*p+n[11]*v+n[15]):(r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=n[9],d=n[10],M=n[11],t[0]=r,t[1]=i,t[2]=a,t[3]=u,t[4]=o,t[5]=s,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=M,t[12]=r*m+o*p+f*v+n[12],t[13]=i*m+s*p+h*v+n[13],t[14]=a*m+c*p+d*v+n[14],t[15]=u*m+l*p+M*v+n[15]),t}function sn(t,n,e){let r=e[0],i=e[1],a=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function cn(t,n,e,r){let i,a,u,o,s,c,l,f,h,M,m,p,v,b,g,y,x,w,A,T,E,I,_,k,R=r[0],S=r[1],L=r[2],P=Math.sqrt(R*R+S*S+L*L);return P<d?null:(R*=P=1/P,S*=P,L*=P,i=Math.sin(e),u=1-(a=Math.cos(e)),o=n[0],s=n[1],c=n[2],l=n[3],f=n[4],h=n[5],M=n[6],m=n[7],p=n[8],v=n[9],b=n[10],g=n[11],y=R*R*u+a,x=S*R*u+L*i,w=L*R*u-S*i,A=R*S*u-L*i,T=S*S*u+a,E=L*S*u+R*i,I=R*L*u+S*i,_=S*L*u-R*i,k=L*L*u+a,t[0]=o*y+f*x+p*w,t[1]=s*y+h*x+v*w,t[2]=c*y+M*x+b*w,t[3]=l*y+m*x+g*w,t[4]=o*A+f*T+p*E,t[5]=s*A+h*T+v*E,t[6]=c*A+M*T+b*E,t[7]=l*A+m*T+g*E,t[8]=o*I+f*_+p*k,t[9]=s*I+h*_+v*k,t[10]=c*I+M*_+b*k,t[11]=l*I+m*_+g*k,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function ln(t,n,e){let r=Math.sin(e),i=Math.cos(e),a=n[4],u=n[5],o=n[6],s=n[7],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*i+c*r,t[5]=u*i+l*r,t[6]=o*i+f*r,t[7]=s*i+h*r,t[8]=c*i-a*r,t[9]=l*i-u*r,t[10]=f*i-o*r,t[11]=h*i-s*r,t}function fn(t,n,e){let r=Math.sin(e),i=Math.cos(e),a=n[0],u=n[1],o=n[2],s=n[3],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i-c*r,t[1]=u*i-l*r,t[2]=o*i-f*r,t[3]=s*i-h*r,t[8]=a*r+c*i,t[9]=u*r+l*i,t[10]=o*r+f*i,t[11]=s*r+h*i,t}function hn(t,n,e){let r=Math.sin(e),i=Math.cos(e),a=n[0],u=n[1],o=n[2],s=n[3],c=n[4],l=n[5],f=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i+c*r,t[1]=u*i+l*r,t[2]=o*i+f*r,t[3]=s*i+h*r,t[4]=c*i-a*r,t[5]=l*i-u*r,t[6]=f*i-o*r,t[7]=h*i-s*r,t}function dn(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Mn(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mn(t,n,e){let r,i,a,u=e[0],o=e[1],s=e[2],c=Math.sqrt(u*u+o*o+s*s);return c<d?null:(u*=c=1/c,o*=c,s*=c,r=Math.sin(n),a=1-(i=Math.cos(n)),t[0]=u*u*a+i,t[1]=o*u*a+s*r,t[2]=s*u*a-o*r,t[3]=0,t[4]=u*o*a-s*r,t[5]=o*o*a+i,t[6]=s*o*a+u*r,t[7]=0,t[8]=u*s*a+o*r,t[9]=o*s*a-u*r,t[10]=s*s*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pn(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vn(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bn(t,n){let e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gn(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=r+r,s=i+i,c=a+a,l=r*o,f=r*s,h=r*c,d=i*s,M=i*c,m=a*c,p=u*o,v=u*s,b=u*c;return t[0]=1-(d+m),t[1]=f+b,t[2]=h-v,t[3]=0,t[4]=f-b,t[5]=1-(l+m),t[6]=M+p,t[7]=0,t[8]=h+v,t[9]=M-p,t[10]=1-(l+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function yn(t,n){let e=new M(3),r=-n[0],i=-n[1],a=-n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=r*r+i*i+a*a+u*u;return f>0?(e[0]=2*(o*u+l*r+s*a-c*i)/f,e[1]=2*(s*u+l*i+c*r-o*a)/f,e[2]=2*(c*u+l*a+o*i-s*r)/f):(e[0]=2*(o*u+l*r+s*a-c*i),e[1]=2*(s*u+l*i+c*r-o*a),e[2]=2*(c*u+l*a+o*i-s*r)),gn(t,n,e),t}function xn(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function wn(t,n){let e=n[0],r=n[1],i=n[2],a=n[4],u=n[5],o=n[6],s=n[8],c=n[9],l=n[10];return t[0]=Math.sqrt(e*e+r*r+i*i),t[1]=Math.sqrt(a*a+u*u+o*o),t[2]=Math.sqrt(s*s+c*c+l*l),t}function An(t,n){let e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t}function Tn(t,n,e,r){let i=n[0],a=n[1],u=n[2],o=n[3],s=i+i,c=a+a,l=u+u,f=i*s,h=i*c,d=i*l,M=a*c,m=a*l,p=u*l,v=o*s,b=o*c,g=o*l,y=r[0],x=r[1],w=r[2];return t[0]=(1-(M+p))*y,t[1]=(h+g)*y,t[2]=(d-b)*y,t[3]=0,t[4]=(h-g)*x,t[5]=(1-(f+p))*x,t[6]=(m+v)*x,t[7]=0,t[8]=(d+b)*w,t[9]=(m-v)*w,t[10]=(1-(f+M))*w,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function En(t,n,e,r,i){let a=n[0],u=n[1],o=n[2],s=n[3],c=a+a,l=u+u,f=o+o,h=a*c,d=a*l,M=a*f,m=u*l,p=u*f,v=o*f,b=s*c,g=s*l,y=s*f,x=r[0],w=r[1],A=r[2],T=i[0],E=i[1],I=i[2],_=(1-(m+v))*x,k=(d+y)*x,R=(M-g)*x,S=(d-y)*w,L=(1-(h+v))*w,P=(p+b)*w,F=(M+g)*A,O=(p-b)*A,B=(1-(h+m))*A;return t[0]=_,t[1]=k,t[2]=R,t[3]=0,t[4]=S,t[5]=L,t[6]=P,t[7]=0,t[8]=F,t[9]=O,t[10]=B,t[11]=0,t[12]=e[0]+T-(_*T+S*E+F*I),t[13]=e[1]+E-(k*T+L*E+O*I),t[14]=e[2]+I-(R*T+P*E+B*I),t[15]=1,t}function In(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=e+e,o=r+r,s=i+i,c=e*u,l=r*u,f=r*o,h=i*u,d=i*o,M=i*s,m=a*u,p=a*o,v=a*s;return t[0]=1-f-M,t[1]=l+v,t[2]=h-p,t[3]=0,t[4]=l-v,t[5]=1-c-M,t[6]=d+m,t[7]=0,t[8]=h+p,t[9]=d-m,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _n(t,n,e,r,i,a,u){let o=1/(e-n),s=1/(i-r),c=1/(a-u);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(e+n)*o,t[9]=(i+r)*s,t[10]=(u+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*a*2*c,t[15]=0,t}function kn(t,n,e,r,i){let a=1/Math.tan(n/2),u=1/(r-i);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*u,t[15]=0,t}function Rn(t,n,e,r){let i=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),o=Math.tan(n.rightDegrees*Math.PI/180),s=2/(u+o),c=2/(i+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-o)*s*.5,t[9]=(i-a)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function Sn(t,n,e,r,i,a,u){let o=1/(n-e),s=1/(r-i),c=1/(a-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*o,t[13]=(i+r)*s,t[14]=(u+a)*c,t[15]=1,t}function Ln(t,n,e,r){let i,a,u,o,s,c,l,f,h,M,m=n[0],p=n[1],v=n[2],b=r[0],g=r[1],y=r[2],x=e[0],w=e[1],A=e[2];return Math.abs(m-x)<d&&Math.abs(p-w)<d&&Math.abs(v-A)<d?tn(t):(l=m-x,f=p-w,h=v-A,i=g*(h*=M=1/Math.sqrt(l*l+f*f+h*h))-y*(f*=M),a=y*(l*=M)-b*h,u=b*f-g*l,(M=Math.sqrt(i*i+a*a+u*u))?(i*=M=1/M,a*=M,u*=M):(i=0,a=0,u=0),o=f*u-h*a,s=h*i-l*u,c=l*a-f*i,(M=Math.sqrt(o*o+s*s+c*c))?(o*=M=1/M,s*=M,c*=M):(o=0,s=0,c=0),t[0]=i,t[1]=o,t[2]=l,t[3]=0,t[4]=a,t[5]=s,t[6]=f,t[7]=0,t[8]=u,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*m+a*p+u*v),t[13]=-(o*m+s*p+c*v),t[14]=-(l*m+f*p+h*v),t[15]=1,t)}function Pn(t,n,e,r){let i=n[0],a=n[1],u=n[2],o=r[0],s=r[1],c=r[2],l=i-e[0],f=a-e[1],h=u-e[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);let M=s*h-c*f,m=c*l-o*h,p=o*f-s*l;return(d=M*M+m*m+p*p)>0&&(M*=d=1/Math.sqrt(d),m*=d,p*=d),t[0]=M,t[1]=m,t[2]=p,t[3]=0,t[4]=f*p-h*m,t[5]=h*M-l*p,t[6]=l*m-f*M,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=u,t[15]=1,t}function Fn(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function On(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Bn(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function qn(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function Dn(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function Nn(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function Un(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function Cn(t,n){let e=t[0],r=t[1],i=t[2],a=t[3],u=t[4],o=t[5],s=t[6],c=t[7],l=t[8],f=t[9],h=t[10],M=t[11],m=t[12],p=t[13],v=t[14],b=t[15],g=n[0],y=n[1],x=n[2],w=n[3],A=n[4],T=n[5],E=n[6],I=n[7],_=n[8],k=n[9],R=n[10],S=n[11],L=n[12],P=n[13],F=n[14],O=n[15];return Math.abs(e-g)<=d*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-y)<=d*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-x)<=d*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=d*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-A)<=d*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(o-T)<=d*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(s-E)<=d*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(c-I)<=d*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(l-_)<=d*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-k)<=d*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-R)<=d*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(M-S)<=d*Math.max(1,Math.abs(M),Math.abs(S))&&Math.abs(m-L)<=d*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(p-P)<=d*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-F)<=d*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(b-O)<=d*Math.max(1,Math.abs(b),Math.abs(O))}const Vn=un,zn=qn;function jn(){let t=new M(3);return t[0]=0,t[1]=0,t[2]=0,t}function Yn(t){var n=new M(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Xn(t){let n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function Wn(t,n,e){let r=new M(3);return r[0]=t,r[1]=n,r[2]=e,r}function Hn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Gn(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function Kn(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function Qn(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function Zn(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function $n(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function Jn(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function te(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function ne(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function ee(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function re(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function ie(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function ae(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function ue(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(e*e+r*r+i*i)}function oe(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2];return e*e+r*r+i*i}function se(t){let n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function ce(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function le(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function fe(t,n){let e=n[0],r=n[1],i=n[2],a=e*e+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a),t}function he(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function de(t,n,e){let r=n[0],i=n[1],a=n[2],u=e[0],o=e[1],s=e[2];return t[0]=i*s-a*o,t[1]=a*u-r*s,t[2]=r*o-i*u,t}function Me(t,n,e,r){let i=n[0],a=n[1],u=n[2];return t[0]=i+r*(e[0]-i),t[1]=a+r*(e[1]-a),t[2]=u+r*(e[2]-u),t}function me(t,n,e,r,i,a){let u=a*a,o=u*(2*a-3)+1,s=u*(a-2)+a,c=u*(a-1),l=u*(3-2*a);return t[0]=n[0]*o+e[0]*s+r[0]*c+i[0]*l,t[1]=n[1]*o+e[1]*s+r[1]*c+i[1]*l,t[2]=n[2]*o+e[2]*s+r[2]*c+i[2]*l,t}function pe(t,n,e,r,i,a){let u=1-a,o=u*u,s=a*a,c=o*u,l=3*a*o,f=3*s*u,h=s*a;return t[0]=n[0]*c+e[0]*l+r[0]*f+i[0]*h,t[1]=n[1]*c+e[1]*l+r[1]*f+i[1]*h,t[2]=n[2]*c+e[2]*l+r[2]*f+i[2]*h,t}function ve(t,n){n=n||1;let e=2*m()*Math.PI,r=2*m()-1,i=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*i,t[1]=Math.sin(e)*i,t[2]=r*n,t}function be(t,n,e){let r=n[0],i=n[1],a=n[2],u=e[3]*r+e[7]*i+e[11]*a+e[15];return u=u||1,t[0]=(e[0]*r+e[4]*i+e[8]*a+e[12])/u,t[1]=(e[1]*r+e[5]*i+e[9]*a+e[13])/u,t[2]=(e[2]*r+e[6]*i+e[10]*a+e[14])/u,t}function ge(t,n,e){let r=n[0],i=n[1],a=n[2];return t[0]=r*e[0]+i*e[3]+a*e[6],t[1]=r*e[1]+i*e[4]+a*e[7],t[2]=r*e[2]+i*e[5]+a*e[8],t}function ye(t,n,e){let r=e[0],i=e[1],a=e[2],u=e[3],o=n[0],s=n[1],c=n[2],l=i*c-a*s,f=a*o-r*c,h=r*s-i*o,d=i*h-a*f,M=a*l-r*h,m=r*f-i*l,p=2*u;return l*=p,f*=p,h*=p,d*=2,M*=2,m*=2,t[0]=o+l+d,t[1]=s+f+M,t[2]=c+h+m,t}function xe(t,n,e,r){let i=[],a=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function we(t,n,e,r){let i=[],a=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function Ae(t,n,e,r){let i=[],a=[];return i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function Te(t,n){let e=Wn(t[0],t[1],t[2]),r=Wn(n[0],n[1],n[2]);fe(e,e),fe(r,r);let i=he(e,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function Ee(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ie(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function _e(t,n){let e=t[0],r=t[1],i=t[2],a=n[0],u=n[1],o=n[2];return Math.abs(e-a)<=d*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-u)<=d*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-o)<=d*Math.max(1,Math.abs(i),Math.abs(o))}const ke=Qn,Re=Zn,Se=$n,Le=ue,Pe=oe,Fe=Xn,Oe=se,Be=function(){let t=jn();return function(n,e,r,i,a,u){let o,s;for(e||(e=3),r||(r=0),s=i?Math.min(i*e+r,n.length):n.length,o=r;o<s;o+=e)t[0]=n[o],t[1]=n[o+1],t[2]=n[o+2],a(t,t,u),n[o]=t[0],n[o+1]=t[1],n[o+2]=t[2];return n}}();function qe(){let t=new M(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function De(t){let n=new M(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function Ne(t,n,e,r){let i=new M(4);return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function Ue(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function Ce(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t}function Ve(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function ze(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function je(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function Ye(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function Xe(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function We(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function He(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t}function Ge(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t}function Ke(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function Qe(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function Ze(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t}function $e(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],a=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+a*a)}function Je(t,n){let e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],a=n[3]-t[3];return e*e+r*r+i*i+a*a}function tr(t){let n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)}function nr(t){let n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i}function er(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function rr(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function ir(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=e*e+r*r+i*i+a*a;return u>0&&(u=1/Math.sqrt(u),t[0]=e*u,t[1]=r*u,t[2]=i*u,t[3]=a*u),t}function ar(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function ur(t,n,e,r){let i=n[0],a=n[1],u=n[2],o=n[3];return t[0]=i+r*(e[0]-i),t[1]=a+r*(e[1]-a),t[2]=u+r*(e[2]-u),t[3]=o+r*(e[3]-o),t}function or(t,n){var e,r,i,a,u,o;n=n||1;do{u=(e=2*m()-1)*e+(r=2*m()-1)*r}while(u>=1);do{o=(i=2*m()-1)*i+(a=2*m()-1)*a}while(o>=1);var s=Math.sqrt((1-u)/o);return t[0]=Qe*e,t[1]=Qe*r,t[2]=Qe*i*s,t[3]=Qe*a*s,t}function sr(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*a+e[12]*u,t[1]=e[1]*r+e[5]*i+e[9]*a+e[13]*u,t[2]=e[2]*r+e[6]*i+e[10]*a+e[14]*u,t[3]=e[3]*r+e[7]*i+e[11]*a+e[15]*u,t}function cr(t,n,e){let r=n[0],i=n[1],a=n[2],u=e[0],o=e[1],s=e[2],c=e[3],l=c*r+o*a-s*i,f=c*i+s*r-u*a,h=c*a+u*i-o*r,d=-u*r-o*i-s*a;return t[0]=l*c+d*-u+f*-s-h*-o,t[1]=f*c+d*-o+h*-u-l*-s,t[2]=h*c+d*-s+l*-o-f*-u,t[3]=n[3],t}function lr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function fr(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function hr(t,n){let e=t[0],r=t[1],i=t[2],a=t[3],u=n[0],o=n[1],s=n[2],c=n[3];return Math.abs(e-u)<=d*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}const dr=ze,Mr=je,mr=Ye,pr=$e,vr=Je,br=tr,gr=nr,yr=function(){let t=qe();return function(n,e,r,i,a,u){let o,s;for(e||(e=4),r||(r=0),s=i?Math.min(i*e+r,n.length):n.length,o=r;o<s;o+=e)t[0]=n[o],t[1]=n[o+1],t[2]=n[o+2],t[3]=n[o+3],a(t,t,u),n[o]=t[0],n[o+1]=t[1],n[o+2]=t[2],n[o+3]=t[3];return n}}();function xr(){let t=new M(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function wr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ar(t,n,e){e*=.5;let r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function Tr(t,n){let e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function Er(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=e[0],s=e[1],c=e[2],l=e[3];return t[0]=r*l+u*o+i*c-a*s,t[1]=i*l+u*s+a*o-r*c,t[2]=a*l+u*c+r*s-i*o,t[3]=u*l-r*o-i*s-a*c,t}function Ir(t,n,e){e*=.5;let r=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(e),s=Math.cos(e);return t[0]=r*s+u*o,t[1]=i*s+a*o,t[2]=a*s-i*o,t[3]=u*s-r*o,t}function _r(t,n,e){e*=.5;let r=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(e),s=Math.cos(e);return t[0]=r*s-a*o,t[1]=i*s+u*o,t[2]=a*s+r*o,t[3]=u*s-i*o,t}function kr(t,n,e){e*=.5;let r=n[0],i=n[1],a=n[2],u=n[3],o=Math.sin(e),s=Math.cos(e);return t[0]=r*s+i*o,t[1]=i*s-r*o,t[2]=a*s+u*o,t[3]=u*s-a*o,t}function Rr(t,n){let e=n[0],r=n[1],i=n[2];return t[0]=e,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-i*i)),t}function Sr(t,n,e,r){let i,a,u,o,s,c=n[0],l=n[1],f=n[2],h=n[3],d=e[0],M=e[1],m=e[2],p=e[3];return(a=c*d+l*M+f*m+h*p)<0&&(a=-a,d=-d,M=-M,m=-m,p=-p),1-a>1e-6?(i=Math.acos(a),u=Math.sin(i),o=Math.sin((1-r)*i)/u,s=Math.sin(r*i)/u):(o=1-r,s=r),t[0]=o*c+s*d,t[1]=o*l+s*M,t[2]=o*f+s*m,t[3]=o*h+s*p,t}function Lr(t,n){let e=n[0],r=n[1],i=n[2],a=n[3],u=e*e+r*r+i*i+a*a,o=u?1/u:0;return t[0]=-e*o,t[1]=-r*o,t[2]=-i*o,t[3]=a*o,t}function Pr(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Fr(t,n){let e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{let r=0;n[4]>n[0]&&(r=1),n[8]>n[3*r+r]&&(r=2);let i=(r+1)%3,a=(r+2)%3;e=Math.sqrt(n[3*r+r]-n[3*i+i]-n[3*a+a]+1),t[r]=.5*e,e=.5/e,t[3]=(n[3*i+a]-n[3*a+i])*e,t[i]=(n[3*i+r]+n[3*r+i])*e,t[a]=(n[3*a+r]+n[3*r+a])*e}return t}function Or(t,n,e,r){let i=.5*Math.PI/180;n*=i,e*=i,r*=i;let a=Math.sin(n),u=Math.cos(n),o=Math.sin(e),s=Math.cos(e),c=Math.sin(r),l=Math.cos(r);return t[0]=a*s*l-u*o*c,t[1]=u*o*l+a*s*c,t[2]=u*s*c-a*o*l,t[3]=u*s*l+a*o*c,t}function Br(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const qr=De,Dr=Ne,Nr=Ue,Ur=Ce,Cr=Ve,Vr=Er,zr=Qe,jr=ar,Yr=ur,Xr=tr,Wr=Xr,Hr=nr,Gr=Hr,Kr=ir,Qr=fr,Zr=hr,$r=function(){let t=jn(),n=Wn(1,0,0),e=Wn(0,1,0);return function(r,i,a){let u=he(i,a);return u<-.999999?(de(t,n,i),Fe(t)<1e-6&&de(t,e,i),fe(t,t),Ar(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(de(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,Kr(r,r))}}(),Jr=function(){let t=xr(),n=xr();return function(e,r,i,a,u,o){return Sr(t,r,u,o),Sr(n,i,a,o),Sr(e,t,n,2*o*(1-o)),e}}(),ti=function(){let t=vt();return function(n,e,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],Kr(n,Fr(n,t))}}();function ni(){let t=new M(8);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ei(t){let n=new M(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function ri(t,n,e,r,i,a,u,o){let s=new M(8);return s[0]=t,s[1]=n,s[2]=e,s[3]=r,s[4]=i,s[5]=a,s[6]=u,s[7]=o,s}function ii(t,n,e,r,i,a,u){let o=new M(8);o[0]=t,o[1]=n,o[2]=e,o[3]=r;let s=.5*i,c=.5*a,l=.5*u;return o[4]=s*r+c*e-l*n,o[5]=c*r+l*t-s*e,o[6]=l*r+s*n-c*t,o[7]=-s*t-c*n-l*e,o}function ai(t,n,e){let r=.5*e[0],i=.5*e[1],a=.5*e[2],u=n[0],o=n[1],s=n[2],c=n[3];return t[0]=u,t[1]=o,t[2]=s,t[3]=c,t[4]=r*c+i*s-a*o,t[5]=i*c+a*u-r*s,t[6]=a*c+r*o-i*u,t[7]=-r*u-i*o-a*s,t}function ui(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t}function oi(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function si(t,n){let e=xr();An(e,n);let r=new M(3);return xn(r,n),ai(t,e,r),t}function ci(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function li(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function fi(t,n,e,r,i,a,u,o,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=a,t[5]=u,t[6]=o,t[7]=s,t}const hi=Nr;function di(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t}const Mi=Nr;function mi(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t}function pi(t,n){let e=n[4],r=n[5],i=n[6],a=n[7],u=-n[0],o=-n[1],s=-n[2],c=n[3];return t[0]=2*(e*c+a*u+r*s-i*o),t[1]=2*(r*c+a*o+i*u-e*s),t[2]=2*(i*c+a*s+e*o-r*u),t}function vi(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=.5*e[0],s=.5*e[1],c=.5*e[2],l=n[4],f=n[5],h=n[6],d=n[7];return t[0]=r,t[1]=i,t[2]=a,t[3]=u,t[4]=u*o+i*c-a*s+l,t[5]=u*s+a*o-r*c+f,t[6]=u*c+r*s-i*o+h,t[7]=-r*o-i*s-a*c+d,t}function bi(t,n,e){let r=-n[0],i=-n[1],a=-n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=o*u+l*r+s*a-c*i,h=s*u+l*i+c*r-o*a,d=c*u+l*a+o*i-s*r,M=l*u-o*r-s*i-c*a;return Ir(t,n,e),r=t[0],i=t[1],a=t[2],u=t[3],t[4]=f*u+M*r+h*a-d*i,t[5]=h*u+M*i+d*r-f*a,t[6]=d*u+M*a+f*i-h*r,t[7]=M*u-f*r-h*i-d*a,t}function gi(t,n,e){let r=-n[0],i=-n[1],a=-n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=o*u+l*r+s*a-c*i,h=s*u+l*i+c*r-o*a,d=c*u+l*a+o*i-s*r,M=l*u-o*r-s*i-c*a;return _r(t,n,e),r=t[0],i=t[1],a=t[2],u=t[3],t[4]=f*u+M*r+h*a-d*i,t[5]=h*u+M*i+d*r-f*a,t[6]=d*u+M*a+f*i-h*r,t[7]=M*u-f*r-h*i-d*a,t}function yi(t,n,e){let r=-n[0],i=-n[1],a=-n[2],u=n[3],o=n[4],s=n[5],c=n[6],l=n[7],f=o*u+l*r+s*a-c*i,h=s*u+l*i+c*r-o*a,d=c*u+l*a+o*i-s*r,M=l*u-o*r-s*i-c*a;return kr(t,n,e),r=t[0],i=t[1],a=t[2],u=t[3],t[4]=f*u+M*r+h*a-d*i,t[5]=h*u+M*i+d*r-f*a,t[6]=d*u+M*a+f*i-h*r,t[7]=M*u-f*r-h*i-d*a,t}function xi(t,n,e){let r=e[0],i=e[1],a=e[2],u=e[3],o=n[0],s=n[1],c=n[2],l=n[3];return t[0]=o*u+l*r+s*a-c*i,t[1]=s*u+l*i+c*r-o*a,t[2]=c*u+l*a+o*i-s*r,t[3]=l*u-o*r-s*i-c*a,o=n[4],s=n[5],c=n[6],l=n[7],t[4]=o*u+l*r+s*a-c*i,t[5]=s*u+l*i+c*r-o*a,t[6]=c*u+l*a+o*i-s*r,t[7]=l*u-o*r-s*i-c*a,t}function wi(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=e[0],s=e[1],c=e[2],l=e[3];return t[0]=r*l+u*o+i*c-a*s,t[1]=i*l+u*s+a*o-r*c,t[2]=a*l+u*c+r*s-i*o,t[3]=u*l-r*o-i*s-a*c,o=e[4],s=e[5],c=e[6],l=e[7],t[4]=r*l+u*o+i*c-a*s,t[5]=i*l+u*s+a*o-r*c,t[6]=a*l+u*c+r*s-i*o,t[7]=u*l-r*o-i*s-a*c,t}function Ai(t,n,e,r){if(Math.abs(r)<d)return ci(t,n);let i=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);r*=.5;let a=Math.sin(r),u=a*e[0]/i,o=a*e[1]/i,s=a*e[2]/i,c=Math.cos(r),l=n[0],f=n[1],h=n[2],M=n[3];t[0]=l*c+M*u+f*s-h*o,t[1]=f*c+M*o+h*u-l*s,t[2]=h*c+M*s+l*o-f*u,t[3]=M*c-l*u-f*o-h*s;let m=n[4],p=n[5],v=n[6],b=n[7];return t[4]=m*c+b*u+p*s-v*o,t[5]=p*c+b*o+v*u-m*s,t[6]=v*c+b*s+m*o-p*u,t[7]=b*c-m*u-p*o-v*s,t}function Ti(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t}function Ei(t,n,e){let r=n[0],i=n[1],a=n[2],u=n[3],o=e[4],s=e[5],c=e[6],l=e[7],f=n[4],h=n[5],d=n[6],M=n[7],m=e[0],p=e[1],v=e[2],b=e[3];return t[0]=r*b+u*m+i*v-a*p,t[1]=i*b+u*p+a*m-r*v,t[2]=a*b+u*v+r*p-i*m,t[3]=u*b-r*m-i*p-a*v,t[4]=r*l+u*o+i*c-a*s+f*b+M*m+h*v-d*p,t[5]=i*l+u*s+a*o-r*c+h*b+M*p+d*m-f*v,t[6]=a*l+u*c+r*s-i*o+d*b+M*v+f*p-h*m,t[7]=u*l-r*o-i*s-a*c+M*b-f*m-h*p-d*v,t}const Ii=Ei;function _i(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t}const ki=jr;function Ri(t,n,e,r){let i=1-r;return ki(n,e)<0&&(r=-r),t[0]=n[0]*i+e[0]*r,t[1]=n[1]*i+e[1]*r,t[2]=n[2]*i+e[2]*r,t[3]=n[3]*i+e[3]*r,t[4]=n[4]*i+e[4]*r,t[5]=n[5]*i+e[5]*r,t[6]=n[6]*i+e[6]*r,t[7]=n[7]*i+e[7]*r,t}function Si(t,n){let e=Oi(n);return t[0]=-n[0]/e,t[1]=-n[1]/e,t[2]=-n[2]/e,t[3]=n[3]/e,t[4]=-n[4]/e,t[5]=-n[5]/e,t[6]=-n[6]/e,t[7]=n[7]/e,t}function Li(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t}const Pi=Xr,Fi=Pi,Oi=Hr,Bi=Oi;function qi(t,n){let e=Oi(n);return e>0&&(e=Math.sqrt(e),t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e,t[3]=n[3]/e,t[4]=n[4]/e,t[5]=n[5]/e,t[6]=n[6]/e,t[7]=n[7]/e),t}function Di(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Ni(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]}function Ui(t,n){let e=t[0],r=t[1],i=t[2],a=t[3],u=t[4],o=t[5],s=t[6],c=t[7],l=n[0],f=n[1],h=n[2],M=n[3],m=n[4],p=n[5],v=n[6],b=n[7];return Math.abs(e-l)<=d*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-M)<=d*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-m)<=d*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-b)<=d*Math.max(1,Math.abs(c),Math.abs(b))}function Ci(){let t=new M(2);return t[0]=0,t[1]=0,t}function Vi(t){let n=new M(2);return n[0]=t[0],n[1]=t[1],n}function zi(t,n){let e=new M(2);return e[0]=t,e[1]=n,e}function ji(t,n){return t[0]=n[0],t[1]=n[1],t}function Yi(t,n,e){return t[0]=n,t[1]=e,t}function Xi(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function Wi(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function Hi(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function Gi(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function Ki(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function Qi(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function Zi(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t}function $i(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t}function Ji(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function ta(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function na(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t}function ea(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function ra(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function ia(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function aa(t){var n=t[0],e=t[1];return n*n+e*e}function ua(t,n){return t[0]=-n[0],t[1]=-n[1],t}function oa(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function sa(t,n){var e=n[0],r=n[1],i=e*e+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t}function ca(t,n){return t[0]*n[0]+t[1]*n[1]}function la(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t}function fa(t,n,e,r){var i=n[0],a=n[1];return t[0]=i+r*(e[0]-i),t[1]=a+r*(e[1]-a),t}function ha(t,n){n=n||1;var e=2*m()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t}function da(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i,t[1]=e[1]*r+e[3]*i,t}function Ma(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[2]*i+e[4],t[1]=e[1]*r+e[3]*i+e[5],t}function ma(t,n,e){var r=n[0],i=n[1];return t[0]=e[0]*r+e[3]*i+e[6],t[1]=e[1]*r+e[4]*i+e[7],t}function pa(t,n,e){let r=n[0],i=n[1];return t[0]=e[0]*r+e[4]*i+e[12],t[1]=e[1]*r+e[5]*i+e[13],t}function va(t,n,e,r){let i=n[0]-e[0],a=n[1]-e[1],u=Math.sin(r),o=Math.cos(r);return t[0]=i*o-a*u+e[0],t[1]=i*u+a*o+e[1],t}function ba(t,n){let e=t[0],r=t[1],i=n[0],a=n[1],u=e*e+r*r;u>0&&(u=1/Math.sqrt(u));let o=i*i+a*a;o>0&&(o=1/Math.sqrt(o));let s=(e*i+r*a)*u*o;return s>1?0:s<-1?Math.PI:Math.acos(s)}function ga(t){return"vec2("+t[0]+", "+t[1]+")"}function ya(t,n){return t[0]===n[0]&&t[1]===n[1]}function xa(t,n){let e=t[0],r=t[1],i=n[0],a=n[1];return Math.abs(e-i)<=d*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))}const wa=ia,Aa=Wi,Ta=Hi,Ea=Gi,Ia=ea,_a=ra,ka=aa,Ra=function(){let t=Ci();return function(n,e,r,i,a,u){let o,s;for(e||(e=2),r||(r=0),s=i?Math.min(i*e+r,n.length):n.length,o=r;o<s;o+=e)t[0]=n[o],t[1]=n[o+1],a(t,t,u),n[o]=t[0],n[o+1]=t[1];return n}}();e.d(n,"glMatrix",function(){return r}),e.d(n,"mat2",function(){return i}),e.d(n,"mat2d",function(){return a}),e.d(n,"mat3",function(){return u}),e.d(n,"mat4",function(){return o}),e.d(n,"quat",function(){return l}),e.d(n,"quat2",function(){return f}),e.d(n,"vec2",function(){return h}),e.d(n,"vec3",function(){return s}),e.d(n,"vec4",function(){return c})},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(1);var i;!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT",t[t.UP=4]="UP",t[t.DOWN=5]="DOWN"}(i||(i={}));const a=-90,u=0,o=.005,s=.05,c=45;class l{constructor(t=r.vec3.fromValues(0,0,0),n=r.vec3.fromValues(0,1,0),e=a,i=u,l=r.vec3.fromValues(0,0,-1),f=o,h=s,d=c){this.position=t,this.worldUp=n,this.yaw=e,this.pitch=i,this.front=l,this.right=r.vec3.fromValues(1,0,0),this.up=r.vec3.fromValues(0,1,0),this.movementSpeed=f,this.mouseSensitivity=h,this.zoom=d,this.updateCameraVectors()}getViewMatrix(){let t=r.mat4.create(),n=r.vec3.create();return r.vec3.add(n,this.position,this.front),r.mat4.lookAt(t,this.position,n,this.up),t}processMove(t,n){let e=this.movementSpeed*n,a=r.vec3.create();t==i.FORWARD&&(r.vec3.scale(a,this.front,e),r.vec3.add(this.position,this.position,a)),t==i.BACKWARD&&(r.vec3.scale(a,this.front,e),r.vec3.sub(this.position,this.position,a)),t==i.LEFT&&(r.vec3.scale(a,this.right,e),r.vec3.sub(this.position,this.position,a)),t==i.RIGHT&&(r.vec3.scale(a,this.right,e),r.vec3.add(this.position,this.position,a)),t==i.UP&&(r.vec3.scale(a,this.up,e),r.vec3.add(this.position,this.position,a)),t==i.DOWN&&(r.vec3.scale(a,this.up,e),r.vec3.sub(this.position,this.position,a))}processViewAngle(t,n,e=!0){t*=this.mouseSensitivity,n*=this.mouseSensitivity,this.yaw+=t,this.pitch+=n,e&&(this.pitch>89&&(this.pitch=89),this.pitch<-89&&(this.pitch=-89)),this.updateCameraVectors()}processZoom(t){this.zoom>=1&&this.zoom<=45&&(this.zoom-=t/200),this.zoom<=1&&(this.zoom=1),this.zoom>=45&&(this.zoom=45)}updateCameraVectors(){let t=r.vec3.create();t[0]=Math.cos(r.glMatrix.toRadian(this.yaw))*Math.cos(r.glMatrix.toRadian(this.pitch)),t[1]=Math.sin(r.glMatrix.toRadian(this.pitch)),t[2]=Math.sin(r.glMatrix.toRadian(this.yaw))*Math.cos(r.glMatrix.toRadian(this.pitch)),r.vec3.normalize(this.front,t);let n=r.vec3.create();r.vec3.cross(n,this.front,this.worldUp),r.vec3.normalize(this.right,n);let e=r.vec3.create();r.vec3.cross(e,this.right,this.front),r.vec3.normalize(this.up,e)}desktopFreeMoveControl(t,n=["w","s","a","d"," ","Shift"]){t.currentlyPressedKeys.get(n[0])&&this.processMove(l.Movement.FORWARD,t.deltaTime),t.currentlyPressedKeys.get(n[1])&&this.processMove(l.Movement.BACKWARD,t.deltaTime),t.currentlyPressedKeys.get(n[2])&&this.processMove(l.Movement.LEFT,t.deltaTime),t.currentlyPressedKeys.get(n[3])&&this.processMove(l.Movement.RIGHT,t.deltaTime),t.currentlyPressedKeys.get(n[4])&&this.processMove(l.Movement.UP,t.deltaTime),t.currentlyPressedKeys.get(n[5])&&this.processMove(l.Movement.DOWN,t.deltaTime),this.processViewAngle(t.mouseInput.deltaX,-t.mouseInput.deltaY),this.processZoom(t.mouseInput.wheelDeltaY)}}l.Movement=i,n.default=l},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mobilecheck=function(){let t=!1;var n;return n=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(t=!0),t},n.loadImage=function(t,n){return new Promise((e,r)=>{let i=new XMLHttpRequest,a=!1;i.open("GET",t,!0),i.responseType="arraybuffer",i.onprogress=function(t){t.lengthComputable?n(Math.round(t.loaded/t.total*100)):a||(a=!0,n(-1))},i.onloadend=function(){if(i.status.toString().match(/^2/)){a||n(100);let t={},r=i.getAllResponseHeaders().match(/^Content-Type\:\s*(.*?)$/im);r&&r[1]&&(t.type=r[1]);let u=new Blob([this.response],t),o=window.URL.createObjectURL(u),s=new Image;s.src=o,s.onload=(()=>e(s))}else r(i)},i.send()})}},function(t,n,e){"undefined"!=typeof self&&self,t.exports=function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="/",n(n.s=3)}([function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=n.Layout=function t(){r(this,t);for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];this.attributes=e;var u=0,o=0,s=!0,c=!1,l=void 0;try{for(var f,h=e[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;if(this[d.key])throw new a(d);u%d.sizeOfType!=0&&(u+=d.sizeOfType-u%d.sizeOfType),this[d.key]={attribute:d,size:d.size,type:d.type,normalized:d.normalized,offset:u},u+=d.sizeInBytes,o=Math.max(o,d.sizeOfType)}}catch(t){c=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(c)throw l}}u%o!=0&&(u+=o-u%o),this.stride=u;var M=!0,m=!1,p=void 0;try{for(var v,b=e[Symbol.iterator]();!(M=(v=b.next()).done);M=!0)this[v.value.key].stride=this.stride}catch(t){m=!0,p=t}finally{try{!M&&b.return&&b.return()}finally{if(m)throw p}}},a=function t(n){r(this,t),this.message="found duplicate attribute: "+n.key},u=function t(n,e,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3],r(this,t),this.key=n,this.size=e,this.type=i,this.normalized=!1,this.sizeOfType=function(t){switch(i){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}(),this.sizeInBytes=this.sizeOfType*e};i.POSITION=new u("position",3,"FLOAT"),i.NORMAL=new u("normal",3,"FLOAT"),i.TANGENT=new u("tangent",3,"FLOAT"),i.BITANGENT=new u("bitangent",3,"FLOAT"),i.UV=new u("uv",2,"FLOAT"),i.MATERIAL_INDEX=new u("materialIndex",1,"SHORT"),i.MATERIAL_ENABLED=new u("materialEnabled",1,"UNSIGNED_SHORT"),i.AMBIENT=new u("ambient",3,"FLOAT"),i.DIFFUSE=new u("diffuse",3,"FLOAT"),i.SPECULAR=new u("specular",3,"FLOAT"),i.SPECULAR_EXPONENT=new u("specularExponent",3,"FLOAT"),i.EMISSIVE=new u("emissive",3,"FLOAT"),i.TRANSMISSION_FILTER=new u("transmissionFilter",3,"FLOAT"),i.DISSOLVE=new u("dissolve",1,"FLOAT"),i.ILLUMINATION=new u("illumination",1,"UNSIGNED_SHORT"),i.REFRACTION_INDEX=new u("refractionIndex",1,"FLOAT"),i.SHARPNESS=new u("sharpness",1,"FLOAT"),i.MAP_DIFFUSE=new u("mapDiffuse",1,"SHORT"),i.MAP_AMBIENT=new u("mapAmbient",1,"SHORT"),i.MAP_SPECULAR=new u("mapSpecular",1,"SHORT"),i.MAP_SPECULAR_EXPONENT=new u("mapSpecularExponent",1,"SHORT"),i.MAP_DISSOLVE=new u("mapDissolve",1,"SHORT"),i.ANTI_ALIASING=new u("antiAliasing",1,"UNSIGNED_SHORT"),i.MAP_BUMP=new u("mapBump",1,"SHORT"),i.MAP_DISPLACEMENT=new u("mapDisplacement",1,"SHORT"),i.MAP_DECAL=new u("mapDecal",1,"SHORT"),i.MAP_EMISSIVE=new u("mapEmissive",1,"SHORT")},function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(0),u=function(){function t(n,e){(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),(e=e||{}).materials=e.materials||{},e.enableWTextureCoord=!!e.enableWTextureCoord,e.indicesPerMaterial=!!e.indicesPerMaterial;var i=this;i.vertices=[],i.vertexNormals=[],i.textures=[],i.indices=[],i.textureStride=e.enableWTextureCoord?3:2,this.name="";var a=[],u=[],o=[],s={},c=[],l={},f=-1,h=0;s.verts=[],s.norms=[],s.textures=[],s.hashindices={},s.indices=[[]],s.materialIndices=[],s.index=0;for(var d=/^v\s/,M=/^vn\s/,m=/^vt\s/,p=/^f\s/,v=/\s+/,b=/^usemtl/,g=n.split("\n"),y=0;y<g.length;y++){var x=g[y].trim();if(x&&!x.startsWith("#")){var w=x.split(v);if(w.shift(),d.test(x))a.push.apply(a,r(w));else if(M.test(x))u.push.apply(u,r(w));else if(m.test(x)){var A=w;w.length>2&&!e.enableWTextureCoord?A=w.slice(0,2):2===w.length&&e.enableWTextureCoord&&A.push(0),o.push.apply(o,r(A))}else if(b.test(x)){var T=w[0];T in l||(c.push(T),l[T]=c.length-1,e.indicesPerMaterial&&l[T]>0&&s.indices.push([])),f=l[T],e.indicesPerMaterial&&(h=f)}else if(p.test(x))for(var E=!1,I=0,_=w.length;I<_;I++){3!==I||E||(I=2,E=!0);var k=w[0]+","+f,R=w[I]+","+f;if(R in s.hashindices)s.indices[h].push(s.hashindices[R]);else{var S=w[I].split("/"),L=S.length-1;if(s.verts.push(+a[3*(S[0]-1)+0]),s.verts.push(+a[3*(S[0]-1)+1]),s.verts.push(+a[3*(S[0]-1)+2]),o.length){var P=e.enableWTextureCoord?3:2;s.textures.push(+o[(S[1]-1)*P+0]),s.textures.push(+o[(S[1]-1)*P+1]),e.enableWTextureCoord&&s.textures.push(+o[(S[1]-1)*P+2])}s.norms.push(+u[3*(S[L]-1)+0]),s.norms.push(+u[3*(S[L]-1)+1]),s.norms.push(+u[3*(S[L]-1)+2]),s.materialIndices.push(f),s.hashindices[R]=s.index,s.indices[h].push(s.hashindices[R]),s.index+=1}3===I&&E&&s.indices[h].push(s.hashindices[k])}}}i.vertices=s.verts,i.vertexNormals=s.norms,i.textures=s.textures,i.vertexMaterialIndices=s.materialIndices,i.indices=e.indicesPerMaterial?s.indices:s.indices[h],i.materialNames=c,i.materialIndices=l,i.materialsByIndex={},e.calcTangentsAndBitangents&&this.calculateTangentsAndBitangents()}return i(t,[{key:"calculateTangentsAndBitangents",value:function(){var t={};t.tangents=[].concat(r(new Array(this.vertices.length))).map(function(t){return 0}),t.bitangents=[].concat(r(new Array(this.vertices.length))).map(function(t){return 0});var n;n=Array.isArray(this.indices[0])?[].concat.apply([],this.indices):this.indices;for(var e=this.vertices,i=this.vertexNormals,a=this.textures,u=0;u<n.length;u+=3){var o=n[u+0],s=n[u+1],c=n[u+2],l=e[3*o+0],f=e[3*o+1],h=e[3*o+2],d=a[2*o+0],M=a[2*o+1],m=e[3*s+0],p=e[3*s+1],v=e[3*s+2],b=a[2*s+0],g=a[2*s+1],y=m-l,x=p-f,w=v-h,A=e[3*c+0]-l,T=e[3*c+1]-f,E=e[3*c+2]-h,I=b-d,_=g-M,k=a[2*c+0]-d,R=a[2*c+1]-M,S=I*R-_*k,L=1/(Math.abs(S<1e-4)?1:S),P=(y*R-A*_)*L,F=(x*R-T*_)*L,O=(w*R-E*_)*L,B=(A*I-y*k)*L,q=(T*I-x*k)*L,D=(E*I-w*k)*L,N=i[3*o+0],U=i[3*o+1],C=i[3*o+2],V=i[3*s+0],z=i[3*s+1],j=i[3*s+2],Y=i[3*c+0],X=i[3*c+1],W=i[3*c+2],H=P*N+F*U+O*C,G=P*V+F*z+O*j,K=P*Y+F*X+O*W,Q=P-N*H,Z=F-U*H,$=O-C*H,J=P-V*G,tt=F-z*G,nt=O-j*G,et=P-Y*K,rt=F-X*K,it=O-W*K,at=Math.sqrt(Q*Q+Z*Z+$*$),ut=Math.sqrt(J*J+tt*tt+nt*nt),ot=Math.sqrt(et*et+rt*rt+it*it),st=B*N+q*U+D*C,ct=B*V+q*z+D*j,lt=B*Y+q*X+D*W,ft=B-N*st,ht=q-U*st,dt=D-C*st,Mt=B-V*ct,mt=q-z*ct,pt=D-j*ct,vt=B-Y*lt,bt=q-X*lt,gt=D-W*lt,yt=Math.sqrt(ft*ft+ht*ht+dt*dt),xt=Math.sqrt(Mt*Mt+mt*mt+pt*pt),wt=Math.sqrt(vt*vt+bt*bt+gt*gt);t.tangents[3*o+0]+=Q/at,t.tangents[3*o+1]+=Z/at,t.tangents[3*o+2]+=$/at,t.tangents[3*s+0]+=J/ut,t.tangents[3*s+1]+=tt/ut,t.tangents[3*s+2]+=nt/ut,t.tangents[3*c+0]+=et/ot,t.tangents[3*c+1]+=rt/ot,t.tangents[3*c+2]+=it/ot,t.bitangents[3*o+0]+=ft/yt,t.bitangents[3*o+1]+=ht/yt,t.bitangents[3*o+2]+=dt/yt,t.bitangents[3*s+0]+=Mt/xt,t.bitangents[3*s+1]+=mt/xt,t.bitangents[3*s+2]+=pt/xt,t.bitangents[3*c+0]+=vt/wt,t.bitangents[3*c+1]+=bt/wt,t.bitangents[3*c+2]+=gt/wt}this.tangents=t.tangents,this.bitangents=t.bitangents}},{key:"makeBufferData",value:function(t){var n=this.vertices.length/3,e=new ArrayBuffer(t.stride*n);e.numItems=n;for(var r=new DataView(e),i=0,u=0;i<n;i++){u=i*t.stride;var o=!0,s=!1,c=void 0;try{for(var l,f=t.attributes[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var h=l.value,d=u+t[h.key].offset;switch(h.key){case a.Layout.POSITION.key:r.setFloat32(d,this.vertices[3*i],!0),r.setFloat32(d+4,this.vertices[3*i+1],!0),r.setFloat32(d+8,this.vertices[3*i+2],!0);break;case a.Layout.UV.key:r.setFloat32(d,this.textures[2*i],!0),r.setFloat32(d+4,this.vertices[2*i+1],!0);break;case a.Layout.NORMAL.key:r.setFloat32(d,this.vertexNormals[3*i],!0),r.setFloat32(d+4,this.vertexNormals[3*i+1],!0),r.setFloat32(d+8,this.vertexNormals[3*i+2],!0);break;case a.Layout.MATERIAL_INDEX.key:r.setInt16(d,this.vertexMaterialIndices[i],!0);break;case a.Layout.AMBIENT.key:var M=this.vertexMaterialIndices[i],m=this.materialsByIndex[M];if(!m)break;r.setFloat32(d,m.ambient[0],!0),r.setFloat32(d+4,m.ambient[1],!0),r.setFloat32(d+8,m.ambient[2],!0);break;case a.Layout.DIFFUSE.key:var p=this.vertexMaterialIndices[i],v=this.materialsByIndex[p];if(!v)break;r.setFloat32(d,v.diffuse[0],!0),r.setFloat32(d+4,v.diffuse[1],!0),r.setFloat32(d+8,v.diffuse[2],!0);break;case a.Layout.SPECULAR.key:var b=this.vertexMaterialIndices[i],g=this.materialsByIndex[b];if(!g)break;r.setFloat32(d,g.specular[0],!0),r.setFloat32(d+4,g.specular[1],!0),r.setFloat32(d+8,g.specular[2],!0);break;case a.Layout.SPECULAR_EXPONENT.key:var y=this.vertexMaterialIndices[i],x=this.materialsByIndex[y];if(!x)break;r.setFloat32(d,x.specularExponent,!0);break;case a.Layout.EMISSIVE.key:var w=this.vertexMaterialIndices[i],A=this.materialsByIndex[w];if(!A)break;r.setFloat32(d,A.emissive[0],!0),r.setFloat32(d+4,A.emissive[1],!0),r.setFloat32(d+8,A.emissive[2],!0);break;case a.Layout.TRANSMISSION_FILTER.key:var T=this.vertexMaterialIndices[i],E=this.materialsByIndex[T];if(!E)break;r.setFloat32(d,E.transmissionFilter[0],!0),r.setFloat32(d+4,E.transmissionFilter[1],!0),r.setFloat32(d+8,E.transmissionFilter[2],!0);break;case a.Layout.DISSOLVE.key:var I=this.vertexMaterialIndices[i],_=this.materialsByIndex[I];if(!_)break;r.setFloat32(d,_.dissolve,!0);break;case a.Layout.ILLUMINATION.key:var k=this.vertexMaterialIndices[i],R=this.materialsByIndex[k];if(!R)break;r.setInt16(d,R.illumination,!0);break;case a.Layout.REFRACTION_INDEX.key:var S=this.vertexMaterialIndices[i],L=this.materialsByIndex[S];if(!L)break;r.setFloat32(d,L.refractionIndex,!0);break;case a.Layout.SHARPNESS.key:var P=this.vertexMaterialIndices[i],F=this.materialsByIndex[P];if(!F)break;r.setFloat32(d,F.sharpness,!0);break;case a.Layout.ANTI_ALIASING.key:var O=this.vertexMaterialIndices[i],B=this.materialsByIndex[O];if(!B)break;r.setInt16(d,B.antiAliasing,!0)}}}catch(t){s=!0,c=t}finally{try{!o&&f.return&&f.return()}finally{if(s)throw c}}}return e}},{key:"makeIndexBufferData",value:function(){var t=new Uint16Array(this.indices);return t.numItems=this.indices.length,t}},{key:"addMaterialLibrary",value:function(t){for(var n in t.materials)if(n in this.materialIndices){var e=t.materials[n],r=this.materialIndices[e.name];this.materialsByIndex[r]=e}}}]),t}();n.default=u},function(t,n,e){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=n.Material=function t(n){i(this,t),this.name=n,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};n.MaterialLibrary=function(){function t(n){i(this,t),this.data=n,this.currentMaterial=null,this.materials={},this.parse()}return a(t,[{key:"parse_newmtl",value:function(t){var n=t[0];this.currentMaterial=new u(n),this.materials[n]=this.currentMaterial}},{key:"parseColor",value:function(t){if("spectral"!=t[0]&&"xyz"!=t[0]){if(3==t.length)return t.map(parseFloat);var n=parseFloat(t[0]);return[n,n,n]}}},{key:"parse_Ka",value:function(t){this.currentMaterial.ambient=this.parseColor(t)}},{key:"parse_Kd",value:function(t){this.currentMaterial.diffuse=this.parseColor(t)}},{key:"parse_Ks",value:function(t){this.currentMaterial.specular=this.parseColor(t)}},{key:"parse_Ke",value:function(t){this.currentMaterial.emissive=this.parseColor(t)}},{key:"parse_Tf",value:function(t){this.currentMaterial.transmissionFilter=this.parseColor(t)}},{key:"parse_d",value:function(t){this.currentMaterial.dissolve=parseFloat(t.pop())}},{key:"parse_illum",value:function(t){this.currentMaterial.illumination=parseInt(t[0])}},{key:"parse_Ni",value:function(t){this.currentMaterial.refractionIndex=parseFloat(t[0])}},{key:"parse_Ns",value:function(t){this.currentMaterial.specularExponent=parseInt(t[0])}},{key:"parse_sharpness",value:function(t){this.currentMaterial.sharpness=parseInt(t[0])}},{key:"parse_cc",value:function(t,n){n.colorCorrection="on"==t[0]}},{key:"parse_blendu",value:function(t,n){n.horizontalBlending="on"==t[0]}},{key:"parse_blendv",value:function(t,n){n.verticalBlending="on"==t[0]}},{key:"parse_boost",value:function(t,n){n.boostMipMapSharpness=parseFloat(t[0])}},{key:"parse_mm",value:function(t,n){n.modifyTextureMap.brightness=parseFloat(t[0]),n.modifyTextureMap.contrast=parseFloat(t[1])}},{key:"parse_ost",value:function(t,n,e){for(;t.length<3;)t.push(e);n.u=parseFloat(t[0]),n.v=parseFloat(t[1]),n.w=parseFloat(t[2])}},{key:"parse_o",value:function(t,n){this.parse_ost(t,n.offset,0)}},{key:"parse_s",value:function(t,n){this.parse_ost(t,n.scale,1)}},{key:"parse_t",value:function(t,n){this.parse_ost(t,n.turbulence,0)}},{key:"parse_texres",value:function(t,n){n.textureResolution=parseFloat(t[0])}},{key:"parse_clamp",value:function(t,n){n.clamp="on"==t[0]}},{key:"parse_bm",value:function(t,n){n.bumpMultiplier=parseFloat(t[0])}},{key:"parse_imfchan",value:function(t,n){n.imfChan=t[0]}},{key:"parse_type",value:function(t,n){n.reflectionType=t[0]}},{key:"parseOptions",value:function(t){var n={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},e=void 0,r=void 0,i={};for(t.reverse();t.length;){var a=t.pop();a.startsWith("-")?i[e=a.substr(1)]=[]:i[e].push(a)}for(e in i)if(i.hasOwnProperty(e)){r=i[e];var u=this["parse_"+e];u&&u.bind(this)(r,n)}return n}},{key:"parseMap",value:function(t){var n=void 0,e=void 0;if(t[0].startsWith("-"))n=t.pop(),e=t;else{var i=r(t);n=i[0],e=i.slice(1)}return(e=this.parseOptions(e)).filename=n,e}},{key:"parse_map_Ka",value:function(t){this.currentMaterial.mapAmbient=this.parseMap(t)}},{key:"parse_map_Kd",value:function(t){this.currentMaterial.mapDiffuse=this.parseMap(t)}},{key:"parse_map_Ks",value:function(t){this.currentMaterial.mapSpecular=this.parseMap(t)}},{key:"parse_map_Ke",value:function(t){this.currentMaterial.mapEmissive=this.parseMap(t)}},{key:"parse_map_Ns",value:function(t){this.currentMaterial.mapSpecularExponent=this.parseMap(t)}},{key:"parse_map_d",value:function(t){this.currentMaterial.mapDissolve=this.parseMap(t)}},{key:"parse_map_aat",value:function(t){this.currentMaterial.antiAliasing="on"==t[0]}},{key:"parse_map_bump",value:function(t){this.currentMaterial.mapBump=this.parseMap(t)}},{key:"parse_bump",value:function(t){this.parse_map_bump(t)}},{key:"parse_disp",value:function(t){this.currentMaterial.mapDisplacement=this.parseMap(t)}},{key:"parse_decal",value:function(t){this.currentMaterial.mapDecal=this.parseMap(t)}},{key:"parse_refl",value:function(t){this.currentMaterial.mapReflections.push(this.parseMap(t))}},{key:"parse",value:function(){var t=this.data.split(/\r?\n/),n=!0,e=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var o=a.value;if((o=o.trim())&&!o.startsWith("#")){var s,c=o.split(/\s/),l=r(c);s=l[0],c=l.slice(1);var f=this["parse_"+s];f&&f.bind(this)(c)}}}catch(t){e=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(e)throw i}}delete this.data,this.currentMaterial=null}}]),t}()},function(t,n,e){t.exports=e(4)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.version=n.deleteMeshBuffers=n.initMeshBuffers=n.downloadMeshes=n.downloadModels=n.Layout=n.MaterialLibrary=n.Material=n.Mesh=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),i=e(2),a=e(0),u=e(5);n.Mesh=r.default,n.Material=i.Material,n.MaterialLibrary=i.MaterialLibrary,n.Layout=a.Layout,n.downloadModels=u.downloadModels,n.downloadMeshes=u.downloadMeshes,n.initMeshBuffers=u.initMeshBuffers,n.deleteMeshBuffers=u.deleteMeshBuffers,n.version="1.1.3"},function(t,n,e){"use strict";function r(t,n){var e=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];n.endsWith("/")||(n+="/");var r=[];for(var i in t.materials)if(t.materials.hasOwnProperty(i)){i=t.materials[i];var a=!0,u=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;!function(t){var e=i[l];if(!e)return"continue";var a=n+e.filename;r.push(fetch(a).then(function(t){if(!t.ok)throw new Error;return t.blob()}).then(function(t){var n=new Image;return n.src=URL.createObjectURL(t),e.texture=n,new Promise(function(t){return n.onload=t})}).catch(function(){}))}()}}catch(t){u=!0,o=t}finally{try{!a&&c.return&&c.return()}finally{if(u)throw o}}}return Promise.all(r)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var e=[],r=!0,i=!1,a=void 0;try{for(var u,o=t[Symbol.iterator]();!(r=(u=o.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return e}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")};n.downloadModels=function(t){var n=[],e=!0,o=!1,s=void 0;try{for(var c,l=t[Symbol.iterator]();!(e=(c=l.next()).done);e=!0){!function(t){var e=[];if(!t.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var i={};i.indicesPerMaterial=!!t.indicesPerMaterial,i.calcTangentsAndBitangents=!!t.calcTangentsAndBitangents;var o=t.name;if(!o){var s=t.obj.split("/");o=s[s.length-1].replace(".obj","")}if(e.push(Promise.resolve(o)),e.push(fetch(t.obj).then(function(t){return t.text()}).then(function(t){return new a.default(t,i)})),t.mtl){var c=t.mtl;"boolean"==typeof c&&(c=t.obj.replace(/\.obj$/,".mtl")),e.push(fetch(c).then(function(t){return t.text()}).then(function(n){var e=new u.MaterialLibrary(n);if(!1!==t.downloadMtlTextures){var i=t.mtlTextureRoot;return i||(i=c.substr(0,c.lastIndexOf("/"))),Promise.all([Promise.resolve(e),r(e,i)])}return Promise.all(Promise.resolve(e))}).then(function(t){return t[0]}))}n.push(Promise.all(e))}(c.value)}}catch(t){o=!0,s=t}finally{try{!e&&l.return&&l.return()}finally{if(o)throw s}}return Promise.all(n).then(function(t){var n={},e=!0,r=!1,a=void 0;try{for(var u,o=t[Symbol.iterator]();!(e=(u=o.next()).done);e=!0){var s=u.value,c=i(s,3),l=c[0],f=c[1],h=c[2];f.name=l,h&&f.addMaterialLibrary(h),n[l]=f}}catch(t){r=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw a}}return n})},n.downloadMeshes=function(t,n,e){void 0===e&&(e={});var r=[];for(var u in t)!function(n){if(!t.hasOwnProperty(n))return"continue";var e=t[n];r.push(fetch(e).then(function(t){return t.text()}).then(function(t){return[n,new a.default(t)]}))}(u);Promise.all(r).then(function(t){var r=!0,a=!1,u=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,l=i(c,2),f=l[0],h=l[1];e[f]=h}}catch(t){a=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw u}}return n(e)})},n.initMeshBuffers=function(t,n){n.normalBuffer=o(t,t.ARRAY_BUFFER,n.vertexNormals,3),n.textureBuffer=o(t,t.ARRAY_BUFFER,n.textures,n.textureStride),n.vertexBuffer=o(t,t.ARRAY_BUFFER,n.vertices,3),n.indexBuffer=o(t,t.ELEMENT_ARRAY_BUFFER,n.indices,1)},n.deleteMeshBuffers=function(t,n){t.deleteBuffer(n.normalBuffer),t.deleteBuffer(n.textureBuffer),t.deleteBuffer(n.vertexBuffer),t.deleteBuffer(n.indexBuffer)};var a=function(t){return t&&t.__esModule?t:{default:t}}(e(1)),u=e(2),o=(e(0),function(t,n,e,r){var i=t.createBuffer(),a=n===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(n,i),t.bufferData(n,new a(e),t.STATIC_DRAW),i.itemSize=r,i.numItems=e.length/r,i})}])},function(t,n,e){"use strict";var r=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))(function(i,a){function u(t){try{s(r.next(t))}catch(t){a(t)}}function o(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){t.done?i(t.value):new e(function(n){n(t.value)}).then(u,o)}s((r=r.apply(t,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const i=e(4),a=e(0),u=e(3),o=window.document;class s{constructor({width:t=300,height:n=150,desktopInput:e=!0,touchInput:r=!0}={}){this.options={width:t,height:n,desktopInput:e,touchInput:r},this.el=o.createElement("div"),this.canvas=o.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.loadingBar=o.createElement("progress"),this.loadingBar.value=0,this.loadingBar.max=100,this.loadingBar.style.width=t+"px",this.el.appendChild(this.loadingBar),this.resource={images:[]},this.resourceCount=0,this.loadProgress=[];let i=this;if(this.loadProgressProxy=new Proxy(this.loadProgress,{set:function(t,n,e,r){let a=i.loadProgress.reduce((t,n)=>t+Number(n),0);return 0!==i.resourceCount&&(i.loadingBar.value=a/i.resourceCount),Reflect.set(t,n,e,r)}}),this.gl=this.canvas.getContext("webgl2"),!this.gl)return console.error("Unable to initialize WebGL2. Your browser or machine may not support it."),null;if(this.deltaTime=0,this.lastFrame=0,u.mobilecheck()?this.mobile=!0:this.mobile=!1,this.options.desktopInput){let t={lockPointer:!0};"boolean"!=typeof e&&(t=this.options.desktopInput);let[n,r]=s.desktopInput(this.canvas,t);this.currentlyPressedKeys=n,this.mouseInput=r}if(r){let t=s.touchInput(this.canvas);this.ongoingTouches=t}}resize(){let t=this.canvas.clientWidth,n=this.canvas.clientHeight;this.canvas.width==t&&this.canvas.height==n||(this.canvas.width=t,this.canvas.height=n),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}draw(t){}started(){}render(t){if(this.deltaTime=t-this.lastFrame,this.lastFrame=t,this.resize(),this.draw(t),this.options.touchInput)for(let t in this.ongoingTouches)this.ongoingTouches[t].deltaX=0,this.ongoingTouches[t].deltaY=0;this.options.desktopInput&&(this.mouseInput.deltaX=0,this.mouseInput.deltaY=0,this.mouseInput.wheelDeltaY=0),requestAnimationFrame(this.render.bind(this))}loadMesh(t){let n=new i.Mesh(t);return i.initMeshBuffers(this.gl,n),n}setMeshVAO(t,n){let e=this.gl.getAttribLocation(n.program,"a_position"),r=this.gl.getAttribLocation(n.program,"a_texCoord"),i=this.gl.getAttribLocation(n.program,"a_normal"),a=this.gl.createVertexArray();return this.gl.bindVertexArray(a),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.vertexBuffer),this.gl.vertexAttribPointer(e,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(e),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.textureBuffer),this.gl.vertexAttribPointer(r,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(r),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.normalBuffer),this.gl.vertexAttribPointer(i,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(i),this.gl.bindVertexArray(null),a}drawMesh(t,n){this.gl.bindVertexArray(n),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t.indexBuffer),this.gl.drawElements(this.gl.TRIANGLES,t.indexBuffer.numItems,this.gl.UNSIGNED_SHORT,0),this.gl.bindVertexArray(null)}start(){return r(this,void 0,void 0,function*(){let t=yield this.loadTexture();this.loadingBar.remove(),this.el.appendChild(this.canvas),this.render(this.lastFrame),this.textures=t,this.started()})}setImageResource(t){this.resource.images=t}loadTexture(){return r(this,void 0,void 0,function*(){let t=[];this.resourceCount+=this.resource.images.length;let n=this.resource.images.map((t,n)=>s.loadImage(t,t=>{this.loadProgressProxy[n]=t})),e=yield Promise.all(n);return this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),e.forEach((n,e)=>{t[e]=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,t[e]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)}),t})}drawQuad(t){if(void 0===this.quadVAO){this.quadVAO=this.gl.createVertexArray();let t=this.gl.createBuffer();this.gl.bindVertexArray(this.quadVAO),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(s.quadVertices),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(0),this.gl.vertexAttribPointer(0,3,this.gl.FLOAT,!0,20,0),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(1,2,this.gl.FLOAT,!0,20,12),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null)}if(this.gl.bindVertexArray(this.quadVAO),1===t.length)this.gl.bindTexture(this.gl.TEXTURE_2D,t[0]);else for(let n in t)this.gl.activeTexture(this.gl.TEXTURE0+Number(n)),this.gl.bindTexture(this.gl.TEXTURE_2D,t[n]);this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(null)}drawFB(t){void 0===this.fbShader&&(this.fbShader=new a.default(this.gl,s.fbvs,s.fbfs)),this.fbShader.use(),this.fbShader.setInt("scene",0),this.drawQuad([t])}drawDepth(t){void 0===this.fbShader&&(this.fbShader=new a.default(this.gl,s.fbvs,s.depthFS)),this.fbShader.use(),this.fbShader.setInt("depthMap",0),this.drawQuad([t])}static desktopInput(t,n){let e=new Map,r={deltaX:0,deltaY:0,wheelDeltaY:0};function i(t){e.set(t.key,!0)}function a(t){e.set(t.key,!1)}function u(t){r.deltaX=t.movementX||0,r.deltaY=t.movementY||0}function s(t){r.wheelDeltaY=t.wheelDeltaY}function c(){o.addEventListener("keydown",i),o.addEventListener("keyup",a),o.addEventListener("mousemove",u),o.addEventListener("wheel",s)}function l(){o.removeEventListener("keydown",i),o.removeEventListener("keyup",a),o.removeEventListener("mousemove",u),o.removeEventListener("wheel",s)}if(n.lockPointer){function f(){o.pointerLockElement===t||o.mozPointerLockElement===t?c():l()}t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock,t.exitPointerLock=t.exitPointerLock||t.mozExitPointerLock,t.onclick=function(){t.requestPointerLock()},o.addEventListener("pointerlockchange",f,!1),o.addEventListener("mozpointerlockchange",f,!1)}else t.contentEditable="true",t.style.cursor="crosshair",t.addEventListener("focus",c),t.addEventListener("blur",l);return[e,r]}static touchInput(t){const n=[];function e(t){for(let e=0;e<n.length;e++)if(n[e].identifier===t)return e;return-1}return t.addEventListener("touchstart",function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){let r={pageX:e[t].pageX,pageY:e[t].pageY,startX:e[t].pageX,startY:e[t].pageY,deltaX:0,deltaY:0,identifier:e[t].identifier};n.push(r)}},!1),t.addEventListener("touchend",function(t){t.preventDefault();let r=t.changedTouches;for(let t=0;t<r.length;t++){let i=e(r[t].identifier);n.splice(i,1)}},!1),t.addEventListener("touchmove",function(t){t.preventDefault();let r=t.changedTouches;for(let t=0;t<r.length;t++){let i=e(r[t].identifier),a={pageX:r[t].pageX,pageY:r[t].pageY,startX:n[i].startX,startY:n[i].startY,deltaX:r[t].pageX-n[i].pageX,deltaY:r[t].pageY-n[i].pageY,identifier:r[t].identifier};n.splice(i,1,a)}},!1),n}}s.loadImage=u.loadImage,s.quadVertices=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0],s.fbvs="#version 300 es\n\n  layout (location = 0) in vec3 a_position;\n  layout (location = 1) in vec2 a_texCoord;\n\n  out vec2 TexCoord;\n\n  void main()\n  {\n      TexCoord = a_texCoord;\n      gl_Position = vec4(a_position, 1.0);\n  }\n  ",s.fbfs="#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D scene;\n\n  void main()\n  {\n    FragColor = texture(scene, TexCoord);\n  }\n  ",s.depthFS="#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D depthMap;\n\n  void main()\n  {\n    float depthValue = texture(depthMap, TexCoord).r;\n    FragColor = vec4(vec3(depthValue), 1.0);\n  }\n  ",n.default=s},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e(5);n.ArGL=r.default;const i=e(2);n.Camera=i.default;const a=e(0);n.Shader=a.default,n.default=r.default}])});