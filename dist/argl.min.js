!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=e.Layout=function t(){r(this,t);for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];this.attributes=n;var s=0,o=0,u=!0,l=!1,c=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;if(this[d.key])throw new i(d);s%d.sizeOfType!=0&&(s+=d.sizeOfType-s%d.sizeOfType),this[d.key]={attribute:d,size:d.size,type:d.type,normalized:d.normalized,offset:s},s+=d.sizeInBytes,o=Math.max(o,d.sizeOfType)}}catch(t){l=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}s%o!=0&&(s+=o-s%o),this.stride=s;var p=!0,m=!1,v=void 0;try{for(var g,M=n[Symbol.iterator]();!(p=(g=M.next()).done);p=!0)this[g.value.key].stride=this.stride}catch(t){m=!0,v=t}finally{try{!p&&M.return&&M.return()}finally{if(m)throw v}}},i=function t(e){r(this,t),this.message="found duplicate attribute: "+e.key},s=function t(e,n,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3],r(this,t),this.key=e,this.size=n,this.type=a,this.normalized=!1,this.sizeOfType=function(t){switch(a){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}(),this.sizeInBytes=this.sizeOfType*n};a.POSITION=new s("position",3,"FLOAT"),a.NORMAL=new s("normal",3,"FLOAT"),a.TANGENT=new s("tangent",3,"FLOAT"),a.BITANGENT=new s("bitangent",3,"FLOAT"),a.UV=new s("uv",2,"FLOAT"),a.MATERIAL_INDEX=new s("materialIndex",1,"SHORT"),a.MATERIAL_ENABLED=new s("materialEnabled",1,"UNSIGNED_SHORT"),a.AMBIENT=new s("ambient",3,"FLOAT"),a.DIFFUSE=new s("diffuse",3,"FLOAT"),a.SPECULAR=new s("specular",3,"FLOAT"),a.SPECULAR_EXPONENT=new s("specularExponent",3,"FLOAT"),a.EMISSIVE=new s("emissive",3,"FLOAT"),a.TRANSMISSION_FILTER=new s("transmissionFilter",3,"FLOAT"),a.DISSOLVE=new s("dissolve",1,"FLOAT"),a.ILLUMINATION=new s("illumination",1,"UNSIGNED_SHORT"),a.REFRACTION_INDEX=new s("refractionIndex",1,"FLOAT"),a.SHARPNESS=new s("sharpness",1,"FLOAT"),a.MAP_DIFFUSE=new s("mapDiffuse",1,"SHORT"),a.MAP_AMBIENT=new s("mapAmbient",1,"SHORT"),a.MAP_SPECULAR=new s("mapSpecular",1,"SHORT"),a.MAP_SPECULAR_EXPONENT=new s("mapSpecularExponent",1,"SHORT"),a.MAP_DISSOLVE=new s("mapDissolve",1,"SHORT"),a.ANTI_ALIASING=new s("antiAliasing",1,"UNSIGNED_SHORT"),a.MAP_BUMP=new s("mapBump",1,"SHORT"),a.MAP_DISPLACEMENT=new s("mapDisplacement",1,"SHORT"),a.MAP_DECAL=new s("mapDecal",1,"SHORT"),a.MAP_EMISSIVE=new s("mapEmissive",1,"SHORT")},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),s=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),(n=n||{}).materials=n.materials||{},n.enableWTextureCoord=!!n.enableWTextureCoord,n.indicesPerMaterial=!!n.indicesPerMaterial;var a=this;a.vertices=[],a.vertexNormals=[],a.textures=[],a.indices=[],a.textureStride=n.enableWTextureCoord?3:2,this.name="";var i=[],s=[],o=[],u={},l=[],c={},h=-1,f=0;u.verts=[],u.norms=[],u.textures=[],u.hashindices={},u.indices=[[]],u.materialIndices=[],u.index=0;for(var d=/^v\s/,p=/^vn\s/,m=/^vt\s/,v=/^f\s/,g=/\s+/,M=/^usemtl/,b=e.split("\n"),y=0;y<b.length;y++){var x=b[y].trim();if(x&&!x.startsWith("#")){var w=x.split(g);if(w.shift(),d.test(x))i.push.apply(i,r(w));else if(p.test(x))s.push.apply(s,r(w));else if(m.test(x)){var A=w;w.length>2&&!n.enableWTextureCoord?A=w.slice(0,2):2===w.length&&n.enableWTextureCoord&&A.push(0),o.push.apply(o,r(A))}else if(M.test(x)){var T=w[0];T in c||(l.push(T),c[T]=l.length-1,n.indicesPerMaterial&&c[T]>0&&u.indices.push([])),h=c[T],n.indicesPerMaterial&&(f=h)}else if(v.test(x))for(var _=!1,E=0,k=w.length;E<k;E++){3!==E||_||(E=2,_=!0);var I=w[0]+","+h,R=w[E]+","+h;if(R in u.hashindices)u.indices[f].push(u.hashindices[R]);else{var S=w[E].split("/"),L=S.length-1;if(u.verts.push(+i[3*(S[0]-1)+0]),u.verts.push(+i[3*(S[0]-1)+1]),u.verts.push(+i[3*(S[0]-1)+2]),o.length){var F=n.enableWTextureCoord?3:2;u.textures.push(+o[(S[1]-1)*F+0]),u.textures.push(+o[(S[1]-1)*F+1]),n.enableWTextureCoord&&u.textures.push(+o[(S[1]-1)*F+2])}u.norms.push(+s[3*(S[L]-1)+0]),u.norms.push(+s[3*(S[L]-1)+1]),u.norms.push(+s[3*(S[L]-1)+2]),u.materialIndices.push(h),u.hashindices[R]=u.index,u.indices[f].push(u.hashindices[R]),u.index+=1}3===E&&_&&u.indices[f].push(u.hashindices[I])}}}a.vertices=u.verts,a.vertexNormals=u.norms,a.textures=u.textures,a.vertexMaterialIndices=u.materialIndices,a.indices=n.indicesPerMaterial?u.indices:u.indices[f],a.materialNames=l,a.materialIndices=c,a.materialsByIndex={},n.calcTangentsAndBitangents&&this.calculateTangentsAndBitangents()}return a(t,[{key:"calculateTangentsAndBitangents",value:function(){var t={};t.tangents=[].concat(r(new Array(this.vertices.length))).map(function(t){return 0}),t.bitangents=[].concat(r(new Array(this.vertices.length))).map(function(t){return 0});var e;e=Array.isArray(this.indices[0])?[].concat.apply([],this.indices):this.indices;for(var n=this.vertices,a=this.vertexNormals,i=this.textures,s=0;s<e.length;s+=3){var o=e[s+0],u=e[s+1],l=e[s+2],c=n[3*o+0],h=n[3*o+1],f=n[3*o+2],d=i[2*o+0],p=i[2*o+1],m=n[3*u+0],v=n[3*u+1],g=n[3*u+2],M=i[2*u+0],b=i[2*u+1],y=m-c,x=v-h,w=g-f,A=n[3*l+0]-c,T=n[3*l+1]-h,_=n[3*l+2]-f,E=M-d,k=b-p,I=i[2*l+0]-d,R=i[2*l+1]-p,S=E*R-k*I,L=1/(Math.abs(S<1e-4)?1:S),F=(y*R-A*k)*L,P=(x*R-T*k)*L,O=(w*R-_*k)*L,B=(A*E-y*I)*L,D=(T*E-x*I)*L,N=(_*E-w*I)*L,C=a[3*o+0],U=a[3*o+1],q=a[3*o+2],z=a[3*u+0],V=a[3*u+1],j=a[3*u+2],Y=a[3*l+0],X=a[3*l+1],H=a[3*l+2],W=F*C+P*U+O*q,G=F*z+P*V+O*j,K=F*Y+P*X+O*H,Q=F-C*W,Z=P-U*W,$=O-q*W,J=F-z*G,tt=P-V*G,et=O-j*G,nt=F-Y*K,rt=P-X*K,at=O-H*K,it=Math.sqrt(Q*Q+Z*Z+$*$),st=Math.sqrt(J*J+tt*tt+et*et),ot=Math.sqrt(nt*nt+rt*rt+at*at),ut=B*C+D*U+N*q,lt=B*z+D*V+N*j,ct=B*Y+D*X+N*H,ht=B-C*ut,ft=D-U*ut,dt=N-q*ut,pt=B-z*lt,mt=D-V*lt,vt=N-j*lt,gt=B-Y*ct,Mt=D-X*ct,bt=N-H*ct,yt=Math.sqrt(ht*ht+ft*ft+dt*dt),xt=Math.sqrt(pt*pt+mt*mt+vt*vt),wt=Math.sqrt(gt*gt+Mt*Mt+bt*bt);t.tangents[3*o+0]+=Q/it,t.tangents[3*o+1]+=Z/it,t.tangents[3*o+2]+=$/it,t.tangents[3*u+0]+=J/st,t.tangents[3*u+1]+=tt/st,t.tangents[3*u+2]+=et/st,t.tangents[3*l+0]+=nt/ot,t.tangents[3*l+1]+=rt/ot,t.tangents[3*l+2]+=at/ot,t.bitangents[3*o+0]+=ht/yt,t.bitangents[3*o+1]+=ft/yt,t.bitangents[3*o+2]+=dt/yt,t.bitangents[3*u+0]+=pt/xt,t.bitangents[3*u+1]+=mt/xt,t.bitangents[3*u+2]+=vt/xt,t.bitangents[3*l+0]+=gt/wt,t.bitangents[3*l+1]+=Mt/wt,t.bitangents[3*l+2]+=bt/wt}this.tangents=t.tangents,this.bitangents=t.bitangents}},{key:"makeBufferData",value:function(t){var e=this.vertices.length/3,n=new ArrayBuffer(t.stride*e);n.numItems=e;for(var r=new DataView(n),a=0,s=0;a<e;a++){s=a*t.stride;var o=!0,u=!1,l=void 0;try{for(var c,h=t.attributes[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var f=c.value,d=s+t[f.key].offset;switch(f.key){case i.Layout.POSITION.key:r.setFloat32(d,this.vertices[3*a],!0),r.setFloat32(d+4,this.vertices[3*a+1],!0),r.setFloat32(d+8,this.vertices[3*a+2],!0);break;case i.Layout.UV.key:r.setFloat32(d,this.textures[2*a],!0),r.setFloat32(d+4,this.vertices[2*a+1],!0);break;case i.Layout.NORMAL.key:r.setFloat32(d,this.vertexNormals[3*a],!0),r.setFloat32(d+4,this.vertexNormals[3*a+1],!0),r.setFloat32(d+8,this.vertexNormals[3*a+2],!0);break;case i.Layout.MATERIAL_INDEX.key:r.setInt16(d,this.vertexMaterialIndices[a],!0);break;case i.Layout.AMBIENT.key:var p=this.vertexMaterialIndices[a],m=this.materialsByIndex[p];if(!m)break;r.setFloat32(d,m.ambient[0],!0),r.setFloat32(d+4,m.ambient[1],!0),r.setFloat32(d+8,m.ambient[2],!0);break;case i.Layout.DIFFUSE.key:var v=this.vertexMaterialIndices[a],g=this.materialsByIndex[v];if(!g)break;r.setFloat32(d,g.diffuse[0],!0),r.setFloat32(d+4,g.diffuse[1],!0),r.setFloat32(d+8,g.diffuse[2],!0);break;case i.Layout.SPECULAR.key:var M=this.vertexMaterialIndices[a],b=this.materialsByIndex[M];if(!b)break;r.setFloat32(d,b.specular[0],!0),r.setFloat32(d+4,b.specular[1],!0),r.setFloat32(d+8,b.specular[2],!0);break;case i.Layout.SPECULAR_EXPONENT.key:var y=this.vertexMaterialIndices[a],x=this.materialsByIndex[y];if(!x)break;r.setFloat32(d,x.specularExponent,!0);break;case i.Layout.EMISSIVE.key:var w=this.vertexMaterialIndices[a],A=this.materialsByIndex[w];if(!A)break;r.setFloat32(d,A.emissive[0],!0),r.setFloat32(d+4,A.emissive[1],!0),r.setFloat32(d+8,A.emissive[2],!0);break;case i.Layout.TRANSMISSION_FILTER.key:var T=this.vertexMaterialIndices[a],_=this.materialsByIndex[T];if(!_)break;r.setFloat32(d,_.transmissionFilter[0],!0),r.setFloat32(d+4,_.transmissionFilter[1],!0),r.setFloat32(d+8,_.transmissionFilter[2],!0);break;case i.Layout.DISSOLVE.key:var E=this.vertexMaterialIndices[a],k=this.materialsByIndex[E];if(!k)break;r.setFloat32(d,k.dissolve,!0);break;case i.Layout.ILLUMINATION.key:var I=this.vertexMaterialIndices[a],R=this.materialsByIndex[I];if(!R)break;r.setInt16(d,R.illumination,!0);break;case i.Layout.REFRACTION_INDEX.key:var S=this.vertexMaterialIndices[a],L=this.materialsByIndex[S];if(!L)break;r.setFloat32(d,L.refractionIndex,!0);break;case i.Layout.SHARPNESS.key:var F=this.vertexMaterialIndices[a],P=this.materialsByIndex[F];if(!P)break;r.setFloat32(d,P.sharpness,!0);break;case i.Layout.ANTI_ALIASING.key:var O=this.vertexMaterialIndices[a],B=this.materialsByIndex[O];if(!B)break;r.setInt16(d,B.antiAliasing,!0)}}}catch(t){u=!0,l=t}finally{try{!o&&h.return&&h.return()}finally{if(u)throw l}}}return n}},{key:"makeIndexBufferData",value:function(){var t=new Uint16Array(this.indices);return t.numItems=this.indices.length,t}},{key:"addMaterialLibrary",value:function(t){for(var e in t.materials)if(e in this.materialIndices){var n=t.materials[e],r=this.materialIndices[n.name];this.materialsByIndex[r]=n}}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e.Material=function t(e){a(this,t),this.name=e,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};e.MaterialLibrary=function(){function t(e){a(this,t),this.data=e,this.currentMaterial=null,this.materials={},this.parse()}return i(t,[{key:"parse_newmtl",value:function(t){var e=t[0];this.currentMaterial=new s(e),this.materials[e]=this.currentMaterial}},{key:"parseColor",value:function(t){if("spectral"!=t[0]&&"xyz"!=t[0]){if(3==t.length)return t.map(parseFloat);var e=parseFloat(t[0]);return[e,e,e]}}},{key:"parse_Ka",value:function(t){this.currentMaterial.ambient=this.parseColor(t)}},{key:"parse_Kd",value:function(t){this.currentMaterial.diffuse=this.parseColor(t)}},{key:"parse_Ks",value:function(t){this.currentMaterial.specular=this.parseColor(t)}},{key:"parse_Ke",value:function(t){this.currentMaterial.emissive=this.parseColor(t)}},{key:"parse_Tf",value:function(t){this.currentMaterial.transmissionFilter=this.parseColor(t)}},{key:"parse_d",value:function(t){this.currentMaterial.dissolve=parseFloat(t.pop())}},{key:"parse_illum",value:function(t){this.currentMaterial.illumination=parseInt(t[0])}},{key:"parse_Ni",value:function(t){this.currentMaterial.refractionIndex=parseFloat(t[0])}},{key:"parse_Ns",value:function(t){this.currentMaterial.specularExponent=parseInt(t[0])}},{key:"parse_sharpness",value:function(t){this.currentMaterial.sharpness=parseInt(t[0])}},{key:"parse_cc",value:function(t,e){e.colorCorrection="on"==t[0]}},{key:"parse_blendu",value:function(t,e){e.horizontalBlending="on"==t[0]}},{key:"parse_blendv",value:function(t,e){e.verticalBlending="on"==t[0]}},{key:"parse_boost",value:function(t,e){e.boostMipMapSharpness=parseFloat(t[0])}},{key:"parse_mm",value:function(t,e){e.modifyTextureMap.brightness=parseFloat(t[0]),e.modifyTextureMap.contrast=parseFloat(t[1])}},{key:"parse_ost",value:function(t,e,n){for(;t.length<3;)t.push(n);e.u=parseFloat(t[0]),e.v=parseFloat(t[1]),e.w=parseFloat(t[2])}},{key:"parse_o",value:function(t,e){this.parse_ost(t,e.offset,0)}},{key:"parse_s",value:function(t,e){this.parse_ost(t,e.scale,1)}},{key:"parse_t",value:function(t,e){this.parse_ost(t,e.turbulence,0)}},{key:"parse_texres",value:function(t,e){e.textureResolution=parseFloat(t[0])}},{key:"parse_clamp",value:function(t,e){e.clamp="on"==t[0]}},{key:"parse_bm",value:function(t,e){e.bumpMultiplier=parseFloat(t[0])}},{key:"parse_imfchan",value:function(t,e){e.imfChan=t[0]}},{key:"parse_type",value:function(t,e){e.reflectionType=t[0]}},{key:"parseOptions",value:function(t){var e={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},n=void 0,r=void 0,a={};for(t.reverse();t.length;){var i=t.pop();i.startsWith("-")?a[n=i.substr(1)]=[]:a[n].push(i)}for(n in a)if(a.hasOwnProperty(n)){r=a[n];var s=this["parse_"+n];s&&s.bind(this)(r,e)}return e}},{key:"parseMap",value:function(t){var e=void 0,n=void 0;if(t[0].startsWith("-"))e=t.pop(),n=t;else{var a=r(t);e=a[0],n=a.slice(1)}return(n=this.parseOptions(n)).filename=e,n}},{key:"parse_map_Ka",value:function(t){this.currentMaterial.mapAmbient=this.parseMap(t)}},{key:"parse_map_Kd",value:function(t){this.currentMaterial.mapDiffuse=this.parseMap(t)}},{key:"parse_map_Ks",value:function(t){this.currentMaterial.mapSpecular=this.parseMap(t)}},{key:"parse_map_Ke",value:function(t){this.currentMaterial.mapEmissive=this.parseMap(t)}},{key:"parse_map_Ns",value:function(t){this.currentMaterial.mapSpecularExponent=this.parseMap(t)}},{key:"parse_map_d",value:function(t){this.currentMaterial.mapDissolve=this.parseMap(t)}},{key:"parse_map_aat",value:function(t){this.currentMaterial.antiAliasing="on"==t[0]}},{key:"parse_map_bump",value:function(t){this.currentMaterial.mapBump=this.parseMap(t)}},{key:"parse_bump",value:function(t){this.parse_map_bump(t)}},{key:"parse_disp",value:function(t){this.currentMaterial.mapDisplacement=this.parseMap(t)}},{key:"parse_decal",value:function(t){this.currentMaterial.mapDecal=this.parseMap(t)}},{key:"parse_refl",value:function(t){this.currentMaterial.mapReflections.push(this.parseMap(t))}},{key:"parse",value:function(){var t=this.data.split(/\r?\n/),e=!0,n=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;if((o=o.trim())&&!o.startsWith("#")){var u,l=o.split(/\s/),c=r(l);u=c[0],l=c.slice(1);var h=this["parse_"+u];h&&h.bind(this)(l)}}}catch(t){n=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw a}}delete this.data,this.currentMaterial=null}}]),t}()},function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.deleteMeshBuffers=e.initMeshBuffers=e.downloadMeshes=e.downloadModels=e.Layout=e.MaterialLibrary=e.Material=e.Mesh=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),a=n(2),i=n(0),s=n(5);e.Mesh=r.default,e.Material=a.Material,e.MaterialLibrary=a.MaterialLibrary,e.Layout=i.Layout,e.downloadModels=s.downloadModels,e.downloadMeshes=s.downloadMeshes,e.initMeshBuffers=s.initMeshBuffers,e.deleteMeshBuffers=s.deleteMeshBuffers,e.version="1.1.3"},function(t,e,n){"use strict";function r(t,e){var n=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];e.endsWith("/")||(e+="/");var r=[];for(var a in t.materials)if(t.materials.hasOwnProperty(a)){a=t.materials[a];var i=!0,s=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;!function(t){var n=a[c];if(!n)return"continue";var i=e+n.filename;r.push(fetch(i).then(function(t){if(!t.ok)throw new Error;return t.blob()}).then(function(t){var e=new Image;return e.src=URL.createObjectURL(t),n.texture=e,new Promise(function(t){return e.onload=t})}).catch(function(){}))}()}}catch(t){s=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}}return Promise.all(r)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.downloadModels=function(t){var e=[],n=!0,o=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){!function(t){var n=[];if(!t.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var a={};a.indicesPerMaterial=!!t.indicesPerMaterial,a.calcTangentsAndBitangents=!!t.calcTangentsAndBitangents;var o=t.name;if(!o){var u=t.obj.split("/");o=u[u.length-1].replace(".obj","")}if(n.push(Promise.resolve(o)),n.push(fetch(t.obj).then(function(t){return t.text()}).then(function(t){return new i.default(t,a)})),t.mtl){var l=t.mtl;"boolean"==typeof l&&(l=t.obj.replace(/\.obj$/,".mtl")),n.push(fetch(l).then(function(t){return t.text()}).then(function(e){var n=new s.MaterialLibrary(e);if(!1!==t.downloadMtlTextures){var a=t.mtlTextureRoot;return a||(a=l.substr(0,l.lastIndexOf("/"))),Promise.all([Promise.resolve(n),r(n,a)])}return Promise.all(Promise.resolve(n))}).then(function(t){return t[0]}))}e.push(Promise.all(n))}(l.value)}}catch(t){o=!0,u=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw u}}return Promise.all(e).then(function(t){var e={},n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value,l=a(u,3),c=l[0],h=l[1],f=l[2];h.name=c,f&&h.addMaterialLibrary(f),e[c]=h}}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return e})},e.downloadMeshes=function(t,e,n){void 0===n&&(n={});var r=[];for(var s in t)!function(e){if(!t.hasOwnProperty(e))return"continue";var n=t[e];r.push(fetch(n).then(function(t){return t.text()}).then(function(t){return[e,new i.default(t)]}))}(s);Promise.all(r).then(function(t){var r=!0,i=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,c=a(l,2),h=c[0],f=c[1];n[h]=f}}catch(t){i=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}return e(n)})},e.initMeshBuffers=function(t,e){e.normalBuffer=o(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=o(t,t.ARRAY_BUFFER,e.textures,e.textureStride),e.vertexBuffer=o(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=o(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)},e.deleteMeshBuffers=function(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)};var i=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),s=n(2),o=(n(0),function(t,e,n,r){var a=t.createBuffer(),i=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,a),t.bufferData(e,new i(n),t.STATIC_DRAW),a.itemSize=r,a.numItems=n.length/r,a})}])},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"EPSILON",function(){return h}),n.d(r,"ARRAY_TYPE",function(){return f}),n.d(r,"RANDOM",function(){return d}),n.d(r,"setMatrixArrayType",function(){return p}),n.d(r,"toRadian",function(){return v}),n.d(r,"equals",function(){return g});var a={};n.r(a),n.d(a,"create",function(){return M}),n.d(a,"clone",function(){return b}),n.d(a,"copy",function(){return y}),n.d(a,"fromValues",function(){return x}),n.d(a,"set",function(){return w}),n.d(a,"identity",function(){return A}),n.d(a,"transpose",function(){return T}),n.d(a,"invert",function(){return _}),n.d(a,"adjoint",function(){return E}),n.d(a,"determinant",function(){return k}),n.d(a,"multiply",function(){return I}),n.d(a,"translate",function(){return R}),n.d(a,"scale",function(){return S}),n.d(a,"rotate",function(){return L}),n.d(a,"rotateX",function(){return F}),n.d(a,"rotateY",function(){return P}),n.d(a,"rotateZ",function(){return O}),n.d(a,"fromTranslation",function(){return B}),n.d(a,"fromScaling",function(){return D}),n.d(a,"fromRotation",function(){return N}),n.d(a,"fromXRotation",function(){return C}),n.d(a,"fromYRotation",function(){return U}),n.d(a,"fromZRotation",function(){return q}),n.d(a,"fromRotationTranslation",function(){return z}),n.d(a,"fromQuat2",function(){return V}),n.d(a,"getTranslation",function(){return j}),n.d(a,"getScaling",function(){return Y}),n.d(a,"getRotation",function(){return X}),n.d(a,"fromRotationTranslationScale",function(){return H}),n.d(a,"fromRotationTranslationScaleOrigin",function(){return W}),n.d(a,"fromQuat",function(){return G}),n.d(a,"frustum",function(){return K}),n.d(a,"perspective",function(){return Q}),n.d(a,"perspectiveFromFieldOfView",function(){return Z}),n.d(a,"ortho",function(){return $}),n.d(a,"lookAt",function(){return J}),n.d(a,"targetTo",function(){return tt}),n.d(a,"str",function(){return et}),n.d(a,"frob",function(){return nt}),n.d(a,"add",function(){return rt}),n.d(a,"subtract",function(){return at}),n.d(a,"multiplyScalar",function(){return it}),n.d(a,"multiplyScalarAndAdd",function(){return st}),n.d(a,"exactEquals",function(){return ot}),n.d(a,"equals",function(){return ut}),n.d(a,"mul",function(){return lt}),n.d(a,"sub",function(){return ct});var i={};n.r(i),n.d(i,"create",function(){return ht}),n.d(i,"clone",function(){return ft}),n.d(i,"length",function(){return dt}),n.d(i,"fromValues",function(){return pt}),n.d(i,"copy",function(){return mt}),n.d(i,"set",function(){return vt}),n.d(i,"add",function(){return gt}),n.d(i,"subtract",function(){return Mt}),n.d(i,"multiply",function(){return bt}),n.d(i,"divide",function(){return yt}),n.d(i,"ceil",function(){return xt}),n.d(i,"floor",function(){return wt}),n.d(i,"min",function(){return At}),n.d(i,"max",function(){return Tt}),n.d(i,"round",function(){return _t}),n.d(i,"scale",function(){return Et}),n.d(i,"scaleAndAdd",function(){return kt}),n.d(i,"distance",function(){return It}),n.d(i,"squaredDistance",function(){return Rt}),n.d(i,"squaredLength",function(){return St}),n.d(i,"negate",function(){return Lt}),n.d(i,"inverse",function(){return Ft}),n.d(i,"normalize",function(){return Pt}),n.d(i,"dot",function(){return Ot}),n.d(i,"cross",function(){return Bt}),n.d(i,"lerp",function(){return Dt}),n.d(i,"hermite",function(){return Nt}),n.d(i,"bezier",function(){return Ct}),n.d(i,"random",function(){return Ut}),n.d(i,"transformMat4",function(){return qt}),n.d(i,"transformMat3",function(){return zt}),n.d(i,"transformQuat",function(){return Vt}),n.d(i,"rotateX",function(){return jt}),n.d(i,"rotateY",function(){return Yt}),n.d(i,"rotateZ",function(){return Xt}),n.d(i,"angle",function(){return Ht}),n.d(i,"str",function(){return Wt}),n.d(i,"exactEquals",function(){return Gt}),n.d(i,"equals",function(){return Kt}),n.d(i,"sub",function(){return Qt}),n.d(i,"mul",function(){return Zt}),n.d(i,"div",function(){return $t}),n.d(i,"dist",function(){return Jt}),n.d(i,"sqrDist",function(){return te}),n.d(i,"len",function(){return ee}),n.d(i,"sqrLen",function(){return ne}),n.d(i,"forEach",function(){return re});var s=n(0);class o{constructor(t,e,n){let r=u(t,t.VERTEX_SHADER,e),a=u(t,t.FRAGMENT_SHADER,n),i=t.createProgram();if(t.attachShader(i,r),t.attachShader(i,a),t.linkProgram(i),t.deleteShader(r),t.deleteShader(a),!t.getProgramParameter(i,t.LINK_STATUS))return console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(i)),null;this.gl=t,this.program=i}use(){this.gl.useProgram(this.program)}setBool(t,e){this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),Number(e))}setInt(t,e){this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),Number(e))}setFloat(t,e){this.gl.uniform1f(this.gl.getUniformLocation(this.program,t),Number(e))}setVec3(t,e){this.gl.uniform3fv(this.gl.getUniformLocation(this.program,t),e)}setVec4(t,e){this.gl.uniform4fv(this.gl.getUniformLocation(this.program,t),e)}setMat3(t,e){this.gl.uniformMatrix3fv(this.gl.getUniformLocation(this.program,t),!1,e)}setMat4(t,e){this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,t),!1,e)}}function u(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}class l{constructor({width:t,height:e}={width:300,height:150}){this.el=document.createElement("div"),this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.loadingBar=document.createElement("progress"),this.loadingBar.value=0,this.loadingBar.max=100,this.loadingBar.style.width=t+"px",this.el.appendChild(this.loadingBar),this.resource={},this.resource.images=[],this.resourceCount=0,this.loadProgress=[];let n=this;if(this.loadProgressProxy=new Proxy(this.loadProgress,{set:function(t,e,r,a){let i=n.loadProgress.reduce((t,e)=>t+e,0);return 0!==n.resourceCount&&(n.loadingBar.value=i/n.resourceCount),Reflect.set(t,e,r,a)}}),this.options=arguments[0],this.gl=this.canvas.getContext("webgl2"),!this.gl)return console.error("Unable to initialize WebGL2. Your browser or machine may not support it."),null;var r,a;this.deltaTime=0,this.lastFrame=0,a=!1,r=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(a=!0),a?this.addTouchInput():this.addDesktopInput()}resize(){let t=this.canvas.clientWidth,e=this.canvas.clientHeight;this.canvas.width==t&&this.canvas.height==e||(this.canvas.width=t,this.canvas.height=e),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}draw(){}started(){}render(t){if(this.deltaTime=t-this.lastFrame,this.lastFrame=t,this.resize(),this.draw(t),this.mobile)for(let t in this.ongoingTouches)this.ongoingTouches[t].deltaX=0,this.ongoingTouches[t].deltaY=0;else this.mouseMovement.x=0,this.mouseMovement.y=0,this.wheelDeltaY=0;requestAnimationFrame(this.render.bind(this))}loadMesh(t){let e=new s.Mesh(t);Object(s.initMeshBuffers)(this.gl,e);let n=this;return e.setVAO=function(t){this.a_position=n.gl.getAttribLocation(t.program,"a_position"),this.a_texCoord=n.gl.getAttribLocation(t.program,"a_texCoord"),this.a_normal=n.gl.getAttribLocation(t.program,"a_normal"),this.vao=n.gl.createVertexArray(),n.gl.bindVertexArray(this.vao),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,this.vertexBuffer),n.gl.vertexAttribPointer(this.a_position,3,n.gl.FLOAT,!1,0,0),n.gl.enableVertexAttribArray(this.a_position),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,this.textureBuffer),n.gl.vertexAttribPointer(this.a_texCoord,2,n.gl.FLOAT,!1,0,0),n.gl.enableVertexAttribArray(this.a_texCoord),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,this.normalBuffer),n.gl.vertexAttribPointer(this.a_normal,3,n.gl.FLOAT,!1,0,0),n.gl.enableVertexAttribArray(this.a_normal),n.gl.bindVertexArray(null)},e.draw=function(){n.gl.bindVertexArray(this.vao),n.gl.bindBuffer(n.gl.ELEMENT_ARRAY_BUFFER,e.indexBuffer),n.gl.drawElements(n.gl.TRIANGLES,e.indexBuffer.numItems,n.gl.UNSIGNED_SHORT,0),n.gl.bindVertexArray(null)},e}async start(){let t=await this.loadTexture();this.loadingBar.remove(),this.el.appendChild(this.canvas),this.render(),this.textures=t,this.started()}setImageResource(t){this.resource.images=t}async loadTexture(){let t=[];this.resourceCount+=this.resource.images.length;let e=this.resource.images.map((t,e)=>l.loadImage(t,t=>{this.loadProgressProxy[e]=t})),n=await Promise.all(e);return this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),n.forEach((e,n)=>{t[n]=this.gl.createTexture(),this.gl.activeTexture(this.gl.TEXTURE0+n),this.gl.bindTexture(this.gl.TEXTURE_2D,t[n]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)}),t}}l.loadImage=function(t,e){return new Promise((n,r)=>{let a=new XMLHttpRequest,i=!1;a.open("GET",t,!0),a.responseType="arraybuffer",a.onprogress=function(t){t.lengthComputable?e(parseInt(t.loaded/t.total*100)):i||(i=!0,e(-1))},a.onloadend=function(){if(a.status.toString().match(/^2/)){i||e(100);let r={},s=a.getAllResponseHeaders().match(/^Content-Type\:\s*(.*?)$/im);s&&s[1]&&(r.type=s[1]);let o=new Blob([this.response],r);var t=window.URL.createObjectURL(o);let u=new Image;u.src=t,u.onload=(()=>n(u))}else r(a)},a.send()})},function(t){const e=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0],n="#version 300 es\n\n  layout (location = 0) in vec3 a_position;\n  layout (location = 1) in vec2 a_texCoord;\n\n  out vec2 TexCoord;\n\n  void main()\n  {\n      TexCoord = a_texCoord;\n      gl_Position = vec4(a_position, 1.0);\n  }\n  ";t.prototype.drawQuad=function(t){if(void 0===this.quadVAO){this.quadVAO=this.gl.createVertexArray();let t=this.gl.createBuffer();this.gl.bindVertexArray(this.quadVAO),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(0),this.gl.vertexAttribPointer(0,3,this.gl.FLOAT,!0,20,0),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(1,2,this.gl.FLOAT,!0,20,12),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null)}if(this.gl.bindVertexArray(this.quadVAO),1===t.length)this.gl.bindTexture(this.gl.TEXTURE_2D,t[0]);else for(let e in t)this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,t[e]);this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(null)},t.prototype.drawFB=function(t){void 0===this.fbShader&&(this.fbShader=new o(this.gl,n,"#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D scene;\n\n  void main()\n  {\n    FragColor = texture(scene, TexCoord);\n  }\n  ")),this.fbShader.use(),this.fbShader.setInt("scene",0),this.drawQuad([t])},t.prototype.drawDepth=function(t){void 0===this.fbShader&&(this.fbShader=new o(this.gl,n,"#version 300 es\n\n  precision mediump float;\n\n  out vec4 FragColor;\n  in vec2 TexCoord;\n\n  uniform sampler2D depthMap;\n\n  void main()\n  {\n    float depthValue = texture(depthMap, TexCoord).r;\n    FragColor = vec4(vec3(depthValue), 1.0);\n  }\n  ")),this.fbShader.use(),this.fbShader.setInt("depthMap",0),this.drawQuad([t])}}(l),l.prototype.addTouchInput=function(){this.mobile=!0;let t=this;function e(e){for(let n=0;n<t.ongoingTouches.length;n++)if(t.ongoingTouches[n].identifier===e)return n;return-1}this.canvas.addEventListener("touchstart",function(e){e.preventDefault();let n=e.changedTouches;for(let e=0;e<n.length;e++)n[e].startX=n[e].pageX,n[e].startY=n[e].pageY,n[e].deltaX=0,n[e].deltaY=0,t.ongoingTouches.push(n[e])},!1),this.canvas.addEventListener("touchend",function(n){n.preventDefault();let r=n.changedTouches;for(let n=0;n<r.length;n++)e(r[n].identifier),r[n].pageX,r[n].pageY,t.ongoingTouches.splice(n,1)},!1),this.canvas.addEventListener("touchmove",function(n){n.preventDefault();let r=n.changedTouches;for(let n=0;n<r.length;n++){let a=e(r[n].identifier);r[n].startX=t.ongoingTouches[a].startX,r[n].startY=t.ongoingTouches[a].startY,r[n].deltaX=r[n].pageX-t.ongoingTouches[a].pageX,r[n].deltaY=r[n].pageY-t.ongoingTouches[a].pageY,t.ongoingTouches.splice(a,1,r[n])}},!1),this.ongoingTouches=new Array},l.prototype.addDesktopInput=function(){this.mobile=!1,this.currentlyPressedKeys={},this.mouseMovement={x:0,y:0},this.wheelDeltaY=0;let t=this;function e(e){t.currentlyPressedKeys[e.key]=!0}function n(e){t.currentlyPressedKeys[e.key]=!1}function r(e){t.mouseMovement.x=e.movementX||0,t.mouseMovement.y=e.movementY||0}function a(e){t.wheelDeltaY=e.wheelDeltaY}function i(){document.pointerLockElement===t.canvas||document.mozPointerLockElement===t.canvas?(document.addEventListener("keydown",e),document.addEventListener("keyup",n),document.addEventListener("mousemove",r),document.addEventListener("wheel",a)):(document.removeEventListener("keydown",e),document.removeEventListener("keyup",n),document.removeEventListener("mousemove",r),document.removeEventListener("wheel",a))}this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.mozRequestPointerLock,this.canvas.exitPointerLock=this.canvas.exitPointerLock||this.canvas.mozExitPointerLock,this.canvas.onclick=function(){t.canvas.requestPointerLock()},document.addEventListener("pointerlockchange",i,!1),document.addEventListener("mozpointerlockchange",i,!1)};var c=l;const h=1e-6;let f="undefined"!=typeof Float32Array?Float32Array:Array;const d=Math.random;function p(t){f=t}const m=Math.PI/180;function v(t){return t*m}function g(t,e){return Math.abs(t-e)<=h*Math.max(1,Math.abs(t),Math.abs(e))}function M(){let t=new f(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function b(t){let e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(t,e,n,r,a,i,s,o,u,l,c,h,d,p,m,v){let g=new f(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=a,g[5]=i,g[6]=s,g[7]=o,g[8]=u,g[9]=l,g[10]=c,g[11]=h,g[12]=d,g[13]=p,g[14]=m,g[15]=v,g}function w(t,e,n,r,a,i,s,o,u,l,c,h,f,d,p,m,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=s,t[6]=o,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=v,t}function A(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){if(t===e){let n=e[1],r=e[2],a=e[3],i=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function _(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],M=n*o-r*s,b=n*u-a*s,y=n*l-i*s,x=r*u-a*o,w=r*l-i*o,A=a*l-i*u,T=c*m-h*p,_=c*v-f*p,E=c*g-d*p,k=h*v-f*m,I=h*g-d*m,R=f*g-d*v,S=M*R-b*I+y*k+x*E-w*_+A*T;return S?(S=1/S,t[0]=(o*R-u*I+l*k)*S,t[1]=(a*I-r*R-i*k)*S,t[2]=(m*A-v*w+g*x)*S,t[3]=(f*w-h*A-d*x)*S,t[4]=(u*E-s*R-l*_)*S,t[5]=(n*R-a*E+i*_)*S,t[6]=(v*y-p*A-g*b)*S,t[7]=(c*A-f*y+d*b)*S,t[8]=(s*I-o*E+l*T)*S,t[9]=(r*E-n*I-i*T)*S,t[10]=(p*w-m*y+g*M)*S,t[11]=(h*y-c*w-d*M)*S,t[12]=(o*_-s*k-u*T)*S,t[13]=(n*k-r*_+a*T)*S,t[14]=(m*b-p*x-v*M)*S,t[15]=(c*x-h*b+f*M)*S,t):null}function E(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15];return t[0]=o*(f*g-d*v)-h*(u*g-l*v)+m*(u*d-l*f),t[1]=-(r*(f*g-d*v)-h*(a*g-i*v)+m*(a*d-i*f)),t[2]=r*(u*g-l*v)-o*(a*g-i*v)+m*(a*l-i*u),t[3]=-(r*(u*d-l*f)-o*(a*d-i*f)+h*(a*l-i*u)),t[4]=-(s*(f*g-d*v)-c*(u*g-l*v)+p*(u*d-l*f)),t[5]=n*(f*g-d*v)-c*(a*g-i*v)+p*(a*d-i*f),t[6]=-(n*(u*g-l*v)-s*(a*g-i*v)+p*(a*l-i*u)),t[7]=n*(u*d-l*f)-s*(a*d-i*f)+c*(a*l-i*u),t[8]=s*(h*g-d*m)-c*(o*g-l*m)+p*(o*d-l*h),t[9]=-(n*(h*g-d*m)-c*(r*g-i*m)+p*(r*d-i*h)),t[10]=n*(o*g-l*m)-s*(r*g-i*m)+p*(r*l-i*o),t[11]=-(n*(o*d-l*h)-s*(r*d-i*h)+c*(r*l-i*o)),t[12]=-(s*(h*v-f*m)-c*(o*v-u*m)+p*(o*f-u*h)),t[13]=n*(h*v-f*m)-c*(r*v-a*m)+p*(r*f-a*h),t[14]=-(n*(o*v-u*m)-s*(r*v-a*m)+p*(r*u-a*o)),t[15]=n*(o*f-u*h)-s*(r*f-a*h)+c*(r*u-a*o),t}function k(t){let e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],s=t[5],o=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15];return(e*s-n*i)*(h*v-f*m)-(e*o-r*i)*(c*v-f*p)+(e*u-a*i)*(c*m-h*p)+(n*o-r*s)*(l*v-f*d)-(n*u-a*s)*(l*m-h*d)+(r*u-a*o)*(l*p-c*d)}function I(t,e,n){let r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],g=e[14],M=e[15],b=n[0],y=n[1],x=n[2],w=n[3];return t[0]=b*r+y*o+x*h+w*m,t[1]=b*a+y*u+x*f+w*v,t[2]=b*i+y*l+x*d+w*g,t[3]=b*s+y*c+x*p+w*M,b=n[4],y=n[5],x=n[6],w=n[7],t[4]=b*r+y*o+x*h+w*m,t[5]=b*a+y*u+x*f+w*v,t[6]=b*i+y*l+x*d+w*g,t[7]=b*s+y*c+x*p+w*M,b=n[8],y=n[9],x=n[10],w=n[11],t[8]=b*r+y*o+x*h+w*m,t[9]=b*a+y*u+x*f+w*v,t[10]=b*i+y*l+x*d+w*g,t[11]=b*s+y*c+x*p+w*M,b=n[12],y=n[13],x=n[14],w=n[15],t[12]=b*r+y*o+x*h+w*m,t[13]=b*a+y*u+x*f+w*v,t[14]=b*i+y*l+x*d+w*g,t[15]=b*s+y*c+x*p+w*M,t}function R(t,e,n){let r,a,i,s,o,u,l,c,h,f,d,p,m=n[0],v=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*m+o*v+h*g+e[12],t[13]=a*m+u*v+f*g+e[13],t[14]=i*m+l*v+d*g+e[14],t[15]=s*m+c*v+p*g+e[15]),t}function S(t,e,n){let r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function L(t,e,n,r){let a,i,s,o,u,l,c,f,d,p,m,v,g,M,b,y,x,w,A,T,_,E,k,I,R=r[0],S=r[1],L=r[2],F=Math.sqrt(R*R+S*S+L*L);return F<h?null:(R*=F=1/F,S*=F,L*=F,a=Math.sin(n),s=1-(i=Math.cos(n)),o=e[0],u=e[1],l=e[2],c=e[3],f=e[4],d=e[5],p=e[6],m=e[7],v=e[8],g=e[9],M=e[10],b=e[11],y=R*R*s+i,x=S*R*s+L*a,w=L*R*s-S*a,A=R*S*s-L*a,T=S*S*s+i,_=L*S*s+R*a,E=R*L*s+S*a,k=S*L*s-R*a,I=L*L*s+i,t[0]=o*y+f*x+v*w,t[1]=u*y+d*x+g*w,t[2]=l*y+p*x+M*w,t[3]=c*y+m*x+b*w,t[4]=o*A+f*T+v*_,t[5]=u*A+d*T+g*_,t[6]=l*A+p*T+M*_,t[7]=c*A+m*T+b*_,t[8]=o*E+f*k+v*I,t[9]=u*E+d*k+g*I,t[10]=l*E+p*k+M*I,t[11]=c*E+m*k+b*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function F(t,e,n){let r=Math.sin(n),a=Math.cos(n),i=e[4],s=e[5],o=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+l*r,t[5]=s*a+c*r,t[6]=o*a+h*r,t[7]=u*a+f*r,t[8]=l*a-i*r,t[9]=c*a-s*r,t[10]=h*a-o*r,t[11]=f*a-u*r,t}function P(t,e,n){let r=Math.sin(n),a=Math.cos(n),i=e[0],s=e[1],o=e[2],u=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-l*r,t[1]=s*a-c*r,t[2]=o*a-h*r,t[3]=u*a-f*r,t[8]=i*r+l*a,t[9]=s*r+c*a,t[10]=o*r+h*a,t[11]=u*r+f*a,t}function O(t,e,n){let r=Math.sin(n),a=Math.cos(n),i=e[0],s=e[1],o=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+l*r,t[1]=s*a+c*r,t[2]=o*a+h*r,t[3]=u*a+f*r,t[4]=l*a-i*r,t[5]=c*a-s*r,t[6]=h*a-o*r,t[7]=f*a-u*r,t}function B(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function D(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e,n){let r,a,i,s=n[0],o=n[1],u=n[2],l=Math.sqrt(s*s+o*o+u*u);return l<h?null:(s*=l=1/l,o*=l,u*=l,r=Math.sin(e),i=1-(a=Math.cos(e)),t[0]=s*s*i+a,t[1]=o*s*i+u*r,t[2]=u*s*i-o*r,t[3]=0,t[4]=s*o*i-u*r,t[5]=o*o*i+a,t[6]=u*o*i+s*r,t[7]=0,t[8]=s*u*i+o*r,t[9]=o*u*i-s*r,t[10]=u*u*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function C(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function q(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z(t,e,n){let r=e[0],a=e[1],i=e[2],s=e[3],o=r+r,u=a+a,l=i+i,c=r*o,h=r*u,f=r*l,d=a*u,p=a*l,m=i*l,v=s*o,g=s*u,M=s*l;return t[0]=1-(d+m),t[1]=h+M,t[2]=f-g,t[3]=0,t[4]=h-M,t[5]=1-(c+m),t[6]=p+v,t[7]=0,t[8]=f+g,t[9]=p-v,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function V(t,e){let n=new f(3),r=-e[0],a=-e[1],i=-e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],h=r*r+a*a+i*i+s*s;return h>0?(n[0]=2*(o*s+c*r+u*i-l*a)/h,n[1]=2*(u*s+c*a+l*r-o*i)/h,n[2]=2*(l*s+c*i+o*a-u*r)/h):(n[0]=2*(o*s+c*r+u*i-l*a),n[1]=2*(u*s+c*a+l*r-o*i),n[2]=2*(l*s+c*i+o*a-u*r)),z(t,e,n),t}function j(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Y(t,e){let n=e[0],r=e[1],a=e[2],i=e[4],s=e[5],o=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(i*i+s*s+o*o),t[2]=Math.sqrt(u*u+l*l+c*c),t}function X(t,e){let n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function H(t,e,n,r){let a=e[0],i=e[1],s=e[2],o=e[3],u=a+a,l=i+i,c=s+s,h=a*u,f=a*l,d=a*c,p=i*l,m=i*c,v=s*c,g=o*u,M=o*l,b=o*c,y=r[0],x=r[1],w=r[2];return t[0]=(1-(p+v))*y,t[1]=(f+b)*y,t[2]=(d-M)*y,t[3]=0,t[4]=(f-b)*x,t[5]=(1-(h+v))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(d+M)*w,t[9]=(m-g)*w,t[10]=(1-(h+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function W(t,e,n,r,a){let i=e[0],s=e[1],o=e[2],u=e[3],l=i+i,c=s+s,h=o+o,f=i*l,d=i*c,p=i*h,m=s*c,v=s*h,g=o*h,M=u*l,b=u*c,y=u*h,x=r[0],w=r[1],A=r[2],T=a[0],_=a[1],E=a[2],k=(1-(m+g))*x,I=(d+y)*x,R=(p-b)*x,S=(d-y)*w,L=(1-(f+g))*w,F=(v+M)*w,P=(p+b)*A,O=(v-M)*A,B=(1-(f+m))*A;return t[0]=k,t[1]=I,t[2]=R,t[3]=0,t[4]=S,t[5]=L,t[6]=F,t[7]=0,t[8]=P,t[9]=O,t[10]=B,t[11]=0,t[12]=n[0]+T-(k*T+S*_+P*E),t[13]=n[1]+_-(I*T+L*_+O*E),t[14]=n[2]+E-(R*T+F*_+B*E),t[15]=1,t}function G(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],s=n+n,o=r+r,u=a+a,l=n*s,c=r*s,h=r*o,f=a*s,d=a*o,p=a*u,m=i*s,v=i*o,g=i*u;return t[0]=1-h-p,t[1]=c+g,t[2]=f-v,t[3]=0,t[4]=c-g,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function K(t,e,n,r,a,i,s){let o=1/(n-e),u=1/(a-r),l=1/(i-s);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(a+r)*u,t[10]=(s+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*l,t[15]=0,t}function Q(t,e,n,r,a){let i=1/Math.tan(e/2),s=1/(r-a);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*s,t[15]=0,t}function Z(t,e,n,r){let a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+o),l=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(s-o)*u*.5,t[9]=(a-i)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function $(t,e,n,r,a,i,s){let o=1/(e-n),u=1/(r-a),l=1/(i-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*o,t[13]=(a+r)*u,t[14]=(s+i)*l,t[15]=1,t}function J(t,e,n,r){let a,i,s,o,u,l,c,f,d,p,m=e[0],v=e[1],g=e[2],M=r[0],b=r[1],y=r[2],x=n[0],w=n[1],T=n[2];return Math.abs(m-x)<h&&Math.abs(v-w)<h&&Math.abs(g-T)<h?A(t):(c=m-x,f=v-w,d=g-T,a=b*(d*=p=1/Math.sqrt(c*c+f*f+d*d))-y*(f*=p),i=y*(c*=p)-M*d,s=M*f-b*c,(p=Math.sqrt(a*a+i*i+s*s))?(a*=p=1/p,i*=p,s*=p):(a=0,i=0,s=0),o=f*s-d*i,u=d*a-c*s,l=c*i-f*a,(p=Math.sqrt(o*o+u*u+l*l))?(o*=p=1/p,u*=p,l*=p):(o=0,u=0,l=0),t[0]=a,t[1]=o,t[2]=c,t[3]=0,t[4]=i,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(a*m+i*v+s*g),t[13]=-(o*m+u*v+l*g),t[14]=-(c*m+f*v+d*g),t[15]=1,t)}function tt(t,e,n,r){let a=e[0],i=e[1],s=e[2],o=r[0],u=r[1],l=r[2],c=a-n[0],h=i-n[1],f=s-n[2],d=c*c+h*h+f*f;d>0&&(c*=d=1/Math.sqrt(d),h*=d,f*=d);let p=u*f-l*h,m=l*c-o*f,v=o*h-u*c;return(d=p*p+m*m+v*v)>0&&(p*=d=1/Math.sqrt(d),m*=d,v*=d),t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=h*v-f*m,t[5]=f*p-c*v,t[6]=c*m-h*p,t[7]=0,t[8]=c,t[9]=h,t[10]=f,t[11]=0,t[12]=a,t[13]=i,t[14]=s,t[15]=1,t}function et(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function nt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function rt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function at(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function it(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function st(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function ot(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ut(t,e){let n=t[0],r=t[1],a=t[2],i=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],g=t[14],M=t[15],b=e[0],y=e[1],x=e[2],w=e[3],A=e[4],T=e[5],_=e[6],E=e[7],k=e[8],I=e[9],R=e[10],S=e[11],L=e[12],F=e[13],P=e[14],O=e[15];return Math.abs(n-b)<=h*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-y)<=h*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-x)<=h*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-w)<=h*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-A)<=h*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(o-T)<=h*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(u-_)<=h*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-E)<=h*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-k)<=h*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(f-I)<=h*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-R)<=h*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(p-S)<=h*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(m-L)<=h*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(v-F)<=h*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(g-P)<=h*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(M-O)<=h*Math.max(1,Math.abs(M),Math.abs(O))}const lt=I,ct=at;function ht(){let t=new f(3);return t[0]=0,t[1]=0,t[2]=0,t}function ft(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function dt(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function pt(t,e,n){let r=new f(3);return r[0]=t,r[1]=e,r[2]=n,r}function mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vt(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function gt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Mt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function bt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function yt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function xt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function wt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function At(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Tt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function _t(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Et(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function kt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function It(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function Rt(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function St(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function Lt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ft(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Pt(t,e){let n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function Ot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bt(t,e,n){let r=e[0],a=e[1],i=e[2],s=n[0],o=n[1],u=n[2];return t[0]=a*u-i*o,t[1]=i*s-r*u,t[2]=r*o-a*s,t}function Dt(t,e,n,r){let a=e[0],i=e[1],s=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t}function Nt(t,e,n,r,a,i){let s=i*i,o=s*(2*i-3)+1,u=s*(i-2)+i,l=s*(i-1),c=s*(3-2*i);return t[0]=e[0]*o+n[0]*u+r[0]*l+a[0]*c,t[1]=e[1]*o+n[1]*u+r[1]*l+a[1]*c,t[2]=e[2]*o+n[2]*u+r[2]*l+a[2]*c,t}function Ct(t,e,n,r,a,i){let s=1-i,o=s*s,u=i*i,l=o*s,c=3*i*o,h=3*u*s,f=u*i;return t[0]=e[0]*l+n[0]*c+r[0]*h+a[0]*f,t[1]=e[1]*l+n[1]*c+r[1]*h+a[1]*f,t[2]=e[2]*l+n[2]*c+r[2]*h+a[2]*f,t}function Ut(t,e){e=e||1;let n=2*d()*Math.PI,r=2*d()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function qt(t,e,n){let r=e[0],a=e[1],i=e[2],s=n[3]*r+n[7]*a+n[11]*i+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/s,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/s,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/s,t}function zt(t,e,n){let r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function Vt(t,e,n){let r=n[0],a=n[1],i=n[2],s=n[3],o=e[0],u=e[1],l=e[2],c=a*l-i*u,h=i*o-r*l,f=r*u-a*o,d=a*f-i*h,p=i*c-r*f,m=r*h-a*c,v=2*s;return c*=v,h*=v,f*=v,d*=2,p*=2,m*=2,t[0]=o+c+d,t[1]=u+h+p,t[2]=l+f+m,t}function jt(t,e,n,r){let a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Yt(t,e,n,r){let a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Xt(t,e,n,r){let a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ht(t,e){let n=pt(t[0],t[1],t[2]),r=pt(e[0],e[1],e[2]);Pt(n,n),Pt(r,r);let a=Ot(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)}function Wt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Gt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Kt(t,e){let n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2];return Math.abs(n-i)<=h*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=h*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-o)<=h*Math.max(1,Math.abs(a),Math.abs(o))}const Qt=Mt,Zt=bt,$t=yt,Jt=It,te=Rt,ee=dt,ne=St,re=function(){let t=ht();return function(e,n,r,a,i,s){let o,u;for(n||(n=3),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,o=r;o<u;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],i(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}();function ae(){let t=new f(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}!function(){let t=new f(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0}();ht(),pt(1,0,0),pt(0,1,0),ae(),ae(),function(){let t=new f(9);t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(),function(){let t=new f(2);t[0]=0,t[1]=0}();const ie=Object.freeze({FORWARD:1,BACKWARD:2,LEFT:3,RIGHT:4,UP:5,DOWN:6}),se=-90,oe=0,ue=.005,le=.05,ce=45;class he{constructor(t=[0,0,0],e=[0,1,0],n=se,r=oe,a=[0,0,-1],i=ue,s=le,o=ce){this.position=t,this.worldUp=e,this.yaw=n,this.pitch=r,this.front=a,this.right=[1,0,0],this.up=[0,1,0],this.movementSpeed=i,this.mouseSensitivity=s,this.zoom=o,this.updateCameraVectors()}getViewMatrix(){let t=a.create(),e=i.create();return i.add(e,this.position,this.front),a.lookAt(t,this.position,e,this.up),t}processMove(t,e){let n=this.movementSpeed*e,r=i.create();t==ie.FORWARD&&(i.scale(r,this.front,n),i.add(this.position,this.position,r)),t==ie.BACKWARD&&(i.scale(r,this.front,n),i.sub(this.position,this.position,r)),t==ie.LEFT&&(i.scale(r,this.right,n),i.sub(this.position,this.position,r)),t==ie.RIGHT&&(i.scale(r,this.right,n),i.add(this.position,this.position,r)),t==ie.UP&&(i.scale(r,this.up,n),i.add(this.position,this.position,r)),t==ie.DOWN&&(i.scale(r,this.up,n),i.sub(this.position,this.position,r))}processViewAngle(t,e,n=!0){t*=this.mouseSensitivity,e*=this.mouseSensitivity,this.yaw+=t,this.pitch+=e,n&&(this.pitch>89&&(this.pitch=89),this.pitch<-89&&(this.pitch=-89)),this.updateCameraVectors()}processMouseScroll(t){this.zoom>=1&&this.zoom<=45&&(this.zoom-=t/200),this.zoom<=1&&(this.zoom=1),this.zoom>=45&&(this.zoom=45)}updateCameraVectors(){let t=i.create();t[0]=Math.cos(r.toRadian(this.yaw))*Math.cos(r.toRadian(this.pitch)),t[1]=Math.sin(r.toRadian(this.pitch)),t[2]=Math.sin(r.toRadian(this.yaw))*Math.cos(r.toRadian(this.pitch)),i.normalize(this.front,t);let e=i.create();i.cross(e,this.front,this.worldUp),i.normalize(this.right,e);let n=i.create();i.cross(n,this.right,this.front),i.normalize(this.up,n)}}he.Movement=ie;var fe=he;n.d(e,"Camera",function(){return fe}),n.d(e,"Shader",function(){return o}),n.d(e,"ArGL",function(){return c}),e.default=c}])});